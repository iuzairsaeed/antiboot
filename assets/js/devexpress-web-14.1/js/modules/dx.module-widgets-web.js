/*! 
* DevExtreme (Web Widgets)
* Version: 14.2.6
* Build date: Mar 18, 2015
*
* Copyright (c) 2012 - 2015 Developer Express Inc. ALL RIGHTS RESERVED
* EULA: https://www.devexpress.com/Support/EULAs/DevExtreme.xml
*/
"use strict";if(!DevExpress.MOD_WIDGETS_WEB){if(!DevExpress.MOD_WIDGETS_BASE)throw Error("Required module is not referenced: widgets-base");(function(n,t,i){var u=t.ui,h=u.events,f=t.fx,p=t.utils,w=t.translator,c="dx-accordion",l="dx-accordion-wrapper",s="dx-accordion-item",e="dx-accordion-item-opened",r="dx-accordion-item-title",o="dx-accordion-item-body",a="dxAccordionItemData",v="dxAccordionItemTitleData",y="dxAccordionItemContentData";t.registerComponent("dxAccordion",u,u.CollectionWidget.inherit({_activeStateUnit:"."+s,_setDefaultOptions:function(){this.callBase(),this.option({height:i,itemTitleTemplate:"title",onItemTitleClick:null,onItemTitleHold:null,selectedIndex:0,collapsible:!1,multiple:!1,animationDuration:300,selectionByClick:!0,activeStateEnabled:!0})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return t.devices.real().generic&&!t.devices.isSimulator()},options:{hoverStateEnabled:!0,focusStateEnabled:!0}}])},_init:function(){this.callBase(),this.option("selectionRequired",!this.option("collapsible")),this.option("selectionMode",this.option("multiple")?"multi":"single");var t=this.element();t.addClass(c),this._$container=n("<div>").addClass(l),t.append(this._$container)},_render:function(){this.callBase(),this._attachItemTitleClickAction()},_itemDataKey:function(){return a},_itemClass:function(){return s},_itemContainer:function(){return this._$container},_itemTitles:function(){return this._itemElements().find("."+r)},_itemContents:function(){return this._itemElements().find("."+o)},_getItemData:function(t){return n(t).parent().data(this._itemDataKey())||this.callBase.apply(this,arguments)},_executeItemRenderAction:function(n){n.type||this.callBase.apply(this,arguments)},_itemSelectHandler:function(t){n(t.target).closest("."+o).length||this.callBase.apply(this,arguments)},_renderItemContent:function(t,i,r){r=r||this._itemContainer();var f=this.callBase.apply(this,[t,n.extend({type:"content",template:this._getTemplateByOption("itemTemplate")},i),r]),u=f.parent(),e=n("<div>").prependTo(u);return this.callBase.apply(this,[t,n.extend({type:"title",titleTemplate:this._getTemplateByOption("itemTitleTemplate")},i),e]),u},_getItemTemplateName:function(n){var t=this.option("itemTemplateProperty");return n.type==="title"&&(t="titleTemplate"),n&&n[t]||this.option("itemTemplate")},_addItemContentClasses:function(n,t){switch(t.type){case"title":n.addClass(r).data(v,t);break;case"content":n.addClass(o).data(y,t);break;default:this.callBase.apply(this,arguments)}},_attachItemTitleClickAction:function(){var t="."+r,i=h.addNamespace("dxclick",this.NAME);this._itemContainer().off(i,t).on(i,t,n.proxy(this._itemTitleClickHandler,this))},_itemTitleClickHandler:function(n){this._itemJQueryEventHandler(n,"onItemTitleClick")},_renderSelection:function(n,t){this._updateItems(n,t,!0)},_updateSelection:function(n,t){this._updateItems(n,t,!1)},_updateItems:function(t,i,r){var u=this._itemElements();n.each(t,function(n,t){u.eq(t).addClass(e)}),n.each(i,function(n,t){u.eq(t).removeClass(e)}),this._updateItemHeights(r)},_updateItemHeights:function(t){var i=this._itemElements(),u=this._splitFreeSpace(this._calculateFreeSpace());n.each(i,n.proxy(function(i,o){var s=n(o),h=s.children("."+r),l=s.outerHeight(),c=s.hasClass(e)?u+h.outerHeight()||s.height("auto").outerHeight():h.outerHeight();f.isAnimating(s)&&f.stop(s),t?s.css("height",c):this._animateItem(s,l,c)},this))},_animateItem:function(t,i,r){f.animate(t,{type:"slide",from:{height:i},to:{height:r},duration:this.option("animationDuration"),complete:n.proxy(function(){this._deferredAnimate&&this._deferredAnimate.resolveWith(this)},this)})},_splitFreeSpace:function(n){return n?n/this.option("selectedItems").length:n},_calculateFreeSpace:function(){var r=this.option("height"),u,t;if(r!==i&&r!=="auto")return u=this._itemTitles(),t=0,n.each(u,function(i,r){t+=n(r).outerHeight()}),this.element().height()-t},_visibilityChanged:function(n){n&&this._dimensionChanged()},_dimensionChanged:function(){this._updateItemHeights(!0)},_optionChanged:function(n){switch(n.name){case"animationDuration":case"onItemTitleClick":break;case"collapsible":this.option("selectionRequired",!this.option("collapsible"));break;case"itemTitleTemplate":case"itemContentTemplate":case"onItemTitleHold":case"height":this._invalidate();break;case"itemTitleRender":this._itemTitleRender=null,this._invalidate();break;case"itemContentRender":this._itemContentRender=null,this._invalidate();break;case"multiple":this.option("selectionMode",n.value?"multi":"single");break;default:this.callBase(n)}},expandItem:function(t){return this._deferredAnimate=n.Deferred(),this.selectItem(t),this._deferredAnimate.promise()},collapseItem:function(t){return this._deferredAnimate=n.Deferred(),this.unselectItem(t),this._deferredAnimate.promise()}}))})(jQuery,DevExpress),function(n,t,i){var o=t.ui,r=t.utils,e=o.events,v=t.Class,u=4,y="dx-pager",s="dx-page",p="dx-pages",h="dx-selection",w="dx-separator",b="dx-page-sizes",c="dx-page-size",k="dx-navigate-button",l="dx-prev-button",a="dx-next-button",d="dx-info",g="dx-button-disable",f=v.inherit({ctor:function(t,i){var r=this;r.index=i,r._$page=n("<div />").text(t).addClass(s)},value:function(n){var i=this,t;if(r.isDefined(n))i._$page.text(n);else return t=i._$page.text(),r.isNumber(t)?parseInt(t):t},select:function(n){this._$page.toggleClass(h,n)},render:function(n,t){t?this._$page.prependTo(n):this._$page.appendTo(n)}});t.registerComponent("dxPager",o,o.Widget.inherit({_setDefaultOptions:function(){this.callBase(),this.option({visible:!0,pageIndex:1,maxPagesCount:10,pageCount:10,pageSize:5,showPageSizes:!0,pageSizes:[5,10],hasKnownLastPage:!0,showNavigationButtons:!1,showInfo:!1,infoText:Globalize.localize("dxPager-infoText"),rtlEnabled:!1,pageIndexChanged:n.noop,pageSizeChanged:n.noop})},_toggleVisibility:function(n){var t=this.element();t&&t.css("display",n?"":"none")},_getPages:function(n,t){var r=[],e=!this.option("hasKnownLastPage"),o,i;if(t>0||e)if(t<=this.option("maxPagesCount")){for(i=1;i<=t;i++)r.push(new f(i,i-1));e&&r.push(new f(">",i-1))}else{for(r.push(new f(1,0)),o=n?n.value()-n.index:1,i=1;i<=u;i++)r.push(new f(o+i,i));r.push(new f(t,u+1)),e&&r.push(new f(">",u+1))}return r},_getPageByValue:function(n){for(var r=this,i,t=0;t<r._pages.length;t++)if(i=r._pages[t],i.value()===n)return i},_processSelectedPage:function(t,i,e){var o=this,s=!1,h;o._pages&&(n.each(o._pages,function(n,t){i===t.value()&&(s=!0)}),s||(o.selectedPage=null)),r.isDefined(o.selectedPage)?i===e&&e>t&&o.selectedPage.index!==u+1&&(o.selectedPage.index=u+1):i>u&&i<e&&(h=e-u<i?u-(e-i)+1:2,o.selectedPage=new f(i,h))},_selectPageByValue:function(n){var u=this,f,t=u._getPageByValue(n),h=u._pages,o=h.length,s,e,c;if(r.isDefined(t)){if(s=u._pages[t.index-1],e=u._pages[t.index+1],e&&e.value()===">"&&(c=e,e=i,o--,h.pop()),u.selectedPage&&u.selectedPage.select(!1),t.select(!0),u.selectedPage=t,e&&e.value()-n>1)if(t.index!==0)for(s.value(n+1),u._pages.splice(t.index,1),u._pages.splice(t.index-1,0,t),u._pages[t.index].index=t.index,t.index=t.index-1,f=t.index-1;f>0;f--)u._pages[f].value(u._pages[f+1].value()-1);else for(f=0;f<o-1;f++)u._pages[f].value(f+1);if(s&&n-s.value()>1)if(t.index!==o-1)for(e.value(n-1),u._pages.splice(t.index,1),u._pages.splice(t.index+1,0,t),u._pages[t.index].index=t.index,t.index=t.index+1,f=t.index+1;f<o-1;f++)u._pages[f].value(u._pages[f-1].value()+1);else for(f=1;f<=o-2;f++)u._pages[o-1-f].value(u._pages[o-1].value()-f);c&&h.push(c)}},_nextPage:function(n){var t=this.selectedPage&&this.selectedPage.value(),i=this.option("pageCount");r.isDefined(t)&&(t=n==="next"?++t:--t,t>0&&t<=i&&this.option("pageIndex",t))},_renderPages:function(t){var i=this,u,o=t.length,h=i._createAction(function(t){var u=t.jQueryEvent,r=n(u.target).text(),f=r===">"?i.option("pageCount")+1:Number(r);i.option("pageIndex",f)}),f,r;if(o>1){i._pageClickHandler=function(n){h({jQueryEvent:n})};i.$pagesChooser.on(e.addNamespace("dxclick",i.Name+"Pages"),"."+s,i._pageClickHandler)}for(r=0;r<o;r++)f=t[r],f.render(i.$pagesChooser,i.option("rtlEnabled")),t[r+1]&&t[r+1].value()-f.value()>1&&(u=n("<div>. . .<\/div>").addClass(w),i.option("rtlEnabled")?u.prependTo(i.$pagesChooser):u.appendTo(i.$pagesChooser))},_renderPagesChooser:function(){var t=this,i=t.element();if(i){if(t._pages.length===0){t.selectedPage=null;return}r.isDefined(t.$pagesChooser)?t.$pagesChooser.empty():t.$pagesChooser=n("<div />").addClass(p),t._renderInfo(),t._renderNavigateButton("prev"),t._renderPages(t._pages),t._renderNavigateButton("next"),r.isDefined(t.$pagesChooser[0].parentElement)||t.$pagesChooser.appendTo(i)}},_renderPagesSizeChooser:function(){var t=this,i,u,a=t.option("pageSize"),f=t.option("pageSizes"),v=t.option("showPageSizes"),o,s=f&&f.length,l=t.element();if(l&&(t._clickPagesSizeAction=t._createAction(function(i){var r=i.jQueryEvent;o=parseInt(n(r.target).text()),t.option("pageSize",o)}),r.isDefined(t.pagesSizeChooserElement)?t.pagesSizeChooserElement.empty():t.pagesSizeChooserElement=n("<div />").addClass(b).on(e.addNamespace("dxclick",t.Name+"PageSize"),"."+c,function(n){t._clickPagesSizeAction({jQueryEvent:n})}),v&&s)){for(i=0;i<s;i++)u=n("<div />").text(f[i]).addClass(c),a===f[i]&&u.addClass(h),t.option("rtlEnabled")?t.pagesSizeChooserElement.prepend(u):t.pagesSizeChooserElement.append(u);r.isDefined(t.pagesSizeChooserElement[0].parentElement)||t.pagesSizeChooserElement.appendTo(l)}},_renderInfo:function(){var t=this.option("infoText");this.option("showInfo")&&r.isDefined(t)&&n("<div>").addClass(d).text(r.stringFormat(t,this.selectedPage&&this.selectedPage.value(),this.option("pageCount"))).appendTo(this.$pagesChooser)},_renderNavigateButton:function(t){var i=this,u,o=i._createAction(function(){i._nextPage(t)}),r,f;i.option("showNavigationButtons")&&(u=i.option("pageIndex"),f=u>1&&t==="prev"||u<i.option("pageCount")&&t==="next",r=n("<div>").addClass(k).addClass(f?"":g).on(e.addNamespace("dxclick",i.Name+"Pages"),function(n){o({jQueryEvent:n})}),i.option("rtlEnabled")?(r.addClass(t==="prev"?a:l),r.prependTo(this.$pagesChooser)):(r.addClass(t==="prev"?l:a),r.appendTo(this.$pagesChooser)))},_render:function(){this.callBase(),this._update(),this.element().addClass(y),this._toggleVisibility(this.option("visible")),this._renderPagesSizeChooser(),this._renderPagesChooser()},_update:function(){var n=this.option("pageCount"),t=this.option("pageIndex");this._processSelectedPage(this.option("maxPagesCount"),t,n),this._pages=this._getPages(this.selectedPage,n),this._selectPageByValue(t)},_optionChanged:function(n){var t,i;switch(n.name){case"visible":this._toggleVisibility(n.value);break;case"pageIndex":t=this.option("pageIndexChanged"),t&&t(n.value);case"maxPagesCount":case"pageCount":case"hasKnownLastPage":case"showNavigationButtons":this._update(),this._renderPagesChooser();break;case"pageSize":i=this.option("pageSizeChanged"),i&&i(n.value);case"pageSizes":this._renderPagesSizeChooser();break;default:this._invalidate()}},_clean:function(){this.$pagesChooser&&this.$pagesChooser.off(e.addNamespace("dxclick",this.Name+"Pages"),"."+s,this._pageClickHandler)},getHeight:function(){return this.option("visible")?this.element().outerHeight():0}}))}(jQuery,DevExpress),function(n,t){var f=t.ui,pt=f.events,wt=t.utils,r=t.translator,s="dx-colorview",h="dx-colorview-container",u="dx-colorview-container-row",c="dx-colorview-container-cell",l="dx-colorview-palette",a="dx-colorview-palette-cell",v="dx-colorview-palette-handle",e="dx-colorview-palette-gradient",y="dx-colorview-palette-gradient-white",p="dx-colorview-palette-gradient-black",w="dx-colorview-hue-scale",b="dx-colorview-hue-scale-cell",k="dx-colorview-hue-scale-handle",d="dx-colorview-hue-scale-wrapper",g="dx-colorview-controls-container",bt="dx-colorview-label",nt="dx-colorview-label-red",tt="dx-colorview-label-green",it="dx-colorview-label-blue",rt="dx-colorview-label-hex",kt="dx-colorview-alpha-channel",ut="dx-colorview-alpha-channel-scale",ft="dx-colorview-alpha-channel-row",et="dx-colorview-alpha-channel-wrapper",ot="dx-colorview-alpha-channel-label",st="dx-colorview-alpha-channel-handle",ht="dx-colorview-alpha-channel-cell",ct="dx-colorview-alpha-channel-border",o="dx-colorview-color-preview",lt="dx-colorview-color-preview-container",at="dx-colorview-color-preview-container-inner",vt="dx-colorview-color-preview-color-current",yt="dx-colorview-color-preview-color-new";t.registerComponent("dxColorView",f,f.Editor.inherit({_supportedKeys:function(){var i=this.option("rtlEnabled"),t=this,u=function(){var n=100/t._paletteWidth;return n=n>1?n:1},f=function(n){t._currentColor.hsv.s+=n,s()},e=function(){var n=100/t._paletteHeight;return n=n>1?n:1},o=function(n){t._currentColor.hsv.v+=n,s()},s=function(){t._placePaletteHandle();var n=r.locate(t._$paletteHandle);t._updateColorFromHsv(t._currentColor.hsv.h,t._currentColor.hsv.s,t._currentColor.hsv.v)},h=function(){var n=360/(t._hueScaleWrapperHeight-t._hueScaleHandleHeight);return n=n>1?n:1},c=function(n){t._currentColor.hsv.h+=n,t._placeHueScaleHandle();var i=r.locate(t._$hueScaleHandle);t._updateColorHue(i.top+t._hueScaleHandleHeight/2)},l=function(){var n=1/t._alphaChannelScaleWorkWidth;return n=n>.01?n:.01,n=i?-n:n},a=function(n){t._currentColor.a+=n,t._placeAlphaChannelHandle();var i=r.locate(t._$alphaChannelHandle);t._calculateColorTransparenceByScaleWidth(i.left+t._alphaChannelHandleWidth/2)};return n.extend(this.callBase(),{upArrow:function(n){n.preventDefault(),n.stopPropagation(),n.ctrlKey?this._currentColor.hsv.h<=360&&!this._isTopColorHue&&c(h()):this._currentColor.hsv.v<100&&o(e())},downArrow:function(n){n.preventDefault(),n.stopPropagation(),n.ctrlKey?this._currentColor.hsv.h>=0&&(this._isTopColorHue&&(this._currentColor.hsv.h=360),c(-h())):this._currentColor.hsv.v>0&&o(-e())},rightArrow:function(n){n.preventDefault(),n.stopPropagation(),n.ctrlKey?(i?this._currentColor.a<1:this._currentColor.a>0&&this.option("editAlphaChannel"))&&a(-l()):this._currentColor.hsv.s<100&&f(u())},leftArrow:function(n){n.preventDefault(),n.stopPropagation(),n.ctrlKey?(i?this._currentColor.a>0:this._currentColor.a<1&&this.option("editAlphaChannel"))&&a(l()):this._currentColor.hsv.s>0&&f(-u())},enter:function(n){if(this.option("applyValueMode")==="useButtons"){var t=n.target.value,i=this.option("editAlphaChannel")?this._makeRgba(this.option("value")):this.option("value");t&&t!=i&&this._setCurrentColor(t),this.applyColor()}}})},_setDefaultOptions:function(){this.callBase(),this.option({value:null,editAlphaChannel:!1,applyValueMode:"useButtons"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return t.devices.real().generic&&!t.devices.isSimulator()},options:{focusStateEnabled:!0}}])},_init:function(){this.callBase(),this._initColorAndOpacity()},_initColorAndOpacity:function(){this._setCurrentColor(this.option("value"))},_setCurrentColor:function(n){n=n||"#000000";var i=new t.Color(n);i.colorIsInvalid?this.option("value",this._currentColor.baseColor):this._currentColor&&this._makeRgba(this._currentColor)==this._makeRgba(i)||(this._currentColor=i,this._$currentColor&&this._makeTransparentBackground(this._$currentColor,i))},_render:function(){this.callBase(),this.element().addClass(s),this._renderColorPickerContainer()},_makeTransparentBackground:function(n,i){i instanceof t.Color||(i=new t.Color(i)),t.browser.msie&&t.browser.version==="8.0"?n.css({background:i.toHex(),filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity="+i.a*100+")"}):n.css("backgroundColor",this._makeRgba(i))},_makeRgba:function(n){return n instanceof t.Color||(n=new t.Color(n)),"rgba("+[n.r,n.g,n.b,n.a].join(", ")+")"},_renderValue:function(){this.callBase(this.option("editAlphaChannel")?this._makeRgba(this._currentColor):this.option("value"))},_renderColorPickerContainer:function(){var t=this.element();this._$colorPickerContainer=n("<div>",{"class":h,appendTo:t}),this._renderHtmlRows(),this._renderPalette(),this._renderHueScale(),this._renderControlsContainer(),this._renderControls(),this._renderAlphaChannelElements()},_renderHtmlRows:function(t){var e=this._$colorPickerContainer.find("."+u),r=e.length,c=this._calculateRowsCount(),i=r-c,s,f,o,h;if(i>0&&(s=this._calculateRemovedHtmlRowIndex(r,t),e.eq(s).remove()),i<0){for(i=Math.abs(i),f=[],o=0;o<i;o++)f.push(n("<div>",{"class":u}));r?(h=this._calculateHtmlRowIndex(r,t),e.eq(h).after(f)):this._$colorPickerContainer.append(f)}},_renderHtmlCellInsideRow:function(t,i,r){return n("<div>",{"class":c,addClass:r,appendTo:i.find("."+u+t)})},_calculateRowsCount:function(){return this.option("editAlphaChannel")?this.option("applyValueMode")==="instantly"?2:3:this.option("applyValueMode")==="instantly"?1:2},_calculateRemovedHtmlRowIndex:function(n,t){var i=-1;return n===3&&(t==="editAlphaChannel"&&(i=-2),t==="applyValueMode"&&(i=-1)),i},_calculateHtmlRowIndex:function(n,t){var i=0;return n===2&&t==="applyValueMode"&&(i=1),i},_renderPalette:function(){var t=this._renderHtmlCellInsideRow(":first",this._$colorPickerContainer,a),i=n("<div>",{"class":[e,y].join(" ")}),r=n("<div>",{"class":[e,p].join(" ")});this._$palette=n("<div>",{"class":l,css:{backgroundColor:this._currentColor.getPureColor().toHex()},appendTo:t}),this._paletteHeight=this._$palette.height(),this._paletteWidth=this._$palette.width(),this._renderPaletteHandle(),this._$palette.append([i,r])},_renderPaletteHandle:function(){this._$paletteHandle=n("<div>",{"class":v,appendTo:this._$palette}).dxDraggable({area:this._$palette,allowMoveByClick:!0,boundOffset:n.proxy(function(){return-this._paletteHandleHeight/2},this),onDrag:n.proxy(function(){var t=r.locate(this._$paletteHandle);this._updateByDrag=!0,this._updateColorFromHsv(this._currentColor.hsv.h,this._calculateColorSaturation(t),this._calculateColorValue(t))},this)}),this._paletteHandleWidth=this._$paletteHandle.width(),this._paletteHandleHeight=this._$paletteHandle.height(),this._placePaletteHandle()},_placePaletteHandle:function(){r.move(this._$paletteHandle,{left:Math.round(this._paletteWidth*this._currentColor.hsv.s/100-this._paletteHandleWidth/2),top:Math.round(this._paletteHeight-this._paletteHeight*this._currentColor.hsv.v/100-this._paletteHandleHeight/2)})},_calculateColorValue:function(n){var t=Math.floor(n.top+this._paletteHandleHeight/2);return 100-Math.round(t*100/this._paletteHeight)},_calculateColorSaturation:function(n){var t=Math.floor(n.left+this._paletteHandleWidth/2);return Math.round(t*100/this._paletteWidth)},_updateColorFromHsv:function(n,i,r){var u=this._currentColor.a;this._currentColor=new t.Color("hsv("+[n,i,r].join(",")+")"),this._currentColor.a=u,this._updateColorParamsAndColorPreview(),this.option("applyValueMode")==="instantly"&&this.applyColor()},_renderHueScale:function(){var t=this._renderHtmlCellInsideRow(":first",this._$colorPickerContainer,b);this._$hueScaleWrapper=n("<div>",{"class":d,appendTo:t}),this._$hueScale=n("<div>",{"class":w,appendTo:this._$hueScaleWrapper}),this._hueScaleHeight=this._$hueScale.height(),this._hueScaleWrapperHeight=this._$hueScaleWrapper.outerHeight(),this._renderHueScaleHandle()},_renderHueScaleHandle:function(){this._$hueScaleHandle=n("<div>",{"class":k,appendTo:this._$hueScaleWrapper}).dxDraggable({area:this._$hueScaleWrapper,allowMoveByClick:!0,direction:"vertical",onDrag:n.proxy(function(){this._updateByDrag=!0,this._updateColorHue(r.locate(this._$hueScaleHandle).top+this._hueScaleHandleHeight/2)},this)}),this._hueScaleHandleHeight=this._$hueScaleHandle.height(),this._placeHueScaleHandle()},_placeHueScaleHandle:function(){var t=this._hueScaleWrapperHeight,i=this._hueScaleHandleHeight,n=(t-i)*(360-this._currentColor.hsv.h)/360;t<n+i&&(n=t-i),n<0&&(n=0),r.move(this._$hueScaleHandle,{top:Math.round(n)})},_updateColorHue:function(n){var t=360-Math.round((n-this._hueScaleHandleHeight/2)*360/(this._hueScaleWrapperHeight-this._hueScaleHandleHeight)),i=this._currentColor.hsv.s,r=this._currentColor.hsv.v;this._isTopColorHue=!1,t=t<0?0:t,t>=360&&(this._isTopColorHue=!0,t=0),this._updateColorFromHsv(t,i,r),this._$palette.css("backgroundColor",this._currentColor.getPureColor().toHex())},_renderControlsContainer:function(){var t=this._renderHtmlCellInsideRow(":first",this._$colorPickerContainer);this._$controlsContainer=n("<div>",{"class":g,appendTo:t})},_renderControls:function(){this._renderColorsPreview(),this._renderRgbInputs(),this._renderHexInput()},_renderColorsPreview:function(){var t=n("<div>",{"class":lt,appendTo:this._$controlsContainer}),i=n("<div>",{"class":at,appendTo:t});this._$currentColor=n("<div>",{"class":[o,vt].join(" ")}),this._$newColor=n("<div>",{"class":[o,yt].join(" ")}),this._makeTransparentBackground(this._$currentColor,this._currentColor),this._makeTransparentBackground(this._$newColor,this._currentColor),i.append([this._$currentColor,this._$newColor])},_renderAlphaChannelElements:function(){this.option("editAlphaChannel")&&(this._$colorPickerContainer.find("."+u).eq(1).addClass(ft),this._renderAlphaChannelScale(),this._renderAlphaChannelInput())},_renderRgbInputs:function(){this._rgbInputsWithLabels=[this._renderEditorWithLabel({editorType:"dxNumberBox",value:this._currentColor.r,onValueChanged:n.proxy(this._updateColor,this,!1),labelText:"R",labelClass:nt}),this._renderEditorWithLabel({editorType:"dxNumberBox",value:this._currentColor.g,onValueChanged:n.proxy(this._updateColor,this,!1),labelText:"G",labelClass:tt}),this._renderEditorWithLabel({editorType:"dxNumberBox",value:this._currentColor.b,onValueChanged:n.proxy(this._updateColor,this,!1),labelText:"B",labelClass:it})],this._$controlsContainer.append(this._rgbInputsWithLabels),this._rgbInputs=[this._rgbInputsWithLabels[0].find(".dx-numberbox").dxNumberBox("instance"),this._rgbInputsWithLabels[1].find(".dx-numberbox").dxNumberBox("instance"),this._rgbInputsWithLabels[2].find(".dx-numberbox").dxNumberBox("instance")]},_renderEditorWithLabel:function(t){var r=n("<div>"),f=n("<label>",{"class":t.labelClass,text:t.labelText+":",append:r}).off("dxclick").on("dxclick",function(n){n.preventDefault()}),u=t.editorType,i={value:t.value,onValueChanged:t.onValueChanged};return u==="dxNumberBox"&&(i.min=t.min||0,i.max=t.max||255,i.step=t.step||1),r[u](i),f},_renderHexInput:function(){this._hexInput=this._renderEditorWithLabel({editorType:"dxTextBox",value:this._currentColor.toHex().replace("#",""),onValueChanged:n.proxy(this._updateColor,this,!0),labelClass:rt,labelText:"#"}).appendTo(this._$controlsContainer).find(".dx-textbox").dxTextBox("instance")},_renderAlphaChannelScale:function(){var t=this._renderHtmlCellInsideRow(":eq(1)",this._$colorPickerContainer,ht),i=n("<div>",{"class":ct,appendTo:t}),r=n("<div>",{"class":et,appendTo:i});this._$alphaChannelScale=n("<div>",{"class":ut,appendTo:r}),this._makeCSSLinearGradient(this._$alphaChannelScale),this._renderAlphaChannelHandle(t)},_makeCSSLinearGradient:function(n){var t=this._currentColor,i=[t.r,t.g,t.b].join(","),r=t.toHex().replace("#",""),u=function(n,t){var u=this.option("rtlEnabled"),i="rgba("+n+", "+(u?"1":"0")+")",r="rgba("+n+", "+(u?"0":"1")+")",f="'#"+(u?"00":"")+t+"'",e="'#"+(u?"":"00")+t+"'";return["background-image: -webkit-linear-gradient(180deg, "+i+", "+r+")","background-image: -moz-linear-gradient(-90deg, "+i+", "+r+")","background-image: -ms-linear-gradient(-90deg, "+i+", "+r+")","background-image: -o-linear-gradient(-90deg, "+i+", "+r+")","background-image: linear-gradient(-90deg, "+i+", "+r+")","filter: progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr="+f+", endColorstr="+e+")","-ms-filter: progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr="+f+", endColorstr="+e+")"].join(";")};n.attr("style",u.call(this,i,r))},_renderAlphaChannelInput:function(){var n=this,t=this._renderHtmlCellInsideRow(":eq(1)",this._$colorPickerContainer);n._alphaChannelInput=this._renderEditorWithLabel({editorType:"dxNumberBox",value:this._currentColor.a,max:1,step:.1,onValueChanged:function(t){var i=t.value;i=n._currentColor.isValidAlpha(i)?i:n._currentColor.a,n._updateColorTransparence(i),n._placeAlphaChannelHandle()},labelClass:ot,labelText:"Alpha"}).appendTo(t).find(".dx-numberbox").dxNumberBox("instance")},_updateColorTransparence:function(n){this._currentColor.a=n,this._makeTransparentBackground(this._$newColor,this._currentColor),this.option("applyValueMode")==="instantly"&&this.applyColor()},_renderAlphaChannelHandle:function(t){this._$alphaChannelHandle=n("<div>",{"class":st,appendTo:t}).dxDraggable({area:t,allowMoveByClick:!0,direction:"horizontal",onDrag:n.proxy(function(){this._updateByDrag=!0;var t=this._$alphaChannelHandle,i=r.locate(t).left+this._alphaChannelHandleWidth/2;this._calculateColorTransparenceByScaleWidth(i)},this)}),this._alphaChannelHandleWidth=this._$alphaChannelHandle.width(),this._alphaChannelScaleWorkWidth=t.width()-this._alphaChannelHandleWidth,this._placeAlphaChannelHandle()},_calculateColorTransparenceByScaleWidth:function(n){var t=(n-this._alphaChannelHandleWidth/2)/this._alphaChannelScaleWorkWidth,i=this.option("rtlEnabled");t=i?t:1-t,n>=this._alphaChannelScaleWorkWidth+this._alphaChannelHandleWidth/2?t=i?1:0:t<1&&(t=t.toFixed(2)),this._alphaChannelInput.option("value",t)},_placeAlphaChannelHandle:function(){var n=this._alphaChannelScaleWorkWidth*(1-this._currentColor.a);n<0&&(n=0),this._alphaChannelScaleWorkWidth<n&&(n=this._alphaChannelScaleWorkWidth),r.move(this._$alphaChannelHandle,{left:this.option("rtlEnabled")?this._alphaChannelScaleWorkWidth-n:n})},applyColor:function(){var n=this.option("editAlphaChannel")?this._makeRgba(this._currentColor):this._currentColor.toHex();this._makeTransparentBackground(this._$currentColor,this._currentColor),this.option("value",n)},cancelColor:function(){this._initColorAndOpacity(),this._refreshMarkup()},_updateColor:function(n){var i,r;n?r=this._validateHex("#"+this._hexInput.option("value")):(i=this._validateRgb(),this._alphaChannelInput?(i.push(this._alphaChannelInput.option("value")),r="rgba("+i.join(", ")+")"):r="rgb("+i.join(", ")+")"),this._suppressEditorsValueUpdating||(this._currentColor=new t.Color(r),this._refreshMarkup(),this.option("applyValueMode")==="instantly"&&this.applyColor())},_validateHex:function(n){return this._currentColor.isValidHex(n)?n:this._currentColor.toHex()},_validateRgb:function(){var n=this._rgbInputs[0].option("value"),t=this._rgbInputs[1].option("value"),i=this._rgbInputs[2].option("value");return this._currentColor.isValidRGB(n,t,i)||(n=this._currentColor.r,t=this._currentColor.g,i=this._currentColor.b),[n,t,i]},_refreshMarkup:function(){this._placeHueScaleHandle(),this._placePaletteHandle(),this._updateColorParamsAndColorPreview(),this._$palette.css("backgroundColor",this._currentColor.getPureColor().toHex()),this._$alphaChannelHandle&&(this._updateColorTransparence(this._currentColor.a),this._placeAlphaChannelHandle())},_updateColorParamsAndColorPreview:function(){this._suppressEditorsValueUpdating=!0,this._hexInput.option("value",this._currentColor.toHex().replace("#","")),this._rgbInputs[0].option("value",this._currentColor.r),this._rgbInputs[1].option("value",this._currentColor.g),this._rgbInputs[2].option("value",this._currentColor.b),this._suppressEditorsValueUpdating=!1,this._makeTransparentBackground(this._$newColor,this._currentColor),this.option("editAlphaChannel")&&(this._makeCSSLinearGradient.call(this,this._$alphaChannelScale),this._alphaChannelInput.option("value",this._currentColor.a))},_optionChanged:function(n){var t=n.value;switch(n.name){case"value":this._setCurrentColor(t),this._updateByDrag||this._refreshMarkup(),this._updateByDrag=!1,this.callBase(n);break;case"editAlphaChannel":this._$colorPickerContainer&&(this._renderHtmlRows("editAlphaChannel"),this._renderAlphaChannelElements());break;case"applyValueMode":this._$colorPickerContainer&&this._renderHtmlRows("applyValueMode");break;default:this.callBase(n)}}}))}(jQuery,DevExpress),function(n,t){var r=t.ui,u="dx-colorbox",o=u+"-input",h=o+"-container",c=u+"-color-result-preview",s=u+"-color-is-not-defined",l=u+"-overlay",a="dx-colorview-container-cell",v="dx-colorview-button-cell",y="dx-colorview-buttons-container",p="dx-colorview-apply-button",w="dx-colorview-cancel-button",f=r.dxColorView.prototype,e={makeTransparentBackground:n.proxy(f._makeTransparentBackground,f),makeRgba:n.proxy(f._makeRgba,f)};t.registerComponent("dxColorBox",r,r.dxDropDownEditor.inherit({_supportedKeys:function(){var t=function(n){return n.stopPropagation(),this.option("opened")?(n.preventDefault(),!0):void 0},i=function(n){return this.option("opened")?n.altKey?(this.close(),!1):!0:(n.preventDefault(),!1)},r=function(n){return!this.option("opened")&&!n.altKey?(n.preventDefault(),!1):!this.option("opened")&&n.altKey?(this._validatedOpening(),!1):!0};return n.extend(this.callBase(),{tab:function(n){this.option("opened")&&(n.preventDefault(),this._colorView._rgbInputs[0].focus())},enter:function(n){return this.option("opened")&&(n.preventDefault(),this.close()),!0},leftArrow:t,rightArrow:t,upArrow:i,downArrow:r})},_setDefaultOptions:function(){this.callBase(),this.option({editAlphaChannel:!1,applyButtonText:Globalize.localize("OK"),cancelButtonText:Globalize.localize("Cancel"),applyValueMode:"useButtons",onApplyButtonClick:null,onCancelButtonClick:null,buttonsLocation:"bottom after"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return t.devices.real().generic&&!t.devices.isSimulator()},options:{focusStateEnabled:!0}}])},_popupConfig:function(){return n.extend(this.callBase(),{height:"auto",width:""})},_contentReadyHandler:function(){this._createColorView();var n=this._popup.bottomToolbar();n&&(n.addClass(a).addClass(v).find(".dx-toolbar-items-container").addClass(y),n.find(".dx-popup-done").addClass(p),n.find(".dx-popup-cancel").addClass(w))},_createColorView:function(){var i=this,t;this._popup.overlayContent().addClass(l),t=n("<div>").appendTo(this._popup.content()),this._colorView=this._createComponent(t,"dxColorView",this._colorViewConfig());t.on("focus",n.proxy(function(){this.focus()},this))},_colorViewConfig:function(){var n=this,t=n.option("focusStateEnabled")&&!n.option("disabled");return{value:n.option("value"),editAlphaChannel:n.option("editAlphaChannel"),applyValueMode:n.option("applyValueMode"),rtlEnabled:n.option("rtlEnabled"),focusStateEnabled:n.option("focusStateEnabled"),onValueChanged:function(t){var i=t.value;n.option("value",i),i&&e.makeTransparentBackground(n._$colorResultPreview,i)},_keyboardProcessor:t?n._keyboardProcessor.attachChildProcessor():null}},_applyButtonHandler:function(){this._colorView.applyColor(),n.isFunction(this.option("onApplyButtonClick"))&&this.option("onApplyButtonClick")(),this.callBase()},_cancelButtonHandler:function(){this._colorView.cancelColor(),n.isFunction(this.option("onCancelButtonClick"))&&this.option("onCancelButtonClick")(),this.callBase()},_attachChildKeyboardEvents:function(){var n=this._keyboardProcessor.attachChildProcessor();if(this._colorView){this._colorView.option("_keyboardProcessor",n);return}},_init:function(){this.callBase()},_render:function(){this.callBase(),this.element().addClass(u)},_renderInput:function(){this.callBase(),this.element().wrapInner(n("<div/>").addClass(h)),this._$colorBoxInputContainer=this.element().children().eq(0),this._$colorResultPreview=n("<div>",{"class":c,appendTo:this._$colorBoxInputContainer}),this.option("value")?e.makeTransparentBackground(this._$colorResultPreview,this.option("value")):this._$colorBoxInputContainer.addClass(s),this._input().addClass(o)},_renderValue:function(){var n=this.option("value");this.option("text",this.option("editAlphaChannel")?e.makeRgba(n):n),this.callBase()},_valueChangeEventHandler:function(n){var i=this._input().val(),r;i&&(r=new t.Color(i),r.colorIsInvalid&&(i=this.option("value"),this._input().val(i)),this._colorView&&(this._colorView._setCurrentColor(i),this._colorView._refreshMarkup())),this.callBase(n,i)},_optionChanged:function(n){var t=n.value,i=n.name;switch(i){case"value":this._$colorBoxInputContainer.toggleClass(s,!t),t?e.makeTransparentBackground(this._$colorResultPreview,t):this._$colorResultPreview.removeAttr("style"),this._colorView&&this._colorView.option("value",t),this.callBase(n);break;case"applyButtonText":case"cancelButtonText":case"editAlphaChannel":case"onCancelButtonClick":case"onApplyButtonClick":this._colorView&&this._colorView.option(i,t);break;case"applyValueMode":this._colorView&&this._colorView.option(i,t),this.callBase(n);break;case"rtlEnabled":this._colorView&&this._colorView.option(i,t),this.callBase(n);break;default:this.callBase(n)}}})),t.registerComponent("dxColorPicker",r,r.dxColorBox.inherit({ctor:function(){t.log("W0000",this.NAME,"14.2","Use 'dxColorBox' instead"),this.callBase.apply(this,arguments)}}))}(jQuery,DevExpress),function(n,t){var u=t.ui,f=t.utils,rt=u.events,e="dx-menu",c="dx-menu-base",r=e+"-item",o=r+"-selected",h=r+"-wrapper",l=e+"-items-container",a=r+"-expanded",v=e+"-separator",y=e+"-last-group-item",p=r+"-has-text",w=r+"-has-icon",b=r+"-has-submenu",k="dx-state-disabled",d="."+r,g="."+o,s="single",nt="none",tt=1,it=u.CollectionWidget.inherit({NAME:"dxMenuBase",_setDefaultOptions:function(){this.callBase(),this.option({items:[],cssClass:"",activeStateEnabled:!0,showSubmenuMode:"onHover",animation:{show:{type:"fade",from:0,to:1,duration:100},hide:{type:"fade",from:1,to:0,duration:100}},selectionByClick:!1,selectionMode:"none",focusOnSelectedItem:!1,_remoteSelectionSync:!1,hoverStateEnabled:!0})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return t.devices.real().generic&&!t.devices.isSimulator()},options:{focusStateEnabled:!0}}])},_activeStateUnit:d,_itemDataKey:function(){return"dxMenuItemDataKey"},_itemClass:function(){return r},_selectedItemClass:function(){return o},_focusTarget:function(){return this._itemContainer()},_eventBindingTarget:function(){return this._itemContainer()},_supportedKeys:function(){var t=function(){var t=this.option("focusedElement");t&&this._isSelectionEnabled()&&this.selectItem(t)};return n.extend(this.callBase(),{space:t,pageUp:n.noop,pageDown:n.noop})},_isSelectionEnabled:function(){return this._getSelectionMode()===s},_getSelectionMode:function(){return this.option("selectionMode")===s?s:nt},_init:function(){this.callBase(),this._initActions()},_initActions:n.noop,_render:function(){var n=this.element();this.callBase(arguments),this._addCustomCssClass(n),this._itemContainer().addClass(c)},_getShowSubmenuMode:function(){return this._isDesktopDevice()?this.option("showSubmenuMode"):"onClick"},_isDesktopDevice:function(){return t.devices.real().deviceType==="desktop"},_initEditStrategy:function(){var n=u.CollectionWidget.MenuBaseEditStrategy;this._editStrategy=new n(this)},_addCustomCssClass:function(n){n.addClass(this.option("cssClass"))},_itemWrapperSelector:function(){return"."+h},_hoverStartHandler:function(t){var r=this._getShowSubmenuMode(),i=this._getItemElementByEventArgs(t),u;i&&(u=i.hasClass(k),t.stopPropagation(),this.option("focusedElement",i),r==="onHover"?this._showSubmenu(i):r==="onHoverStay"&&setTimeout(n.proxy(this._showSubmenuOnHoverStay,this),300,i))},_showSubmenuOnHoverStay:function(n){n.hasClass("dx-state-focused")&&this._showSubmenu(n)},_showSubmenu:function(n){n.addClass(a)},_getItemElementByEventArgs:function(t){var i=n(t.target),r=t.currentTarget;if(i.hasClass(this._itemClass())||i.get(0)===r)return i;while(!i.hasClass(this._itemClass()))if(i=i.parent(),i.hasClass("dx-submenu"))return null;return i},_hoverEndHandler:n.noop,_hasSubmenu:function(n){return n.items&&n.items.length>0},_renderItems:function(t,i,r){var f=this,u,i=i||tt;t.length&&(u=this._renderContainer(i,r),n.each(t,function(n,t){f._renderItem(n,t,u,i)})),this._setSelectionFromItems()},_renderContainer:function(){var t=this._createItemsContainer();return t.addClass(l),t},_createItemsContainer:function(){var t=n("<div>").appendTo(this.element());return n("<ul>").appendTo(t)},_renderItem:function(t,i,r,u){var s=this.option("items"),e=n("<li>"),o;this._renderSeparator(i,t,r),e.appendTo(r).addClass(h),s[t+1]&&s[t+1].beginGroup&&e.addClass(y),f.isObject(i)||(i={text:i}),f.isDefined(i.selected)||(i.selected=!1),o=this.callBase(t,i,e),this._addContentClasses(i,o),this._renderSubmenuItems(i,o,u)},_addContentClasses:function(n,t){n.text&&t.addClass(p),(n.icon||n.iconSrc)&&t.addClass(w),n.items&&n.items.length>0&&t.addClass(b)},_setSelectionFromItems:function(){var t=this.option("selectedIndex"),i=!t||t===-1;!this.option("_remoteSelectionSync")&&i&&(n.each(this._editStrategy._getPlainItems(),function(n,i){i.selected&&i.selectable!==!1&&(t=n)}),t&&this.option("selectedIndex",t))},_renderSeparator:function(t,i,r){t.beginGroup&&i>0&&n("<li>").appendTo(r).addClass(v)},_renderSubmenuItems:n.noop,_itemClickHandler:function(t){var i=this._createAction(n.proxy(this._updateSubmenuVisibilityOnClick,this));this._itemJQueryEventHandler(t,"onItemClick",{},{afterExecute:n.proxy(i,this)})},_updateSubmenuVisibilityOnClick:function(n){this._updateSelectedItemOnClick(n),this._getShowSubmenuMode()==="onClick"&&this._showSubmenu(n.args[0].itemElement)},_updateSelectedItemOnClick:function(n){var t=n.args?n.args[0]:n,u=this._isSelectionEnabled()&&this.option("selectionByClick"),i,r;u&&t.itemData.selectable!==!1&&!this._hasSubmenu(t.itemData)&&(i=this._itemContainer().find(g),i.length?(r=this._getItemData(i),i.removeClass(o),r&&(r.selected=!1,this._clearSelectedItems()),i.is(t.itemElement)||this._setSelectedItems(t)):this._setSelectedItems(t))},_setSelectedItems:function(n){n.itemData.selected=!0,this.option("selectedItems",[n.itemData])},_syncSelectionOptions:function(t){var i=this._editStrategy._getPlainItems()||[],e=this.option("selectedItems")||[],r=this.option("selectedItem"),u=this.option("selectedIndex");t=t||this._chooseSelectOption();switch(t){case"selectedItems":this._setOptionSilent("selectedItem",e[0]),this._setOptionSilent("selectedIndex",n.inArray(e[0],i));break;case"selectedItem":f.isDefined(r)?(this._setOptionSilent("selectedItems",[r]),this._setOptionSilent("selectedIndex",n.inArray(r,i))):(this._setOptionSilent("selectedItems",[]),this._setOptionSilent("selectedIndex",-1));break;case"selectedIndex":f.isDefined(i[u])?(this._setOptionSilent("selectedItems",[i[u]]),this._setOptionSilent("selectedItem",i[u])):(this._setOptionSilent("selectedItems",[]),this._setOptionSilent("selectedItem",null))}},_getStringifiedArray:function(t){return n.map(t,function(n){return JSON.stringify(n)})},_isOwnItem:function(t){var i=this._editStrategy._getPlainItems();return n.inArray(JSON.stringify(t),this._getStringifiedArray(i))>=0},_optionChanged:function(n){switch(n.name){case"showSubmenuMode":break;case"_remoteSelectionSync":case"cssClass":case"position":case"selectionByClick":case"animation":this._invalidate();break;default:this.callBase(n)}},selectItem:function(t){var i=this._editStrategy.getNormalizedIndex(t),f=this._getItemData(t),u,r;i!==-1&&(u=n.inArray(i,this._selectedItemIndices),u===-1)&&this.option("selectionMode")==="single"&&f.selectable!==!1&&(r=this._editStrategy.fetchSelectedItems([i]),r[0].selected=!0,this.option("selectedItems",r))},unselectItem:function(t){var r=this._editStrategy.getNormalizedIndex(t),i,u;r!==-1&&(i=n.inArray(r,this._selectedItemIndices),i!==-1)&&(u=this._editStrategy.fetchSelectedItems([i]),u[0].selected=!1,this.option("selectedItems",[]))}});u.dxMenuBase=it}(jQuery,DevExpress),function(n,t){var r=t.ui;r.CollectionWidget.MenuBaseEditStrategy=r.CollectionWidget.PlainEditStrategy.inherit({_getPlainItems:function(){return n.map(this._collectionWidget.option("items"),function t(i){return i.items?[i].concat(n.map(i.items,t)):i})},_getStringifiedArray:function(t){var i=this;return n.map(t,function(n){return i._stringifyItem(n)})},_stringifyItem:function(n){var t=this;return JSON.stringify(n,function(n,i){return n==="template"?t._getTemplateString(i):i})},_getTemplateString:function(t){var i;return i=typeof t=="object"?n(t).text():t.toString()},selectedItemIndices:function(){var t=[],i=this._getStringifiedArray(this._getPlainItems()),r=this._collectionWidget.option("selectedItems");return n.each(r,function(r,u){var f=n.inArray(JSON.stringify(u),i);f!==-1&&t.push(f)}),t},fetchSelectedItems:function(t){t=t||this._collectionWidget._selectedItemIndices;var r=this._getPlainItems(),i=[];return n.each(t,function(n,t){i.push(r[t])}),i}})}(jQuery,DevExpress),function(n,t,i){var o=t.ui,d=t.utils,s=o.events,h=t.fx,c="dx-menu",e=c+"-item",r=e+"-expanded",g="dx-menu-phone-overlay",f=c+"-items-container",nt=e+"-wrapper",u="dx-submenu",l="dx-context-menu",ft=l+"-content-delimiter",tt="dx-has-context-menu",it="dx-state-disabled",rt="dxSubmenuLevel",a="up",v="down",y="left",p="right",w="first",b="last",k=["onShowing","onShown","onHiding","onHidden","onPositioning","onLeftFirstItem","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu"],ut=[a,v,w,b];t.registerComponent("dxContextMenu",o,o.dxMenuBase.inherit({_setDeprecatedOptions:function(){this.callBase(),n.extend(this._deprecatedOptions,{direction:{since:"14.1",alias:"submenuDirection"},allowSelectItem:{since:"14.1",alias:"allowSelection"},showingAction:{since:"14.1",alias:"onShowing"},shownAction:{since:"14.1",alias:"onShown"},hiddenAction:{since:"14.1",alias:"onHidden"},hidingAction:{since:"14.1",alias:"onHiding"},positioningAction:{since:"14.1",alias:"onPositioning"}})},_setDefaultOptions:function(){this.callBase(),this.option({invokeOnlyFromCode:!1,position:{at:"top left",my:"top left"},onShowing:null,onShown:null,onHiding:null,onHidden:null,onPositioning:null,submenuDirection:"auto",visible:!1,target:window,onLeftFirstItem:null,onLeftLastItem:null,onCloseRootSubmenu:null,onExpandLastSubmenu:null})},_initActions:function(){this._actions={},n.each(k,n.proxy(function(t,i){this._actions[i]=this._createActionByOption(i)||n.noop},this))},_setOptionsByReference:function(){this.callBase(),n.extend(this._optionsByReference,{animation:!0,position:!0,selectedItem:!0})},_itemContainer:function(){return this._overlay.content()},_supportedKeys:function(){return n.extend(this.callBase(),{esc:this.hide})},_moveFocus:function(n){var t=this._getItemsByLocation(n),r=this._getActiveItem(!0),i,u=this.option("focusedElement");switch(n){case a:if(i=u?this._prevItem(t):t.last(),r.is(t.first()))this._actions.onLeftFirstItem(r);break;case v:if(i=u?this._nextItem(t):t.first(),r.is(t.last()))this._actions.onLeftLastItem(r);break;case p:i=this.option("rtlEnabled")?this._hideSubmenuHandler(t):this._expandSubmenuHandler(t);break;case y:i=this.option("rtlEnabled")?this._expandSubmenuHandler(t):this._hideSubmenuHandler(t);break;case w:i=t.first();break;case b:i=t.last();break;default:return this.callBase(n)}i.length!==0&&this.option("focusedElement",i)},_getItemsByLocation:function(t){var i,r=this._getActiveItem(!0),u=this.option("rtlEnabled")?y:p;return n.inArray(t,ut)>=0?i=r.closest("."+f).children().children():(i=this._itemElements(),t!==u&&(i=i.filter(":visible"))),i},_hideSubmenuHandler:function(){var t=this._getActiveItem(!0),i=t.parents("."+r).first();if(i.length)return this._hideSubmenusOnSameLevel(i),i;this._actions.onCloseRootSubmenu(t);return t},_expandSubmenuHandler:function(n){var t=this._getActiveItem(!0),i=t.children("."+u);if(i.length&&!t.hasClass(it))return i.css("visibility")==="hidden"&&this._showSubmenu(t),this._nextItem(n);this._actions.onExpandLastSubmenu(t);return t},_render:function(){this.element().addClass(tt),this.callBase()},_renderContentImpl:function(){var t=n(this.option("target"));this._renderContextMenuOverlay(),this._detachShowContextMenuEvents(t),this._attachShowContextMenuEvents(t),this.callBase()},_renderContextMenuOverlay:function(){var r=this._getOverlayOptions(),i=n("<div>"),t;i.appendTo(this._$element).dxOverlay(r),this._overlay=i.dxOverlay("instance"),t=this._overlay.content(),t.addClass(l),this._addCustomCssClass(t),this._addPlatformDependentClass(t),this.option("visible")&&this._show()},_addPlatformDependentClass:function(n){t.devices.current().phone&&n.addClass(g)},_detachShowContextMenuEvents:function(n){var t=s.addNamespace("dxcontextmenu",this.NAME);n.off(t),this._overlay&&this._overlay.content().off(t)},_attachShowContextMenuEvents:function(t){var i=this,r=s.addNamespace("dxcontextmenu",this.NAME),u=this._createAction(n.proxy(function(n){i.option("invokeOnlyFromCode")||i._show(n.jQueryEvent)},this));this._overlay&&this._overlay.content().on(r,n.noop);t.on(r,n.proxy(function(n){u({jQueryEvent:n})},this))},_hoverEndHandler:function(n){n.stopPropagation()},_renderDimensions:n.noop,_renderContainer:function(t,i){var e=n("<div>"),r=n("<ul>"),o=t===1?this._itemContainer():i;return e.appendTo(o).addClass(u).data(rt,t).css("visibility",t===1?"visible":"hidden"),r.appendTo(e).addClass(f),t===1&&(this.option("width")&&r.css("min-width",this.option("width")),this.option("height")&&r.css("min-height",this.option("height"))),r},_renderSubmenuItems:function(n,t,i){this._hasSubmenu(n)&&this._renderItems(n.items,++i,t)},_getOverlayOptions:function(){var t=this.option("position"),i=this.option("animation");return{focusStateEnabled:this.option("focusStateEnabled"),animation:i,closeOnOutsideClick:n.proxy(this._closeOnOutsideClickHandler,this),closeOnTargetScroll:!0,deferRendering:!1,disabled:this.option("disabled"),position:{at:t.at,my:t.my,of:this.option("target")},shading:!1,showTitle:!1,height:"auto",width:"auto",rtlEnabled:this.option("rtlEnabled"),onShowing:n.proxy(this._overlayShowingActionHandler,this),onShown:n.proxy(this._overlayShownActionHandler,this),onHiding:n.proxy(this._overlayHidingActionHandler,this),onHidden:n.proxy(this._overlayHiddenActionHandler,this),onPositioned:n.proxy(this._overlayPositionedActionHandler,this),onPositioning:n.proxy(this._overlayPositioningActionHandler,this)}},_overlayShowingActionHandler:function(n){this._actions.onShowing(n);this._clearFocusedItem()},_overlayShownActionHandler:function(n){this._actions.onShown(n);this._clearFocusedItem()},_clearFocusedItem:function(){this._removeFocusedItem(),this.option("focusedElement",null)},_overlayHidingActionHandler:function(n){this._actions.onHiding(n);this._hideAllShownSubmenus()},_overlayHiddenActionHandler:function(n){this._actions.onHidden(n);this._setOptionSilent("visible",!1)},_overlayPositionedActionHandler:n.noop,_overlayPositioningActionHandler:function(n){var u=this.element(),i=n.position,r=i;i.h.oversize===0&&i.v.oversize===0||this.option("_notChangePosition")||(r.h.location=Math.round(i.h.location-i.h.oversize),r.v.location=Math.round(i.v.location-i.v.oversize),t.position(u,r))},_closeOnOutsideClickHandler:function(n){var t,r,u,i,f,o;return n.target===document?!0:(r=this._getActiveItemsContainer(n.target),u=this._getItemsContainers(),t=this._searchActiveItem(n.target),i=this.element().parents("."+e),f=t[0]===i[0]&&t.length&&i.length,o=this._isIncludeOverlay(r,u)&&t.length,o||f)?(this._getShowSubmenuMode()==="onClick"&&this._hideAllShownChildSubmenus(t),!1):!0},_getActiveItemsContainer:function(t){return n(t).closest("."+f)},_getItemsContainers:function(){return this._overlay._$content.find("."+f)},_searchActiveItem:function(t){return n(t).closest("."+e).eq(0)},_isIncludeOverlay:function(t,i){var r=!1;return n.each(i,function(n,i){t.is(i)&&!r&&(r=!0)}),r},_hideAllShownChildSubmenus:function(t){var r=this,f=t.find("."+u),e=n.extend([],this._shownSubmenus),i;f.length>0&&n.each(e,function(n,u){i=r._searchActiveItem(u.context).parent(),i.parent().is(t.parent().parent())&&!i.is(t.parent())&&r._hideSubmenu(u)})},_showSubmenu:function(n){var i=n.children("."+u).length,t;this._hideSubmenusOnSameLevel(n),i&&(this.callBase(n),n.closest("."+f).find("."+r).removeClass(r),t=this._isSubmenuVisible(n.children("."+u)),t||(n.addClass(r),this._drawSubmenu(n)))},_hideSubmenusOnSameLevel:function(n){var t=n.closest("."+f).find("."+r);t.length&&(t.removeClass(r),this._hideSubmenu(t.find("."+u)))},_hideSubmenuGroup:function(n){this._isSubmenuVisible(n)&&this._hideSubmenuCore(n)},_isSubmenuVisible:function(n){return n.css("visibility")==="visible"},_drawSubmenu:function(i){var f=this.option("animation")?this.option("animation").show:{},e=this._getSubmenuPosition(i),r=i.children("."+u);this._overlay&&this._overlay.option("visible")&&(d.isDefined(this._shownSubmenus)||(this._shownSubmenus=[]),n.inArray(r,this._shownSubmenus)&&this._shownSubmenus.push(r),t.position(r,e),f&&this._animate(r,f),r.css("visibility","visible"),this._stopAnimate(r))},_animate:function(n,t){h.animate(n,t)},_getSubmenuPosition:function(n){var i=this.option("submenuDirection").toLowerCase(),r=this.option("rtlEnabled"),u=n.parent("."+nt),t={collision:"flip",of:u,offset:{h:0,v:-1}};switch(i){case"left":t.at="left top",t.my="right top";break;case"right":t.at="right top",t.my="left top";break;default:r?(t.at="left top",t.my="right top"):(t.at="right top",t.my="left top")}return t},_updateSubmenuVisibilityOnClick:function(t){var i,r,f;if(t.args.length&&t.args[0]){if(t.args[0].jQueryEvent.stopPropagation(),i=t.args[0].itemElement,r=i.children("."+u),i.context===r.context&&r.css("visibility")==="visible")return;if(!i.data(this._itemDataKey())||i.data(this._itemDataKey()).disabled)return;this._updateSelectedItemOnClick(t),r.length===0?(f=n(i.parents("."+u)[0]),this._hideSubmenu(f),!t.canceled&&this._overlay&&this._overlay.option("visible")&&this.option("visible",!1)):(this._shownSubmenus&&this._shownSubmenus.length>0&&(this._shownSubmenus[0].is(r)||this._shownSubmenus[0].has(r).length===1?this._hideSubmenu(r):this._hideAllShownSubmenus()),this._showSubmenu(i))}},_hideSubmenu:function(t){var i=this,u=n.extend([],i._shownSubmenus);n.each(u,function(n,u){(t.is(u)||t.has(u).length)&&(u.parent().removeClass(r),i._hideSubmenuCore(u))})},_hideSubmenuCore:function(t){var i=n.inArray(t,this._shownSubmenus),r=this.option("animation")?this.option("animation").hide:null;i>=0&&this._shownSubmenus.splice(i,1),this._stopAnimate(t),r&&this._animate(t,r),t.css("visibility","hidden")},_stopAnimate:function(n){h.stop(n,!0)},_hideAllShownSubmenus:function(){var t=this,i=n.extend([],t._shownSubmenus),u=this._overlay.content().find("."+r);u.removeClass(r),n.each(i,function(n,i){t._hideSubmenuCore(i)})},_optionChanged:function(t){if(!this._cancelOptionChange){if(n.inArray(t.name,k)>-1){this._initActions();return}switch(t.name){case"visible":this._toggleVisibility(t.value);break;case"invokeOnlyFromCode":break;case"items":this._overlay.option("visible")&&this._overlay.hide(),this.callBase(t);break;case"position":case"submenuDirection":this._invalidate();break;case"target":t.previousValue&&this._detachShowContextMenuEvents(n(t.previousValue)),this._invalidate();break;case"focusedElement":this.callBase(t);break;default:this._overlay&&this._overlay.option("visible")&&this._overlay.hide(),this.callBase(t)}}},_toggleVisibility:function(n){n?this._show():this._hide()},_show:function(t){var r=!(this._overlay&&this._positionContextMenu(t)),i;return r&&this._overlay&&(this.option("focusedElement",this._itemElements().first()),i=this._overlay.show(),this._setOptionSilent("visible",!0)),i||n.Deferred().reject().promise()},_positionContextMenu:function(n){var t=this.option("position"),r=this._createActionByOption("onPositioning",i),i;return n&&n.preventDefault&&(t={at:"top left",my:"top left",of:n}),t.of||(t.of=this.option("target")),i={position:t,jQueryEvent:n},r(i),!i.canceled&&this._overlay&&t&&this._overlay.option("position",t),i.canceled},_hide:function(){var t;return this._overlay&&(t=this._overlay.hide(),this._setOptionSilent("visible",!1)),t||n.Deferred().reject().promise()},_clean:function(){this._overlay&&(this._overlay.element().remove(),this._overlay=null),this._detachShowContextMenuEvents(n(this.option("target")))},toggle:function(n){var r,t=this.option("visible");return n=n===i?!t:n,n?this._show():this._hide()},show:function(){return this.toggle(!0)},hide:function(){return this.toggle(!1)}}))}(jQuery,DevExpress),function(n,t,i){var f=t.ui,y=t.utils,c=f.events,ht=t.fx,e="dx-menu",k=e+"-vertical",d=e+"-horizontal",p=e+"-item",w=e+"-items-container",l=p+"-expanded",a="dx-context-menu",v=a+"-container-border",s=p+"-selected",g="dx-state-disabled",b="dx-context-menu-content-delimiter",nt="dx-submenu",tt="."+s,h=50,it=50,rt="up",ut="down",ft="left",et="right",o="showSubmenu",u="nextItem",r="prevItem",ot=["onSubmenuShowing","onSubmenuShown","onSubmenuHiding","onSubmenuHidden"],st=f.dxContextMenu.inherit({_setDefaultOptions:function(){this.callBase(),this.option({orientation:"horizontal"})},_renderContentImpl:function(){this.callBase(),this._renderDelimiter()},_renderDelimiter:function(){this.$contentDelimiter=n("<div>").appendTo(this._itemContainer()).addClass(b)},_overlayPositionedActionHandler:function(n){this._showDelimiter(n)},_showDelimiter:function(n){var f=this._itemContainer().children("."+nt).eq(0),e=this.option("position").of,o=this.option("position").at,s=this.option("position").my,i={of:f},r,u;this.$contentDelimiter&&(r=n.position,u=e.offset(),this.$contentDelimiter.css("display","block"),this.option("orientation")==="horizontal"?(this.$contentDelimiter.width(e.width()<f.width()?e.width()-2:f.width()-2),this.$contentDelimiter.height(2),r.v.location>u.top?Math.round(r.h.location)===Math.round(u.left)?(i.offset="1 -1",i.at="left top",i.my="left top"):(i.offset="-1 -1",i.at="right top",i.my="right top"):(this.$contentDelimiter.height(4),Math.round(r.h.location)===Math.round(u.left)?(i.offset="1 2",i.at="left bottom",i.my="left bottom"):(i.offset="-1 2",i.at="right bottom",i.my="right bottom"))):this.option("orientation")==="vertical"&&(this.$contentDelimiter.width(2),this.$contentDelimiter.height(e.height()<f.height()?e.height()-2:f.height()-2),r.h.location>u.left?Math.round(r.v.location)===Math.round(u.top)?(i.offset="-1 1",i.at="left top",i.my="left top"):(i.offset="-1 -1",i.at="left bottom",i.my="left bottom"):Math.round(r.v.location)===Math.round(u.top)?(i.offset="1 1",i.at="right top",i.my="right top"):(i.offset="1 -1",i.at="right bottom",i.my="right bottom")),t.position(this.$contentDelimiter,i))}});t.registerComponent("dxMenu",f,f.dxMenuBase.inherit({_setDeprecatedOptions:function(){this.callBase(),n.extend(this._deprecatedOptions,{firstSubMenuDirection:{since:"14.1",alias:"submenuDirection"},showPopupMode:{since:"14.1",alias:"showFirstSubmenuMode"},allowSelectItem:{since:"14.1",alias:"allowSelection"},allowSelection:{since:"14.2",message:"Use the 'selectionMode' option instead"},submenuHiddenAction:{since:"14.2",alias:"onSubmenuHidden"},submenuHidingAction:{since:"14.2",alias:"onSubmenuHiding"},submenuShowingAction:{since:"14.2",alias:"onSubmenuShowing"},submenuShownAction:{since:"14.2",alias:"onSubmenuShown"}})},_setDefaultOptions:function(){this.callBase(),this.option({orientation:"horizontal",submenuDirection:"auto",showFirstSubmenuMode:"onClick",onSubmenuShowing:null,onSubmenuShown:null,onSubmenuHiding:null,onSubmenuHidden:null})},_setOptionsByReference:function(){this.callBase(),n.extend(this._optionsByReference,{animation:!0,selectedItem:!0})},_focusTarget:function(){return this.element()},_eventBindingTarget:function(){return this.element()},_getOrientation:function(){return this.option("orientation")==="vertical"?"vertical":"horizontal"},_isMenuHorizontal:function(){return this._getOrientation()==="horizontal"},_moveFocus:function(n){var h=this._itemElements().filter(":visible"),t=this._isMenuHorizontal(),i,c=this._getActiveItem(!0),f,e,s;switch(n){case rt:f=t?o:this._getItemsNavigationOperation(r),i=t?c:h,e=this._getKeyboardNavigationAction(f,i),s=e();break;case ut:f=t?o:this._getItemsNavigationOperation(u),i=t?c:h,e=this._getKeyboardNavigationAction(f,i),s=e();break;case et:f=t?this._getItemsNavigationOperation(u):o,i=t?h:c,e=this._getKeyboardNavigationAction(f,i),s=e();break;case ft:f=t?this._getItemsNavigationOperation(r):o,i=t?h:c,e=this._getKeyboardNavigationAction(f,i),s=e();break;default:return this.callBase(n)}s&&s.length!==0&&this.option("focusedElement",s)},_getItemsNavigationOperation:function(n){var t=n;return this.option("rtlEnabled")&&(t=n===r?u:r),t},_getKeyboardNavigationAction:function(t,i){var f=n.noop;switch(t){case o:i.hasClass(g)||(f=n.proxy(this._showSubmenu,this,i));break;case u:f=n.proxy(this._nextItem,this,i);break;case r:f=n.proxy(this._prevItem,this,i)}return f},_init:function(){this.callBase(),this._submenus=[]},_initActions:function(){this._actions={},n.each(ot,n.proxy(function(t,i){this._actions[i]=this._createActionByOption(i)||n.noop},this))},_render:function(){this._visibleSubmenu=[],this.callBase(),this.element().addClass(e)},_renderContainer:function(){var r=this.option("orientation")==="vertical",t=n("<div>"),i=n("<ul>");return t.appendTo(this.element()).addClass(r?k:d),i.appendTo(t).addClass(w).css("min-height",this._getValueHeight(t)),i},_getValueHeight:function(t){var i=n("<div>").html("Jj").css({width:"auto",position:"fixed",top:"-3000px",left:"-3000px"}).appendTo(t),r=i.height();return i.remove(),r},_renderSubmenuItems:function(n,t){if(this._hasSubmenu(n)){var i=this._createSubmenu(n.items,t);this._submenus.push(i),this._renderBorderElement(t)}},_createSubmenu:function(t,i){var u=n("<div>").addClass(a).appendTo(i),r=this._createComponent(u,"dxSubmenu",n.extend(this._getSubmenuOptions(),{items:t,position:this.getSubmenuPosition(i)}));return this._attachSubmenuHandlers(i,r),r},_getSubmenuOptions:function(){var i=n("<div>"),t=this._isMenuHorizontal();return{itemTemplate:this.option("itemTemplate"),templateProvider:this.option("templateProvider"),target:i,orientation:this.option("orientation"),selectionMode:this.option("selectionMode"),selectionByClick:this.option("selectionByClick"),cssClass:this.option("cssClass"),hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),focusStateEnabled:this.option("focusStateEnabled"),animation:this.option("animation"),rtlEnabled:this.option("rtlEnabled"),disabled:this.option("disabled"),showSubmenuMode:this._getShowSubmenuMode(),onSelectionChanged:n.proxy(this._nestedItemOnSelectionChangedHandler,this),onItemClick:n.proxy(this._nestedItemOnItemClickHandler,this),onLeftFirstItem:t?null:n.proxy(this._moveMainMenuFocus,this,r),onLeftLastItem:t?null:n.proxy(this._moveMainMenuFocus,this,u),onCloseRootSubmenu:t?n.proxy(this._moveMainMenuFocus,this,r):null,onExpandLastSubmenu:t?n.proxy(this._moveMainMenuFocus,this,u):null,_remoteSelectionSync:!0,_notChangePosition:!0}},_getShowFirstSubmenuMode:function(){var n=t.devices.real().deviceType==="desktop";return n?this.option("showFirstSubmenuMode"):"onClick"},_moveMainMenuFocus:function(n){var i=this.element().find("."+l).first(),t;switch(n){case r:t=i.parent().prev(),t.length||(t=i.parent().siblings().last()),t=t.children();break;case u:t=i.parent().next(),t.length||(t=i.parent().siblings().first()),t=t.children()}this._visibleSubmenu.length&&this._hideSubmenu(this._visibleSubmenu),this.focus(),this.option("focusedElement",t)},_nestedItemOnSelectionChangedHandler:function(n){var t=n.addedItems,i=n.element.dxSubmenu("instance");this._clearSelectionInSubmenus(t[0],i),this._clearRootSelection(),this.option("selectedItems",t)},_clearSelectionInSubmenus:function(t,i){var r=this,u=!arguments.length;n.each(this._submenus,function(n,t){var o=t._itemContainer(),h=!o.is(i&&i._itemContainer()),f=o.find(tt),e;(h&&f.length||u)&&(f.removeClass(s),e=r._getItemData(f),e&&(e.selected=!1),t._clearSelectedItems())})},_clearRootSelection:function(){var n=this.element().find("."+w).first().children().children().filter("."+s),t;n.length&&(t=this._getItemData(n),t.selected=!1,n.removeClass(s)),this._clearSelectedItems()},_nestedItemOnItemClickHandler:function(n){var i,t=this._createActionByOption("onItemClick",{});t(n)},_updateSelectedItemOnClick:function(n){var t=this.option("selectedIndex");this.callBase(n),t!==this.option("selectedIndex")&&this._clearSelectionInSubmenus()},_attachSubmenuHandlers:function(t,i){var r=this,e=i._overlay.content(),o=e.find(".dx-submenu"),u=c.addNamespace("dxhoverstart",this.NAME+"_submenu"),f=c.addNamespace("dxhoverend",this.NAME+"_submenu");i.option({onShowing:n.proxy(this._submenuOnShowingHandler,this,t,i),onShown:n.proxy(this._submenuOnShownHandler,this,t,i),onHiding:n.proxy(this._submenuOnHidingHandler,this,t,i),onHidden:n.proxy(this._submenuOnHiddenHandler,this,t,i)}),n.each(o,function(i,e){n(e).off(u).off(f).on(u,null,n.proxy(r._submenuMouseEnterHandler,r,t)).on(f,null,n.proxy(r._submenuMouseLeaveHandler,r,t))})},_submenuOnShowingHandler:function(n,t){var r=n.children("."+v),u=this.option("animation")?this.option("animation").show:{};this._actions.onSubmenuShowing({rootItem:n,submenu:t});this._options.width!==i&&(this._options.rtlEnabled?r.css("width",this._$element.width()-n.position().right):r.css("width",this._$element.width()-n.position().left)),r.show(),n.addClass(l)},_submenuOnShownHandler:function(n,t){this._actions.onSubmenuShown({rootItem:n,submenu:t})},_submenuOnHidingHandler:function(n,t){var i=n.children("."+v),r=this.option("animation")?this.option("animation").hide:{};this._actions.onSubmenuHiding({rootItem:n,submenu:t});i.hide(),n.removeClass(l)},_submenuOnHiddenHandler:function(n,t){this._actions.onSubmenuHidden({rootItem:n,submenu:t})},_submenuMouseEnterHandler:function(n){this._hoveredContextMenuContainer=n},_submenuMouseLeaveHandler:function(n){var t=this,r=this._getShowFirstSubmenuMode(),i;r!=="onClick"&&setTimeout(function(){t._hoveredContextMenuContainer&&t._hoveredContextMenuContainer.is(t._hoveredRootItem)||(i=t._getSubmenuElementByRootElement(n),i.length&&t._hideSubmenu(i)),t._hoveredContextMenuContainer=null},h)},_getSubmenuElementByRootElement:function(n){return n&&n.children("."+a)},_getSubmenuInstanceByRootElement:function(n){var t=this._getSubmenuElementByRootElement(n);return t.length&&t.dxSubmenu("instance")},getSubmenuPosition:function(n){var i=this.option("orientation").toLowerCase()=="vertical",u=this.option("submenuDirection").toLowerCase(),r=this.option("rtlEnabled"),t={collision:"flip",of:n};switch(u){case"leftortop":t.at=i?"left top":"left top",t.my=i?"right top":"left bottom";break;case"rightorbottom":t.at=i?"right top":"left bottom",t.my=i?"left top":"left top";break;case"auto":default:i?(t.at=r?"left top":"right top",t.my=r?"right top":"left top"):(t.at=r?"right bottom":"left bottom",t.my=r?"right top":"left top")}return t},_renderBorderElement:function(t){n("<div>").appendTo(t).addClass(v).hide()},_hoverStartHandler:function(t){var s=this,r=c.addNamespace("dxpointermove",this.NAME),i=this._getItemElementByEventArgs(t),u=this._getSubmenuInstanceByRootElement(i),f=this._getShowFirstSubmenuMode(),e=f!=="onHover",o=y.isDefined(t.buttons)&&t.buttons===1||!y.isDefined(t.buttons)&&t.which===1;if(!this._isItemDisabled(i)&&(i.off(r),f!=="onClick"&&u&&!o))if(clearTimeout(this._hideSubmenuTimer),clearTimeout(this._showSubmenuTimer),e&&!u._overlay.option("visible")){i.on(r,n.proxy(this._itemMouseMoveHandler,this));this._showSubmenuTimer=h}else this._showSubmenu(i)},_isItemDisabled:function(n){return n.data(this._itemDataKey()).disabled},_hoverEndHandler:function(t){var r=this,u=this._getItemElementByEventArgs(t),i,f=this._getShowFirstSubmenuMode(),e=this._getShowFirstSubmenuMode()!=="onHover"?h:it;this._isItemDisabled(u)||n(t.relatedTarget).hasClass(b)||f!=="onClick"&&(clearTimeout(this._showSubmenuTimer),clearTimeout(this._hideSubmenuTimer),this._hideSubmenuTimer=setTimeout(function(){i=r._getSubmenuElementByRootElement(u),i.length&&r._hideSubmenu(i)},e))},_showSubmenu:function(n){var t=this._getSubmenuElementByRootElement(n);this._visibleSubmenu.length&&!this._visibleSubmenu.is(t)&&this._hideSubmenu(this._visibleSubmenu),t.length&&t.dxSubmenu("instance").show(),this._visibleSubmenu=t,this._hoveredRootItem=n},_hideSubmenu:function(n){this._hoveredRootItem&&this._hoveredRootItem.is(this._hoveredContextMenuContainer)||(n.length&&n.dxSubmenu("instance").hide(),this._visibleSubmenu.length&&this._visibleSubmenu.is(n)&&(this._visibleSubmenu=[])),this._hoveredRootItem=null},_itemMouseMoveHandler:function(t){var r=this,i=n(t.currentTarget),u=this._getSubmenuInstanceByRootElement(i);this._showSubmenuTimer&&(clearTimeout(this._hideSubmenuTimer),clearTimeout(this._showSubmenuTimer),this._showSubmenuTimer=setTimeout(function(){u._overlay.option("visible")||r._showSubmenu(i)},h))},_updateSubmenuVisibilityOnClick:function(n){var r,u,t,i=n.args.length&&n.args[0];if(i){if(i.jQueryEvent.stopPropagation(),u=i.itemData,r=i.itemElement,u.disabled)return;t=this._getSubmenuInstanceByRootElement(r),this._updateSelectedItemOnClick(n),t?t._overlay.option("visible")?this._getShowFirstSubmenuMode()==="onClick"&&this._hideSubmenu(t.element()):this._showSubmenu(r):this._visibleSubmenu.length&&this._hideSubmenu(this._visibleSubmenu)}},_optionChanged:function(n){if(!this._cancelOptionChange){this._hideShownSubmenuOnOptionChange(n.name);switch(n.name){case"selectedItems":var t=n.value[0];this._isItemInSubmenu(t)?(this._syncSelectionOptions(n.name),this._normalizeSelectedItems()):this.callBase(n);break;case"orientation":case"submenuDirection":this._invalidate();break;case"showFirstSubmenuMode":this._getShowSubmenuMode()==="auto"&&this._changeSubmenusOption("showSubmenuMode",this._getShowFirstSubmenuMode());break;case"showSubmenuMode":this._changeSubmenusOption(n.name,n.value);break;case"onSubmenuShowing":case"onSubmenuShown":case"onSubmenuHiding":case"onSubmenuHidden":this._initActions();break;default:this.callBase(n)}}},_hideShownSubmenuOnOptionChange:function(n){n!=="focusedElement"&&this._visibleSubmenu.length&&this._hideSubmenu(this._visibleSubmenu)},_changeSubmenusOption:function(t,i){n.each(this._submenus,function(n,r){r.option(t,i)})},_isItemInSubmenu:function(t){return n.inArray(JSON.stringify(t),this._getStringifiedArray(this.option("items")))<0},selectItem:function(t){var i=this._getItemData(t);this._isItemInSubmenu(i)?n.each(this._submenus,function(n,r){r._isOwnItem(i)&&r.selectItem(t)}):this.callBase(t)}})),t.registerComponent("dxSubmenu",f.dxMenu,st)}(jQuery,DevExpress),function(n,t,i){var c=t.ui,s=c.events,u=t.data.utils,h=t.utils,w="dx-treeview",f="dx-treeview-node-container",o="dx-treeview-node-container-opened",e="dx-treeview-node",r="dx-treeview-item",b="dx-treeview-item-with-checkbox",k="dx-treeview-item-data",l="dx-treeview-node-is-leaf",a="dx-treeview-toggle-item-visibility",v="dx-treeview-toggle-item-visibility-opened",d="dx-treeview-select-all-item",p="dx-state-focused",y="data-item-id",g="dxdblclick",nt=n.noop;t.registerComponent("dxTreeView",c,c.CollectionWidget.inherit({_supportedKeys:function(){var i=function(n){var t=this.option("focusedElement");t&&(n.target=t,n.currentTarget=t,this._itemClickHandler(n,t.find(">."+r)))},u=function(n){n.preventDefault(),this._changeCheckBoxState(this.option("focusedElement"))},f=function(n){var t;if(this.option("expandAllEnabled")&&(n.preventDefault(),t=this.option("focusedElement"),t)){var u=this._getItemData(t.find("."+r)),f=[u],i=[];this._expandAllItems(f,i),this._suppressDeprecatedWarnings(),this.option("expandedItems",i),this._resumeDeprecatedWarnings()}},e=function(t){var i,f,e,u,o;this.option("expandAllEnabled")&&(t.preventDefault(),i=this.option("focusedElement"),i)&&(f=this._getItemData(i.find("."+r)),e=[f],this._suppressDeprecatedWarnings(),u=[],this._collapseAllItems(e,u),o=n.grep(this.option("expandedItems"),function(t){return n.inArray(t,u)==-1}),this.option("expandedItems",o),this._resumeDeprecatedWarnings())};return n.extend(this.callBase(),{enter:this.option("showCheckBoxes")?u:i,space:this.option("showCheckBoxes")?u:i,asterisk:f,minus:e})},_changeCheckBoxState:function(n){var t=n.find("> .dx-checkbox"),i=t.dxCheckBox("instance"),u=i.option("value");this._updateItemSelection(!u,n.find("."+r).get(0),!0,n)},_expandAllItems:function(n,t){var r,i,u;if(n)for(r=0;r<n.length;r++)i=n[r],t.push(i),u=this._getNodeByKey(this._keyGetter(i)),this._fireExpandedStateUpdatedEvt(!0,i),this._commonExpandedSetter(i,u,!0),i.items&&this._expandAllItems(i.items,t)},_getNodeElementById:function(n){return this.element().find("["+y+"='"+n+"']")},_collapseAllItems:function(n,t){var r,i,u;if(n)for(r=0;r<n.length;r++)i=n[r],u=this._getNodeByKey(this._keyGetter(i)),this._fireExpandedStateUpdatedEvt(!1,i),this._commonExpandedSetter(i,u,!1),t.push(i),i.items&&this._collapseAllItems(i.items,t)},_activeStateUnit:"."+r,_setDefaultOptions:function(){this.callBase(),this.option({dataStructure:"tree",expandedItems:[],expandAllEnabled:!1,keyExpr:"id",displayExpr:null,selectedExpr:"selected",expandedExpr:"expanded",itemsExpr:"items",parentIdExpr:"parentId",showCheckBoxes:!1,selectNodesRecursive:!0,selectAllEnabled:!1,selectAllText:"("+Globalize.localize("dxList-selectAll")+")",onItemSelected:null,onItemExpanded:null,onItemCollapsed:null,scrollDirection:"vertical",focusStateEnabled:!1,selectionMode:"multi"})},_setDeprecatedOptions:function(){this.callBase(),n.extend(this._deprecatedOptions,{selectedItems:{since:"14.2",message:"Use item.selected instead"},expandedItems:{since:"14.2",message:"Use item.expanded instead"}})},_initSelectedItems:n.noop,_syncSelectionOptions:n.noop,_fireSelectionChanged:function(){var t=this._selectionChangePromise;n.when(t).done(n.proxy(function(){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})()},this))},_initExpressions:function(){this._compileKeyAccessors(),this._compileDisplayAccessors(),this._compileSelectedAccessors(),this._compileExpandedAccessors(),this._compileItemsAccessors(),this._compileParentIdAccessors()},_initDynamicTemplates:function(){this.option("displayExpr")?this._dynamicTemplates.item=new c.DefaultTemplate(n.proxy(function(t){var i=n("<div>");return t.icon&&n("<span>").addClass("dx-icon-"+t.icon).addClass("dx-icon").appendTo(i),t.iconSrc&&n("<img>").attr("src",t.iconSrc).addClass("dx-icon").appendTo(i),n("<span>").text(this._displayGetter(t)).appendTo(i),i},this)):delete this._dynamicTemplates.item},_compileKeyAccessors:function(){this._keyGetter=u.compileGetter(this.option("keyExpr")),this._keySetter=u.compileSetter(this.option("keyExpr"))},_compileDisplayAccessors:function(){this.option("displayExpr")||this.option("dataStructure")!=="plain"||this.option("displayExpr","text"),this._displayGetter=u.compileGetter(this.option("displayExpr")),this._displaySetter=u.compileSetter(this.option("displayExpr"))},_compileSelectedAccessors:function(){this._selectedGetter=u.compileGetter(this.option("selectedExpr")),this._selectedSetter=u.compileSetter(this.option("selectedExpr"))},_compileExpandedAccessors:function(){this._expandedGetter=u.compileGetter(this.option("expandedExpr")),this._expandedSetter=u.compileSetter(this.option("expandedExpr"))},_compileItemsAccessors:function(){this._itemsGetter=u.compileGetter(this.option("itemsExpr")),this._itemsSetter=u.compileSetter(this.option("itemsExpr"))},_compileParentIdAccessors:function(){this._parentIdGetter=u.compileGetter(this.option("parentIdExpr")),this._parentIdSetter=u.compileSetter(this.option("parentIdExpr"))},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return t.devices.real().generic&&!t.devices.isSimulator()},options:{hoverStateEnabled:!0,focusStateEnabled:!0}}])},_optionChanged:function(n){var o=n.name,t=n.value,i,r,u,f,e;switch(o){case"selectAllEnabled":t?this._$selectAllItem&&this._$selectAllItem.length||this._renderSelectAllItem():this._$selectAllItem&&(this._$selectAllItem.remove(),delete this._$selectAllItem);break;case"selectAllText":this._$selectAllItem&&this._$selectAllItem.dxCheckBox("instance").option("text",t);break;case"scrollDirection":this._scrollableContainer.option("direction",t);break;case"selectedItems":if(this._$selectAllItem){if(i=this._$selectAllItem.dxCheckBox("instance"),r=i.option("value"),r&&this._itemsCount===t.length)return;this._suppressUpdateSelectAllItemValue=!0,i.option("value",this._calculateSelectAllItemValue()),this._suppressUpdateSelectAllItemValue=!1}break;case"items":delete this._$selectAllItem,this.callBase(n);break;case"keyExpr":case"displayExpr":this._dynamicTemplates.item||this._initDynamicTemplates();case"itemsExpr":case"selectedExpr":case"expandedExpr":case"parentIdExpr":this._initExpressions();case"dataStructure":case"showCheckBoxes":this.repaint();break;case"expandedItems":u=this.element().hasClass(p),this.repaint(),u&&(this.element().focus(),f=this.option("focusedElement").attr(y),e=this._getNodeElementById(f),this.option("focusedElement",e));break;case"selectNodesRecursive":case"onItemSelected":case"onItemExpanded":case"onItemCollapsed":case"expandAllEnabled":break;default:this.callBase(n)}},_nodes:[],_init:function(){this._initExpressions(),this.callBase(),this._initDynamicTemplates()},_render:function(){var t=this;this.element().addClass(w),this._itemsCount=0;this.element().off("dxpointerdown").on("dxpointerdown",function(i){var r=n(i.target).closest(t._activeStateUnit);r.length||i.preventDefault()});this._makeNodes(),this._setKeyForItems(this._nodes,1),this.callBase()},_makeNodes:function(){this._nodes=this._getSmartItemsCopy(this.option("items")),this.option("dataStructure")==="plain"&&(this._nodes=this._createHierarchicalStructure(this._nodes))},_getSmartItemsCopy:function(t){var i=this,r=[];return n.each(t,function(t,u){var f=n.extend(!0,{},u),e,o;i._itemHasChildren(f)&&(e=i._itemsGetter(f),o=i._getSmartItemsCopy(e),i._itemsSetter(f,o)),r.push(f)}),r},_setKeyForItems:function(t,i){var r=this;return n.each(t,function(n,t){if(r._isPrimitiveValue(t)&&(t=r._makeObjectFromPrimitive(t)),h.isDefined(r._keyGetter(t)))return!1;r._keySetter(t,i),i++,r._itemHasChildren(t)&&(i=r._setKeyForItems(r._itemsGetter(t),i))}),i},_makePlainItems:function(){return this._makePlainList(this.option("items"),null,!0)},_makePlainNodes:function(){return this._makePlainList(this._nodes,null,!0)},_updateSelectionItemsOption:function(t){var r=this,i=[];return n.each(t,function(n,t){r._selectedGetter(t)&&i.push(t)}),i},_renderContentImpl:function(){var n=this._nodes,i,r,t;n.length&&(this._ind=1,this._plainItems=this._makePlainItems(),this._ind=1,this._plainNodes=this._makePlainNodes(),this._applyExpandedItemsFromOption(),this._applySelectedItemsFromOption(n),i=this._makePlainList(n,null),this.option("selectNodesRecursive")&&(n=this._calculateChildrenSelectedState(n),this._calculateParentSelectedState(i)),this._calculateParentExpandedState(i),this._createParentFieldForEachItem(n),this._suppressDeprecatedWarnings(),r=this._updateSelectionItemsOption(this._plainItems),r.length&&this.option("selectedItems",r),this._resumeDeprecatedWarnings(),this._renderScrollableContainer(),t=this._renderNodeContainer(),this._scrollableContainer.content().append(t),this._renderItems(t,n,!0),this.option("selectAllEnabled")&&this._renderSelectAllItem(t)),this._renderEmptyMessage()},_fireContentReadyAction:function(){this.callBase(),this._scrollableContainer&&this._scrollableContainer.content().height()>this.element().height()&&(this._scrollableContainer.update(),nt())},_createHierarchicalStructure:function(n){for(var u=[],f={},e=n.length,i,r,o,t=0;t<e;t++)f[this._keyGetter(n[t])]=n[t],this._itemsSetter(n[t],[]);for(t=0;t<e;t++)i=this._parentIdGetter(n[t]),r=this._createNode(n[t]),i?(o=this._itemsGetter(f[i]),o.push(r)):u.push(r);return u},_createNode:function(n){var t={};return this._keySetter(t,this._keyGetter(n)),this._displaySetter(t,this._displayGetter(n)),this._itemsSetter(t,this._itemsGetter(n)),this._expandedSetter(t,this._expandedGetter(n)),n.hasOwnProperty(this.option("selectedExpr"))&&typeof this._selectedGetter(n)!="undefined"?this._selectedSetter(t,this._selectedGetter(n)):this._selectedSetter(t,!1),t},_createParentFieldForEachItem:function(t,i){var r=this,i=i?n.extend(!0,{},i):null;n.each(t,function(n,t){r._itemsCount++,h.isDefined(i)&&r._itemsGetter(i)&&r._itemsSetter(i,null),r._isPrimitiveValue(t)&&(t=r._makeObjectFromPrimitive(t)),t.parent=i,r._plainNodes[r._keyGetter(t)].parent=i,r._itemHasChildren(t)&&r._createParentFieldForEachItem(r._itemsGetter(t),t)})},_makeObjectFromPrimitive:function(n){var t=n;return n={},this._keySetter(n,t),n},_isPrimitiveValue:function(t){return n.inArray(n.type(t),["object","array","function"])===-1},_itemHasChildren:function(n){var t=this._itemsGetter(n);return t&&t.length},_renderScrollableContainer:function(){var t=n("<div />").dxScrollable({direction:this.option("scrollDirection"),useKeyboard:!1}).appendTo(this.element());this._scrollableContainer=t.dxScrollable("instance")},_renderNodeContainer:function(t){var i=n("<ul />").addClass(f),u;return t&&(u=this._getItemData(t.find("> ."+r)),this._expandedGetter(u)&&i.addClass(o),i.appendTo(t)),i},_renderItems:function(t,i){var r=this,u=r.option("showCheckBoxes");n.each(i,function(i,f){var h,c;r._isPrimitiveValue(f)&&(f=r._makeObjectFromPrimitive(f));var a=r._keyGetter(f),s=n("<li />").addClass(e).appendTo(t).attr(y,a),v=r._getSourceItemByKey(a),p=r._renderItem.call(r,i,v,s);r._attachDblclickToItem(p),u&&r._renderCheckBox(s,f),h=r._itemsGetter(f),n.isArray(h)&&h.length?(r._renderToggleItemVisibilityIcon(s,f),c=r._renderNodeContainer(s),r._expandedGetter(f)&&(r._renderItems(c,h,!1),c.addClass(o))):s.addClass(l)}),this._renderFocusTarget()},_attachDblclickToItem:function(n){var t=this,i=s.addNamespace(g,t.NAME);n.off(i).on(i,function(){var i=t._getItemData(n);t._toggleExpandedState(i)})},_toggleExpandedState:function(n,t,i){h.isDefined(t)||(t=!this._expandedGetter(n)),this._updateExpandedState(n,t),this._updateExpandedItemsUI(n),this._fireExpandedStateUpdatedEvt(t,n,i)},_getSourceItemByKey:function(n){return this._plainItems[n]},_getItemKey:function(n){var t=this._keyGetter(n);return h.isDefined(t)||(t=this._getKeyForSourceItem(n)),t},_getKeyForSourceItem:function(t){var i=null;return n.each(this._plainItems,function(n,r){if(t===r)return i=n,!1}),i},_getNodeByKey:function(n){return this._plainNodes[n]},_renderSelectAllItem:function(t){t=t||this.element().find("."+f).first(),this._$selectAllItem=n("<div />").dxCheckBox({value:this._calculateSelectAllItemValue(),text:this.option("selectAllText"),onValueChanged:n.proxy(this._selectAllItemValueChanged,this)}).addClass(d),t.before(this._$selectAllItem)},_calculateSelectAllItemValue:function(){this._suppressDeprecatedWarnings();var n=!1,t=this.option("selectedItems").length;return t&&(n=this._itemsCount===t?!0:i),this._resumeDeprecatedWarnings(),n},_selectAllItemValueChanged:function(n){if(!this._suppressUpdateSelectAllItemValue){if(this._suppressDeprecatedWarnings(),this._updateAllItems(this._nodes,n.value),n.value){var t=this._updateSelectionItemsOption(this._plainItems);this.option("selectedItems",t)}else this.option("selectedItems",[]);this._resumeDeprecatedWarnings(),this._fireSelectionChanged()}},_updateAllItems:function(t,i){var r=this;n.each(t,function(n,t){var u=r._getNodeElementById(r._keyGetter(t)),f=r._getSourceItemByKey(r._keyGetter(t)),e=r._selectedGetter(t);if(e===i)return!0;u.length&&u.find("> .dx-checkbox").dxCheckBox("instance").option("value",i),r._selectedSetter(t,i),r._selectedSetter(f,i),u=null,r._itemHasChildren(t)&&r._updateAllItems(r._itemsGetter(t),i)})},_applySelectedItemsFromOption:function(t){var i=this;this._suppressDeprecatedWarnings(),n.each(this.option("selectedItems"),function(n,r){var u=i._getItemFromArray(r,t),f,e;u&&(f=i._getNodeByKey(i._keyGetter(u)),i._selectedSetter(u,!0),i._selectedSetter(f,!0)),e=i._getNodeByKey(i._getItemKey(r)),i._selectedSetter(r,!0),i._selectedSetter(e,!0)}),this._resumeDeprecatedWarnings()},_applyExpandedItemsFromOption:function(){var t=this;this._suppressDeprecatedWarnings(),n.each(this.option("expandedItems"),function(n,i){var r=t._getNodeByKey(t._getItemKey(i));t._commonExpandedSetter(i,r,!0)}),this._resumeDeprecatedWarnings()},_commonExpandedSetter:function(n,t,i){this._expandedSetter(n,i),this._expandedSetter(t,i)},_calculateChildrenSelectedState:function(t){var i=this;return n.each(t,function(t,r){i._selectedGetter(r)&&i._itemHasChildren(r)&&n.each(i._itemsGetter(r),function(n,t){var r=i._getSourceItemByKey(i._keyGetter(t));i._selectedSetter(t,!0),i._selectedSetter(r,!0)}),i._itemHasChildren(r)&&i._itemsSetter(r,i._calculateChildrenSelectedState(i._itemsGetter(r)))}),t},_makePlainList:function(t,i,r){var u=this,f=r?{}:[];return i=i||f,n.each(t,function(n,t){if(r){u._isPrimitiveValue(t)&&(t=u._makeObjectFromPrimitive(t));var f=u._keyGetter(t);h.isDefined(f)||(f=u._ind),i[f]=t,u._ind++}else i.push(t);u._itemHasChildren(t)&&u._makePlainList(u._itemsGetter(t),i,r)}),i},_calculateParentSelectedState:function(t){for(var c=t.length-1,e=this,u,f,s,r=c;r>=0;r--)if(!this._selectedGetter(t[r])&&(u=this._itemsGetter(t[r]),f=0,u&&u.length&&(f=u.length),f)){var h=n.grep(u,function(n){return e._selectedGetter(n)===!0}),l=n.grep(u,function(n){return n.hasOwnProperty(e.option("selectedExpr"))&&typeof e._selectedGetter(n)=="undefined"}),o=this._getSourceItemByKey(this._keyGetter(t[r]));h.length?(s=h.length===f?!0:i,this._selectedSetter(t[r],s),this._selectedSetter(o,s)):l.length?(this._selectedSetter(t[r],i),this._selectedSetter(o,i)):(this._selectedSetter(t[r],!1),this._selectedSetter(o,!1))}return t},_calculateParentExpandedState:function(t){for(var o=t.length-1,s=this,r,u,f,e,i=o;i>=0;i--)this._expandedGetter(t[i])||(r=this._itemsGetter(t[i]),u=0,r&&r.length&&(u=r.length),u&&(f=n.grep(r,function(n){return s._expandedGetter(n)===!0}),f.length&&(e=this._getSourceItemByKey(this._keyGetter(t[i])),this._commonExpandedSetter(t[i],e,!0))))},_renderCheckBox:function(t,i){var u=this._calculateCheckBoxValue(i),r;t.addClass(b),r=n("<div />").dxCheckBox({value:u,onValueChanged:n.proxy(this._changeCheckboxValue,this),focusStateEnabled:!1}).appendTo(t),this._attachCheckboxClick(r,i)},_attachCheckboxClick:function(t,i){var r=s.addNamespace("dxclick",this.NAME),u=this._keyGetter(i),f=function(n){this._itemJQueryEventHandler(n,"onItemSelected",{node:this._getNodeByKey(u)})};t.off(r).on(r,n.proxy(f,this))},_renderToggleItemVisibilityIcon:function(t,i){var r=n("<div />").addClass(a).appendTo(t);this._expandedGetter(i)&&(r.addClass(v),t.parent().addClass(o)),this._renderToggleItemVisibilityIconClick(r,i)},_renderToggleItemVisibilityIconClick:function(n){var u=s.addNamespace("dxclick",this.NAME),f=this;n.off(u).on(u,function(t){var u=n.parent().find(">."+r),e=f._getItemData(u);f._toggleExpandedState(e,i,t)})},_updateExpandedState:function(t,i){this._suppressDeprecatedWarnings();var r=this.option("expandedItems"),f=this._getItemKey(t),e=this._getNodeByKey(f),u=this;u._commonExpandedSetter(t,e,i),i?u._getItemFromArray(t,r)||r.push(t):n.each(r,function(n,t){if(u._keyGetter(t)===f)return r.splice(n,1),!1}),this._resumeDeprecatedWarnings()},_updateExpandedItemsUI:function(n){var t=this._getNodeElementById(this._getItemKey(n)),r=t.find(">."+a),i=t.find(" > ."+f);r.toggleClass(v),this._renderNestedItems(i),i.toggleClass(o),this._scrollableContainer.update()},_fireExpandedStateUpdatedEvt:function(n,t,i){var f=n?"onItemExpanded":"onItemCollapsed",e=this._getItemKey(t),o=this._getNodeByKey(e),u=this.option(f);u&&u.call(this,{itemData:t,node:o,itemElement:this._getNodeElementById(this._keyGetter(t)).find(">."+r),jQueryEvent:i})},_renderNestedItems:function(n){if(n.is(":empty")){var t=this._getItemData(n.parent().find(">."+r)),i=this._getItemKey(t),u=this._getNodeByKey(i);this._renderItems(n,this._itemsGetter(u),!1)}},_calculateCheckBoxValue:function(n){return n.hasOwnProperty(this.option("selectedExpr"))?this._selectedGetter(n):!1},_changeCheckboxValue:function(n){var i=n.element.parent("."+e),u=this._getItemData(i.find("> ."+r)),t=n.value,f=this._getItemKey(u),o=this._getNodeByKey(f);(this._selectedSetter(u,t),this._selectedSetter(o,t),n.jQueryEvent&&!this.option("selectNodesRecursive")&&this._fireSelectionChanged(),n.jQueryEvent&&this.option("selectNodesRecursive"))&&this._updateParentsAndChildren(this._getNodeByKey(f),t,!1,i)},_updateParentsAndChildren:function(n,t,i,r){n.parent&&this._updateParentsState(n,r),this._itemHasChildren(n)&&this._updateChildrenState(this._itemsGetter(n),t,r),this._suppressDeprecatedWarnings();var u=this._updateSelectionItemsOption(this._plainItems);this.option("selectedItems",u),this._resumeDeprecatedWarnings(),i||this._fireSelectionChanged()},_itemRenderDefault:function(t,i,r){var u=n("<div />");n("<span>").text(this._displayGetter(t)).appendTo(u),u.appendTo(r)},_getItemFromArray:function(t,i){var r=null,u=this,f=u._keyGetter(t);return n.each(i,function(n,t){if(f===u._keyGetter(t))return r=t,!1}),r},_calculateSelectedItemsOption:function(n,t){var i=this._getItemKey(t),r=this._getNodeByKey(i);this._selectedSetter(t,n),this._selectedSetter(r,n)},_reduceSelectedItemsOption:function(t,i){var r=this,u=r._keyGetter(i);n.each(t,function(n,i){if(u===r._keyGetter(i)){var f=t.splice(n,1)[0];return!1}})},_updateParentsState:function(t,r){var c=this._getSourceItemByKey(this._keyGetter(t)),u=this._getNodeByKey(this._keyGetter(t.parent)),o=this,s;n.each(this._itemsGetter(u),function(n,i){o._keyGetter(t)===o._keyGetter(i)&&o._selectedSetter(i,o._selectedGetter(t))});var l=this._itemsGetter(u).length,h=this._getSelectedChildrenFromNode(u),a=this._getIntermediateChildrenFromNode(u),f=i;h===l?f=!0:h||a||(f=!1),r&&(s=n(r.parents("."+e)[0]),s.find("> .dx-checkbox").dxCheckBox("instance").option("value",f)),this._updateParentField(c,f),u.parent&&this._updateParentsState(u,s),this._calculateSelectedItemsOption(f,this._getSourceItemByKey(this._keyGetter(t.parent)))},_getSelectedChildrenFromNode:function(t){var i=this._itemsGetter(t),r=this;return i&&i.length?n.grep(i,function(n){return r._selectedGetter(n)===!0}).length:0},_getIntermediateChildrenFromNode:function(t){var r=this._itemsGetter(t),u=this;return r&&r.length?n.grep(r,function(n){return n.hasOwnProperty(u.option("selectedExpr"))&&u._selectedGetter(n)===i}).length:0},_updateChildrenState:function(t,i,r){var u=this,e;n.each(t,function(n,t){var r=u._getSourceItemByKey(u._keyGetter(t));u._updateParentField(r,i),u._calculateSelectedItemsOption(i,r),u._itemHasChildren(t)&&u._updateChildrenState(u._itemsGetter(t),i)}),r&&(e=r.find("> ."+f),e.find(".dx-checkbox").each(function(t,r){n(r).dxCheckBox("instance").option("value",i)}))},_updateParentField:function(n,t){var i=this._getNodeByKey(this._getItemKey(n));i.parent!==null&&this._selectedSetter(i.parent,t)},_itemEventHandlerImpl:function(t,i,u){var f=n(t).closest("."+e).find("> ."+r);return u=n.extend({itemElement:f,itemData:this._getItemData(f)},u),i(u)},_itemClass:function(){return r},_itemDataKey:function(){return k},_selectionEnabled:function(){return!0},_attachClickEvent:function(){var t=this,i=t._itemSelector(),r=s.addNamespace("dxclick",t.NAME),u=s.addNamespace("dxpointerdown",this.NAME);t._itemContainer().off(r,i).on(r,i,function(i){t._itemClickHandler(i,n(this))}).off(u,i).on(u,i,n.proxy(this._itemPointerDownHandler,this))},_itemClickHandler:function(n,t){var i=this._getItemData(t),r=this._getNodeByKey(this._getItemKey(i));this._itemJQueryEventHandler(n,"onItemClick",{node:r})},_updateItemSelection:function(n,t,i,r){var f=t.nodeType?this._getItemData(t):t,s=this._getItemKey(f),u=this._getNodeByKey(s),c=this._selectedGetter(u),e,h,o;c!==n&&(r||(e=this._getNodeElementById(s),e.length&&(r=e)),r&&r.find("> .dx-checkbox").dxCheckBox("instance").option("value",n),this._selectedSetter(u,n),this._selectedSetter(f,n),this._calculateSelectedItemsOption(n,u),this.option("selectNodesRecursive")?this._updateParentsAndChildren(u,n,i,r):(this._suppressDeprecatedWarnings(),h=this._updateSelectionItemsOption(this._plainItems),this.option("selectedItems",h),this._resumeDeprecatedWarnings()),o=this.option("onItemSelected"),o&&o.call(this,{itemData:f,node:u}))},_updateSelectionToFirstItem:function(t,i){for(var u=i,f;u>=0;)f=n(t[u]),this._updateItemSelection(!0,f.find("."+r).get(0),!0,f),u--},_updateSelectionToLastItem:function(t,i){for(var u=i,e=t.length,f;u<e;)f=n(t[u]),this._updateItemSelection(!0,f.find("."+r).get(0),!0,f),u++},_enlargeExpandedItemsOption:function(n,t){return this._getItemFromArray(n,t)||(t.push(n),this._expandedSetter(n,!0)),n.parent&&this._enlargeExpandedItemsOption(n.parent,t),t},_reduceExpandedItemsOption:function(t,i){var r=this,u=r._keyGetter(t),f=r._getSourceItemByKey(u);return r._commonExpandedSetter(f,t,!1),n.each(i,function(f,e){r._keyGetter(e)===u&&(i.splice(f,1),r._itemHasChildren(t)&&n.each(r._itemsGetter(t),function(n,t){var u=r._getSourceItemByKey(r._keyGetter(t));r._commonExpandedSetter(u,t,!1),r._reduceExpandedItemsOption(t,i)}))}),i},_focusInHandler:function(t){var r=t.currentTarget,u=this._focusTarget(),i;n.inArray(r,u)!==-1&&n(t.currentTarget).addClass(p),this.option("focusedElement")?this._setFocusedItem(this.option("focusedElement")):(i=this._getActiveItem(),this.option("focusedElement",i.closest("."+e)))},_itemPointerDownHandler:function(t){if(this.option("focusStateEnabled")){var i=n(t.target).closest("."+e);i.hasClass(e)&&this.option("focusedElement",i)}},_moveFocus:function(n,t){var s="up",h="down",c="first",l="last",y="enter",a=this.option("rtlEnabled")?"right":"left",v=this.option("rtlEnabled")?"left":"right",i=this._nodeElements(),u,f,e,o;switch(n){case s:u=this._prevItem(i),this.option("focusedElement",u),t.shiftKey&&this._updateItemSelection(!0,u.find("."+r).get(0),!0,u);break;case h:f=this._nextItem(i),this.option("focusedElement",f),t.shiftKey&&this._updateItemSelection(!0,f.find("."+r).get(0),!0,f);break;case c:e=i.first(),t.shiftKey&&this._updateSelectionToFirstItem(i,i.index(this._prevItem(i))),this.option("focusedElement",e);break;case l:o=i.last(),t.shiftKey&&this._updateSelectionToLastItem(i,i.index(this._nextItem(i))),this.option("focusedElement",o);break;case v:this._expandFocusedContainer();break;case a:this._collapseFocusedContainer();break;default:this.callBase.apply(this,arguments);return}},_nodeElements:function(){return this.element().find("."+e).not(":hidden")},_expandFocusedContainer:function(){var n,i,u,t;if(this.option("focusedElement")&&(n=this.option("focusedElement"),!n.hasClass(l))){if(i=n.find("."+f).eq(0),i.hasClass(o)){this.option("focusedElement",this._nextItem(this._nodeElements()));return}u=n.find("> ."+f),this._renderNestedItems(u),n.find("."+f).eq(0).toggleClass(o,!0),this._refreshActiveNode(n,!0),t=this._getItemData(n.find(">."+r)),this._updateExpandedState(t,!0),this._fireExpandedStateUpdatedEvt(!0,t)}},_collapseFocusedContainer:function(){var h;if(this.option("focusedElement")){var t,i,n=this.option("focusedElement"),s=n.find("."+f).eq(0),u=this._getItemData(n.find(">."+r)),c=this._getItemKey(u);!n.hasClass(l)&&s.hasClass(o)?(s.toggleClass(o,!1),t=n,this._updateExpandedState(u,!1),i=!1):(h=n.parent("."+f),t=h.parent("."+e).eq(0),i=!0,t.length||(t=n,i=!1)),this._refreshActiveNode(t,i),this._fireExpandedStateUpdatedEvt(!1,u)}},_refreshActiveNode:function(n,t){this._scrollableContainer.update(),this.option("focusedElement",n),this._toggleFocusedNodeIcon(t)},_toggleFocusedNodeIcon:function(n){if(this.option("focusedElement")){var t=this.option("focusedElement");t.find("."+a).eq(0).toggleClass(v,n)}},updateDimensions:function(){var t=this,i=n.Deferred();return t._scrollableContainer?t._scrollableContainer.update().done(function(){i.resolveWith(t)}):i.resolveWith(t),i.promise()},selectItem:function(n){this._updateItemSelection(!0,n)},unselectItem:function(n){this._updateItemSelection(!1,n)},expandItem:function(t){var i=this._getItemData(n(t));this._toggleExpandedState(i,!0)},collapseItem:function(t){var i=this._getItemData(n(t));this._toggleExpandedState(i,!1)},getNodes:function(){return this._nodes}}))}(jQuery,DevExpress),function(n,t){var i=t.ui,r=t.utils,c=".dx-row",l="Specifying grid templates with the name of a jQuery selector is now deprecated. Instead, use the jQuery object that references this selector.",e=t.Class.inherit({ctor:function(t){var i=this;i.component=t,i._actions={},i._actionConfigs={},n.each(this.callbackNames()||[],function(t,r){var u=i.callbackFlags(r);i[this]=n.Callbacks(u)})},callbackNames:function(){},callbackFlags:function(){},publicMethods:function(){},init:function(){},option:function(){return this.component.option.apply(this.component,arguments)},on:function(){return this.component.on.apply(this.component,arguments)},off:function(){return this.component.off.apply(this.component,arguments)},optionChanged:function(n){n.name in this._actions&&this.createAction(n.name,this._actionConfigs[n.name])},getController:function(n){return this.component._controllers[n]},createAction:function(t,i){var u;if(r.isFunction(t))return u=this.component._createAction(n.proxy(t,this),i),function(n){u({jQueryEvent:n})};this._actions[t]=this.component._createActionByOption(t,i),this._actionConfigs[t]=i},executeAction:function(n,t){var i=this._actions[n];return i&&i(t)},dispose:function(){var t=this;n.each(t.callbackNames()||[],function(){t[this].empty()})}}),f=e,a=f.inherit({getView:function(n){return this.component._views[n]},getViews:function(){return this.component._views}}),o=e.inherit({element:function(){return this._$element},_renderCore:function(){},_resizeCore:function(){},_afterRender:function(){},_parentElement:function(){return this._$parent},ctor:function(t){this.callBase(t),this.renderCompleted=n.Callbacks(),this.resizeCompleted=n.Callbacks()},isVisible:function(){return!0},getTemplate:function(n){return this.component._getTemplate(n)},render:function(t,i){var r=this._$element,u=this.isVisible();r||(r=this._$element=n("<div />").appendTo(t),this._$parent=t),r.toggle(u),u&&(this._renderCore(i),this._afterRender(t),this.renderCompleted.fire())},resize:function(){this.isResizing=!0,this._resizeCore(),this.resizeCompleted.fire(),this.isResizing=!1},focus:function(){this.element().focus()}}),s=function(i,r){var u={},e={},h,s;n.each(r,function(){var r=this.controllers,i=this.name,s=this.views;r&&n.each(r,function(n,r){if(u[n])throw t.Error("E1001",i,n);else if(!(r&&r.subclassOf&&r.subclassOf(f))){r.subclassOf(f);throw t.Error("E1002",i,n);}u[n]=r}),s&&n.each(s,function(n,r){if(e[n])throw t.Error("E1003",i,n);else if(!(r&&r.subclassOf&&r.subclassOf(o)))throw t.Error("E1004",i,n);e[n]=r})}),n.each(r,function(){var t=this.extenders;t&&(t.controllers&&n.each(t.controllers,function(n,t){u[n]&&(u[n]=u[n].inherit(t))}),t.views&&n.each(t.views,function(n,t){e[n]&&(e[n]=e[n].inherit(t))}))}),h=function(i,r,u){var f=u.publicMethods();f&&n.each(f,function(n,f){if(u[f])if(i[f])throw t.Error("E1005",f);else i[f]=function(){return u[f].apply(u,arguments)};else throw t.Error("E1006",r,f);})},s=function(t){var r={};return n.each(t,function(n,t){var u=new t(i);u.name=n,h(i,n,u),r[n]=u}),r},i._controllers=s(u),i._views=s(e)},u=function(t,i,r){r=r||[],t._controllers&&n.each(t._controllers,function(){this[i]&&this[i].apply(this,r)}),t._views&&n.each(t._views,function(){this[i]&&this[i].apply(this,r)})},h;t.registerComponent("dxDataGrid",i,i.Widget.inherit({_activeStateUnit:c,_setDeprecatedOptions:function(){this.callBase(),n.extend(this._deprecatedOptions,{rowClick:{since:"14.2",alias:"onRowClick"},cellClick:{since:"14.2",alias:"onCellClick"},cellHoverChanged:{since:"14.2",alias:"onCellHoverChanged"},cellPrepared:{since:"14.2",message:"The cellPrepared option is deprecated. Use the onCellPrepared option instead. For further information, see http://js.devexpress.com/Documentation/ApiReference/UI_Widgets/dxDataGrid/Configuration/?version=14_2#onCellPrepared"},rowPrepared:{since:"14.2",message:"The rowPrepared option is deprecated. Use the onRowPrepared option instead. For further information, see http://js.devexpress.com/Documentation/ApiReference/UI_Widgets/dxDataGrid/Configuration/?version=14_2#onRowPrepared"},selectionChanged:{since:"14.2",alias:"onSelectionChanged"},"editing.texts.recoverRow":{since:"14.1",alias:"editing.texts.undeleteRow"},dataErrorOccurred:{since:"14.2",alias:"onDataErrorOccurred"},initNewRow:{since:"14.2",alias:"onInitNewRow"},rowInserting:{since:"14.2",alias:"onRowInserting"},rowInserted:{since:"14.2",alias:"onRowInserted"},editingStart:{since:"14.2",alias:"onEditingStart"},rowUpdating:{since:"14.2",alias:"onRowUpdating"},rowUpdated:{since:"14.2",alias:"onRowUpdated"},rowRemoving:{since:"14.2",alias:"onRowRemoving"},rowRemoved:{since:"14.2",alias:"onRowRemoved"},editorPreparing:{since:"14.2",message:"The editorPreparing option is deprecated. Use the onEditorPreparing option instead. For further information, see http://js.devexpress.com/Documentation/ApiReference/UI_Widgets/dxDataGrid/Configuration/?version=14_2#onEditorPreparing"},editorPrepared:{since:"14.2",message:"The editorPrepared option is deprecated. Use the onEditorPrepared option instead. For further information, see http://js.devexpress.com/Documentation/ApiReference/UI_Widgets/dxDataGrid/Configuration/?version=14_2#onEditorPrepared"},contentReadyAction:{since:"14.2",alias:"onContentReady"}})},_setDefaultOptions:function(){var t=this;t.callBase(),n.each(i.dxDataGrid.modules,function(){n.isFunction(this.defaultOptions)&&t.option(this.defaultOptions())})},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{showRowLines:!0}},{device:function(){return DevExpress.browser.webkit},options:{loadPanel:{animation:{show:{easing:"cubic-bezier(1, 0, 1, 0)",duration:500,from:{opacity:0},to:{opacity:1}}}}}}])},_init:function(){var n=this;n.callBase(),s(n,i.dxDataGrid.modules),u(n,"init")},_clean:n.noop,_optionChanged:function(n){var t=this;t.callBase(n),u(t,"optionChanged",[n])},_dimensionChanged:function(){this.resize()},_visibilityChanged:function(){this.resize()},_renderContentImpl:function(){var n=this;n.getView("gridView").render(n.element())},_renderContent:function(){this._renderContentImpl()},_getTemplate:function(i){var r=i;return t.utils.isString(r)&&r[0]==="#"&&(r=n(i),t.utils.logger.warn(l)),this.callBase(r)},_dispose:function(){var n=this;n.callBase(),u(n,"dispose")},isReady:function(){return this.getController("data").isReady()},beginUpdate:function(){var n=this;n.callBase(),u(n,"beginUpdate")},endUpdate:function(){var n=this;u(n,"endUpdate"),n.callBase()},getController:function(n){return this._controllers[n]},getView:function(n){return this._views[n]}})),h=3,n.extend(i.dxDataGrid,{__internals:{},modules:[],View:o,ViewController:a,Controller:f,registerModule:function(n,t){for(var r=this.modules,i=0;i<r.length;i++)if(r[i].name===n)return;t.name=n,r.push(t)},unregisterModule:function(t){this.modules=n.grep(this.modules,function(n){return n.name!==t})},processModules:s,formatValue:function(n,i){var r=t.formatHelper.format(n,i.format,i.precision)||n&&n.toString()||"",u={value:n,valueText:i.getDisplayFormat?i.getDisplayFormat(r):r};return i.customizeText?i.customizeText.call(i,u):u.valueText},getSummaryText:function(n,t){var i=n.displayFormat||n.columnCaption&&t[n.summaryType+"OtherColumn"]||t[n.summaryType];return this.formatValue(n.value,{format:n.valueFormat,precision:n.precision,getDisplayFormat:function(t){return i?r.stringFormat(i,t,n.columnCaption):t},customizeText:n.customizeText})},equalKeys:function(n,t,u){var f,e;if(u=u||0,u<h){if(r.isObject(n)&&r.isObject(t)){for(f in n)if(n.hasOwnProperty(f)&&!i.dxDataGrid.equalKeys(n[f],t[f],u+1))return!1;for(f in t)if(!(f in n))return!1;return!0}if(r.isArray(n)&&r.isArray(t)){if(n.length!==t.length)return!1;for(e=0;e<n.length;e++)if(!i.dxDataGrid.equalKeys(n[e],t[e],u+1))return!1;return!0}return r.isDate(n)&&r.isDate(t)?n.getTime()===t.getTime():n===t}return!0},getIndexByKey:function(t,r){var u=-1;return n.each(r,function(n,r){if(i.dxDataGrid.equalKeys(t,r.key))return u=n,!1}),u},normalizeSortingInfo:function(n){n=n||[];for(var r=t.data.utils.normalizeSortingInfo(n),i=0;i<n.length;i++)n&&n[i]&&n[i].isExpanded!==undefined&&(r[i].isExpanded=n[i].isExpanded);return r}})}(jQuery,DevExpress),function(n,t){var r=t.ui,u=t.utils,i=r.dxDataGrid;i.StateStoringController=i.ViewController.inherit(function(){var i=function(n){var t=n.type==="sessionStorage"?sessionStorage:localStorage;if(!t)throw new Error("E1007");return t},r=function(n){return"dx_datagrid_"+(u.isDefined(n.storageKey)?n.storageKey:"storage")},f=function(n,t){var i;return typeof t=="string"&&(i=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(t),i)?new Date(Date.UTC(+i[1],+i[2]-1,+i[3],+i[4],+i[5],+i[6])):t},e=function(t){var r=t.getController("columns"),u=t.getController("selection"),i=t.getController("data"),f=t.getView("pagerView");r&&r.columnsChanged.add(function(){n.extend(t._state,{columns:r.getUserState()}),t.isEnabled()&&t.save()}),u&&u.selectionChanged.add(function(i){n.extend(t._state,{selectedRowKeys:i}),t.isEnabled()&&t.save()}),i&&i.changed.add(function(){n.extend(t._state,{searchText:t.option("searchPanel.text"),pageIndex:i.pageIndex(),pageSize:i.pageSize(),allowedPageSizes:f?f.getPageSizes():undefined}),t.isEnabled()&&t.save()})},o=function(n,t){var i=t.allowedPageSizes,u=t.searchText,f=t.selectedRowKeys,r=n.getController("columns"),e=n.getController("data");n.component.beginUpdate(),r&&r.setUserState(t.columns),n.option("selectedRowKeys",f||[]),i&&n.option("pager.allowedPageSizes")==="auto"&&(n.option("pager").allowedPageSizes=i),n.option("searchPanel.text",u||""),n.option("paging",{enabled:n.option("paging.enabled"),pageIndex:t.pageIndex,pageSize:t.pageSize||20}),n.component.endUpdate()};return{_loadState:function(){var n=this.option("stateStoring");if(n.type==="custom")return n.customLoad&&n.customLoad();try{return JSON.parse(i(n).getItem(r(n)),f)}catch(u){t.utils.logger.error(u.message)}},_saveState:function(n){var t=this.option("stateStoring");if(t.type==="custom"){t.customSave&&t.customSave(n);return}try{i(t).setItem(r(t),JSON.stringify(n))}catch(u){}},publicMethods:function(){return["state"]},isEnabled:function(){return this.option("stateStoring.enabled")},init:function(){var t=this;t._state={},t._isLoaded=!1,t._isLoading=!1,t._windowUnloadHandler=function(){t._savingTimeoutID!==undefined&&t._saveState(t.state())},n(window).on("unload",t._windowUnloadHandler),e(t)},isLoaded:function(){return this._isLoaded},isLoading:function(){return this._isLoading},load:function(){var i=this,t;return i._isLoading=!0,t=i._loadState(),t&&n.isFunction(t.done)||(t=n.Deferred().resolve(t)),t.done(function(n){i._isLoaded=!0,i._isLoading=!1,i.state(n)}),t},state:function(t){var i=this;if(t)n.extend(i._state,t),o(i,n.extend({},i._state));else return n.extend(!0,{},i._state)},save:function(){var n=this;clearTimeout(n._savingTimeoutID),n._savingTimeoutID=setTimeout(function(){n._saveState(n.state()),n._savingTimeoutID=undefined},n.option("stateStoring.savingTimeout"))},dispose:function(){clearTimeout(this._savingTimeoutID),n(window).off("unload",this._windowUnloadHandler)}}}()),i.registerModule("stateStoring",{defaultOptions:function(){return{stateStoring:{enabled:!1,storageKey:null,type:"localStorage",customLoad:null,customSave:null,savingTimeout:2e3}}},controllers:{stateStoring:r.dxDataGrid.StateStoringController},extenders:{controllers:{columns:{getVisibleColumns:function(){var n=this.callBase();return this.getController("stateStoring").isLoading()?[]:n}},data:{_refreshDataSource:function(){var n=this,i=n.callBase,t=n.getController("stateStoring");t.isEnabled()&&!t.isLoaded()?(clearTimeout(n._restoreStateTimeoutID),n._restoreStateTimeoutID=setTimeout(function(){t.load().always(function(){n._restoreStateTimeoutID=null,i.call(n)})})):n._restoreStateTimeoutID||i.call(n)},isLoading:function(){var n=this,t=n.getController("stateStoring");return this.callBase()||t.isLoading()},dispose:function(){clearTimeout(this._restoreStateTimeoutID),this.callBase()}}}}})}(jQuery,DevExpress),function(n,t,i){var h=t.ui,e=h.dxDataGrid,o=e.normalizeSortingInfo,u=t.utils,f=t.data.utils,r=u.isDefined,c=["visibleIndex","dataField","dataType","width","visibleWidth","visible","sortOrder","sortIndex","groupIndex","filterValue","selectedFilterOperation"],l="dx-command-expand",s;e.checkChanges=function(n,t){for(var r=0,i=0;i<t.length;i++)n[t[i]]&&r++;return n.length&&n.length===r},s=e.Controller.inherit(function(){var ct={visible:!0,showInColumnChooser:!0},lt={number:["=","<>","<",">","<=",">="],string:["contains","notcontains","startswith","endswith","=","<>"],date:["=","<>","<",">","<=",">="]},s="group",h="columnChooser",at=function(n){for(var u=[],t,f=!1,i=!1,r=0;r<n.length;r++)t=n.charAt(r),i=t===t.toUpperCase()||t in["0","1","2","3","4","5","6","7","8","9"],t==="_"||t==="."?(t=" ",i=!0):r===0?(t=t.toUpperCase(),i=!0):!f&&i&&u.length>0&&u.push(" "),u.push(t),f=i;return u.join("")},k=function(t,i){var e,r,f;if(i)return u.isString(i)&&(i={dataField:i}),i.command?n.extend(!0,{},i):(r=t.getCommonSettings(),f=t._createCalculatedColumnOptions(i),n.extend(!0,{},ct,r,f,i))},y=function(t,i){var r=[];return i&&n.each(i,function(n,i){var u=k(t,i);u&&r.push(u)}),r},rt=function(t){var r=n.type(t);return r!=="string"&&r!=="boolean"&&r!=="number"&&r!=="date"&&(r=i),r},ut=function(n,t){switch(n){case"date":if(u.isNumber(t))return"number";if(u.isString(t))return"yyyy/MM/dd";case"number":if(u.isString(t))return"string"}},d=function(n,t){n.deserializeValue||(t==="date"&&(n.deserializeValue=function(n){var t=this.serializationFormat,r;if(t&&t!=="number"&&t!=="yyyy/MM/dd"){if(n!==i)return Globalize.parseDate(n,t)}else return r=t==="number"?n:!u.isDate(n)&&Date.parse(n),r?new Date(r):n},n.serializeValue=function(n){var t=this.serializationFormat;return t==="number"?n&&n.valueOf&&n.valueOf():t?Globalize.format(n,t):n}),t==="number"&&(n.deserializeValue=function(n){return n?Number(n):n},n.serializeValue=function(n){return n?n.toString():n}))},vt=function(n,t){switch(n){case"number":return"right";case"boolean":return"center";case"date":return"left";default:return t?"right":"left"}},yt=function(n){switch(n){case"date":return"shortDate"}},pt=function(n){if(n==="boolean")return function(n){return n.value===!0?this.trueText||"true":n.value===!1?this.falseText||"false":n.valueText||""}},wt=function(n,t){for(var u=ft(t),i,f={},e=[],o,r=0;r<u.length;r++)if(u[r])for(i in u[r])f[i]=!0;for(i in f)i.indexOf("__")!==0&&(o=k(n,i),e.push(o));return e},p=function(t,i){var r;if(n.isArray(t)&&n.isArray(i)){if(t.length!==i.length)return!1;for(r=0;r<t.length;r++)if(t[r].selector!==i[r].selector||t[r].desc!==i[r].desc||!t[r].isExpanded!=!i[r].isExpanded)return!1;return!0}return(!t||!t.length)==(!i||!i.length)},ft=function(n){var t,u,i=[],r=function(n,t){var i,u;if(!n||!t)return n;for(i=0;i<n.length;i++)if(u=r(n[i].items,t-1),u&&u.length)return u};return n&&n.items().length>0&&(t=o(n.group()).length,i=r(n.items(),t)||[]),i},bt=function(t){n.each(t._columns,function(n,t){t.index=n}),n.each(t._commandColumns,function(n,t){t.index=-(n+1)})},g=function(t,i,u){var f={},o=0,e;n.each(t._columns,function(n,t){var n=t[i];r(n)&&(f[n]=f[n]||[],t===u?f[n].unshift(t):f[n].push(t),delete t[i])});for(e in f)n.each(f[e],function(){e>=0&&(this[i]=o++)});return o},nt=function(t,i){var u="groupIndex",f=g(t,u,i);n.each(t._columns,function(n,t){!r(t[u])&&t.grouped&&(t[u]=f++),delete t.grouped})},et=function(t,i){n.each(t._columns,function(n,t){r(t.sortIndex)&&!b(t.sortOrder)&&delete t.sortIndex});var u=g(t,"sortIndex",i);n.each(t._columns,function(n,t){r(t.sortIndex)||r(t.groupIndex)||!b(t.sortOrder)||(t.sortIndex=u++)})},ot=function(t,i){var u="visibleIndex",f=g(t,u,i);n.each(t._columns,function(n,t){r(t[u])||(t[u]=f++)})},tt=function(n,t,i){var f=i===s?n.getGroupColumns():i===h?n.getChooserColumns():n.getVisibleColumns(),u=f[t];return u&&r(u.index)?u.index:-1},kt=function(n,t,i){var u=n.getGroupColumns(),r;if(i>=0)for(r=0;r<u.length;r++)u[r].groupIndex>=i&&u[r].groupIndex++;else for(i=0,r=0;r<u.length;r++)i=Math.max(i,u[r].groupIndex+1);t.groupIndex=i},st=function(t){var f=t._columnsUserState,e=t._columns,o=[],i,u;if(f){if(e.length!==f.length)return;for(u=0;u<f.length;u++)if(i=r(f[u].initialIndex)?e[f[u].initialIndex]:e[u],i&&f[u].dataField===i.dataField&&f[u].name===i.name)i=n.extend({},i),n.each(c,function(n,t){i[t]=t==="dataType"?i[t]||f[u][t]:f[u][t]}),o.push(i);else return;a(t,o)}},w=function(n,t){bt(n),nt(n,t),et(n,t),ot(n,t)},ht=function(n){return n&&n.store&&n.store()instanceof t.data.ArrayStore},a=function(n,t){n._columns=t,n._visibleColumns=i,n.updateColumnDataTypes()},e=function(n,t,r,u){var f=n._columnChanges||{optionNames:{length:0},changeTypes:{length:0},columnIndex:u},e,o;r=r||"all",e=f.changeTypes,t&&!e[t]&&(e[t]=!0,e.length++),o=f.optionNames,r&&!o[r]&&(o[r]=!0,o.length++),(u===i||u!==f.columnIndex)&&delete f.columnIndex,n._columnChanges=f,n._visibleColumns=i},v=function(t){var u=t.option("onColumnsChanging"),r=t._columnChanges;t.isInitialized()&&!t._updateLockCount&&r&&(u&&(t._updateLockCount++,u(n.extend({component:t.component},r)),t._updateLockCount--),t._columnChanges=i,t.columnsChanged.fire(r))},it=function(n,t,i,r,u){var s=f.compileGetter(i),o;if(arguments.length===3)return s(t,{functionsAsIs:!0});s(t,{functionsAsIs:!0})!==r&&(o=i==="groupIndex"?"grouping":i==="sortIndex"||i==="sortOrder"?"sorting":"columns",f.compileSetter(i)(t,r,{functionsAsIs:!0}),u||e(n,o,i,t.index))},b=function(n){return n==="asc"||n==="desc"},dt=function(n){n.addCommandColumn({command:"expand",width:"auto",cssClass:l,allowEditing:!1,allowGrouping:!1,allowSorting:!1,allowResizing:!1,allowReordering:!1,allowHiding:!1})};return{init:function(){var n=this,t=n.option("columns");n._updateLockCount=n._updateLockCount||0,n._commandColumns=n._commandColumns||[],dt(n),a(n,t?y(n,t):[]),n._isColumnsFromOptions=!!t,n._isColumnsFromOptions?st(n):a(n,n._columnsUserState?y(n,n._columnsUserState):n._columns),n._dataSourceApplied?n.applyDataSource(n._dataSource,!0):w(n)},callbackNames:function(){return["columnsChanged"]},optionChanged:function(n){switch(n.name){case"columns":this._columnsUserState=null,this.init();break;case"commonColumnSettings":case"columnAutoWidth":case"allowColumnResizing":case"allowColumnReordering":case"grouping":case"groupPanel":case"regenerateColumnsByVisibleItems":case"customizeColumns":case"editing":case"rtlEnabled":this._columnsUserState=this.getUserState(),this.init()}},publicMethods:function(){return["addColumn","columnOption","columnCount","clearSorting","clearGrouping"]},applyDataSource:function(n,t){var i=this,r=n&&n.isLoaded();return i._dataSource=n,(!i._dataSourceApplied||i._dataSourceColumnsCount===0||t||i.option("regenerateColumnsByVisibleItems"))&&r?(i._isColumnsFromOptions||(a(i,wt(i,n)),i._dataSourceColumnsCount=i._columns.length,st(i)),i.updateColumns(n)):void 0},reset:function(){this._dataSourceApplied=!1,this._dataSourceColumnsCount=i,this._columnsUserState=this.getUserState(),this.init()},isInitialized:function(){return!!this._columns.length},isDataSourceApplied:function(){return this._dataSourceApplied},beginUpdate:function(){this._updateLockCount++},endUpdate:function(){var n=this,t={},i;n._updateLockCount--,n._updateLockCount||v(n)},getCommonSettings:function(){var r=this.option("commonColumnSettings")||{},t=this.option("grouping")||{},i=this.option("groupPanel")||{};return n.extend({allowResizing:this.option("allowColumnResizing"),allowReordering:this.option("allowColumnReordering"),autoExpandGroup:t.autoExpandAll,allowCollapsing:t.allowCollapsing,allowGrouping:i.allowColumnDragging&&i.visible},r)},isColumnOptionUsed:function(n){for(var t=0;t<this._columns.length;t++)if(this._columns[t][n])return!0},isAllDataTypesDefined:function(){var t=this._columns,n;if(!t.length)return!1;for(n=0;n<t.length;n++)if(!t[n].dataType)return!1;return!0},getColumns:function(){return n.extend(!0,[],this._columns)},getGroupColumns:function(){var t=[];return n.each(this._columns,function(){var n=this;r(n.groupIndex)&&(t[n.groupIndex]=n)}),t},getVisibleColumns:function(){var n=this;return n._visibleColumns=n._visibleColumns||n._getVisibleColumnsCore()},_getExpandColumnsCore:function(){return this.getGroupColumns()},getExpandColumns:function(){var t=this._getExpandColumnsCore(),i;return t.length&&(i=this.columnOption("command:expand")),t=n.map(t,function(t){return n.extend({},t,{visibleWidth:"auto"},i,{index:t.index})})},_getVisibleColumnsCore:function(){var t=this.getExpandColumns(),u={},f={},e=0,o=this._columns.length?this._commandColumns.concat(this._columns):[],i;n.each(o,function(){var t=this,i=t.visibleIndex,o;t.visible&&(!r(t.groupIndex)||t.showWhenGrouped)&&(t=n.extend(!0,{},t),i<0?(i=-i,o=f):o=u,o[i]=o[i]||[],o[i].push(t),e++)});for(i in f)t.unshift.apply(t,f[i]);for(i in u)t.push.apply(t,u[i]);return!e&&this._columns.length&&t.push({command:"empty"}),t},getHiddenColumns:function(){var t=[];return n.each(this._columns,function(n,i){i.visible||t.push(i)}),t},getChooserColumns:function(){return n.grep(this.getHiddenColumns(),function(n){return n.showInColumnChooser})},allowMoveColumn:function(n,t,i,r){var f=this,e=tt(f,n,i),u=f._columns[e];return u&&(u.allowReordering||u.allowGrouping||u.allowHiding)?i===r?i===h?!1:n!==t&&n+1!==t:i===s&&r!==h||r===s?u&&u.allowGrouping:i===h||r===h?u&&u.allowHiding:!0:!1},moveColumn:function(n,t,u,f){var o=this,y,l,a,p=u===s||f===s,c;y=tt(o,n,u),l=tt(o,t,f),y>=0&&(c=o._columns[y],a=l>=0?o._columns[l].groupIndex:-1,r(c.groupIndex)&&u===s&&(a>c.groupIndex&&a--,delete c.groupIndex,delete c.sortOrder,nt(o)),f===s?(kt(o,c,a),nt(o)):t>=0&&(c.visibleIndex=l<0?i:o._columns[l].visibleIndex,ot(o,c)),c.visible=f!==h,e(o,p?"grouping":"columns"),v(o))},changeSortOrder:function(t,i){var f=this,y=f.getCommonSettings(),h=f.option("sorting"),s=h&&h.mode,c=s==="single"||!i,l=s==="single"||s==="multiple",u=f._columns[t],a=function(n){if(i==="ctrl"){if(!("sortOrder"in n&&"sortIndex"in n))return!1;delete n.sortOrder,delete n.sortIndex}else n.sortOrder=r(n.groupIndex)||r(n.sortIndex)?n.sortOrder==="desc"?"asc":"desc":"asc";return!0},o=!1;l&&u&&u.allowSorting&&(c&&!r(u.groupIndex)&&n.each(f._columns,function(n){n!==t&&this.sortOrder&&!r(this.groupIndex)&&(delete this.sortOrder,delete this.sortIndex,o=!0)}),b(i)?u.sortOrder!==i&&(u.sortOrder=i,o=!0):i==="none"?u.sortOrder&&(delete u.sortIndex,delete u.sortOrder,o=!0):o=a(u)),o&&(et(f),e(f,"sorting"),v(f))},getSortDataSourceParameters:function(){var u=this,i=[],t=[];return n.each(u._columns,function(){(this.dataField||this.selector||this.calculateCellValue)&&r(this.sortIndex)&&!r(this.groupIndex)&&(i[this.sortIndex]=this)}),n.each(i,function(){var n=this&&this.sortOrder;b(n)&&t.push({selector:this.selector||this.dataField||this.calculateCellValue,desc:this.sortOrder==="desc"})}),t.length>0?t:null},getGroupDataSourceParameters:function(){var t=[];return n.each(this.getGroupColumns(),function(){var n=this.calculateGroupValue||this.selector||this.dataField||this.calculateCellValue;n&&t.push({selector:n,desc:this.sortOrder==="desc",isExpanded:!!this.autoExpandGroup})}),t.length>0?t:null},refresh:function(t){var i=[];return n.each(this._columns,function(){var n=this.lookup;if(n){if(t&&n.valueMap)return;n.update&&i.push(n.update())}}),n.when.apply(n,i)},updateColumnDataTypes:function(t){var i=ft(t),u=ht(t),f=this.option("rtlEnabled");n.each(this._columns,function(t,e){var h,l,s,a,c,v,o=e.lookup;if(e.dataField&&i.length){if(!e.dataType||o&&!o.dataType){for(h=0;h<i.length;h++)l=e.calculateCellValue(i[h]),c=e.dataType||rt(l),s=s||c,s&&c&&s!==c&&(s="string"),o&&(c=o.dataType||rt(o.calculateCellValue(l)),a=a||c,a&&c&&a!==c&&(a="string"));e.dataType=s,o&&(o.dataType=a)}if(!e.serializationFormat||o&&!o.serializationFormat)for(h=0;h<i.length;h++)l=e.calculateCellValue(i[h],!0),e.serializationFormat=e.serializationFormat||ut(e.dataType,l),o&&(o.serializationFormat=o.serializationFormat||ut(o.dataType,o.calculateCellValue(l,!0)))}(u&&e.userDataType||!e.dataField)&&(e.selector=e.selector||n.proxy(e,"calculateCellValue")),d(e,e.dataType),o&&d(o,o.dataType),s=o?o.dataType:e.dataType,s&&(e.alignment=e.alignment||vt(s,f),e.format=e.format||yt(s),e.customizeText=e.customizeText||pt(s),r(e.filterOperations)||(e.filterOperations=!o&&lt[s]||[]),e.defaultFilterOperation=e.filterOperations&&e.filterOperations[0]||"=",e.defaultSelectedFilterOperation=e.selectedFilterOperation,e.showEditorAlways=r(e.showEditorAlways)?e.showEditorAlways:s==="boolean")})},_customizeColumns:function(n){var t=this,i=t.option("customizeColumns");i&&(i(n),a(t,y(t,n)))},updateColumns:function(t){var i=this,r,u;return i.updateSortingGrouping(t),!t||t.isLoaded()?(r=t?t.sort()||[]:i.getSortDataSourceParameters(),u=t?t.group()||[]:i.getGroupDataSourceParameters(),i._customizeColumns(i._columns),w(i),n.when(i.refresh(!0)).always(function(){t&&(i.updateColumnDataTypes(t),i._dataSourceApplied=!0),p(r,i.getSortDataSourceParameters())||e(i,"sorting"),p(u,i.getGroupDataSourceParameters())||e(i,"grouping"),e(i,"columns"),v(i)})):void 0},updateSortingGrouping:function(t,r){var u=this,f,s,h,c,l,w=function(t,r,u){var f,e,o;n.each(t,function(n,t){if(delete t[u],r)for(f=0;f<r.length;f++)if(e=r[f].selector,o=r[f].isExpanded,e===t.dataField||e===t.name||e===t.selector||e===t.calculateCellValue||e===t.calculateGroupValue){t.sortOrder=t.sortOrder||(r[f].desc?"desc":"asc"),o!==i&&(t.autoExpandGroup=o),t[u]=f;break}})};t&&(f=o(t.sort()),s=o(t.group()),h=u.getGroupDataSourceParameters(),c=u.getSortDataSourceParameters(),u._columns.length||(n.each(s,function(n,t){u._columns.push(t.selector)}),n.each(f,function(n,t){u._columns.push(t.selector)}),a(u,y(u,u._columns))),!r&&h||p(s,h)||(w(u._columns,s,"groupIndex"),r&&(e(u,"grouping"),l=!0)),!r&&c||p(f,c)||(w(u._columns,f,"sortIndex"),r&&(e(u,"sorting"),l=!0)),l&&v(u))},updateFilter:function(t,i){var f=this,e=ht(t),r=function(t){if(u.isArray(t)){var o,i,e;for(u.isString(t[0])&&(i=f.columnOption(t[0]),i&&i.calculateCellValue&&(t[0]=n.proxy(i,"calculateCellValue"))),e=0;e<t.length;e++)r(t[e])}};e&&r(i)},columnCount:function(){return this._columns.length},columnOption:function(t,r,f,e){var c=this,o,l=u.isString(t)&&t.substr(0,t.indexOf(":")),s=t<0||l==="command"?c._commandColumns:c._columns,h;if(t!==i){for(l&&(t=t.substr(l.length+1)),o=0;o<s.length;o++)if(l){if(""+s[o][l]===t){h=s[o];break}}else if(s[o].index===t||s[o].name===t||s[o].dataField===t||s[o].caption===t){h=s[o];break}if(h){if(arguments.length===1)return n.extend({},h);if(u.isString(r)){if(arguments.length===2)return it(c,h,r);it(c,h,r,f,e)}else u.isObject(r)&&n.each(r,function(n,t){it(c,h,n,t,e)});w(c,h),v(c)}}},clearSorting:function(){var t=this,r=this.columnCount(),n;for(t.beginUpdate(),n=0;n<r;n++)t.columnOption(n,"sortOrder",i);t.endUpdate()},clearGrouping:function(){var t=this,r=this.columnCount(),n;for(t.beginUpdate(),n=0;n<r;n++)t.columnOption(n,"groupIndex",i);t.endUpdate()},getVisibleIndex:function(n){for(var i=this.getVisibleColumns(),t=0;t<i.length;t++)if(i[t].index===n)return t;return-1},addColumn:function(n){var t=this,i=k(t,n);t._columns.push(i),w(t,i),t.updateColumns(t._dataSource)},addCommandColumn:function(n){for(var i=this._commandColumns,t=0;t<i.length;t++)if(i[t].command===n.command)return;i.push(n)},getUserState:function(){for(var r=this._columns,u=[],t=0;t<r.length;t++)u[t]={},n.each(c,function(n,f){r[t][f]!==i&&(u[t][f]=r[t][f])});return u},setUserState:function(n){this._columnsUserState=n,this.init()},_createCalculatedColumnOptions:function(i){var r={},e;return i.dataField?(e=f.compileGetter(i.dataField),r={caption:at(i.dataField),calculateCellValue:function(n,t){var i=e(n);return this.deserializeValue&&!t?this.deserializeValue(i):i},parseValue:function(n){var r=this,t,i;return r.dataType==="number"?u.isString(n)?(i=Globalize.parseFloat(n),u.isNumber(i)&&(t=i)):u.isDefined(n)&&(t=Number(n)):r.dataType==="boolean"?n===r.trueText?t=!0:n===r.falseText&&(t=!1):r.dataType==="date"?(i=Globalize.parseDate(n),i&&(t=i)):t=n,t}},i.dataType&&(r.userDataType=i.dataType),i.lookup&&(r.lookup={calculateCellValue:function(n,t){var n=this.valueMap&&this.valueMap[n];return this.deserializeValue&&!t?this.deserializeValue(n):n},updateValueMap:function(){var i,r,t,n;if(this.valueMap={},this.items)for(i=f.compileGetter(this.valueExpr),r=f.compileGetter(this.displayExpr),n=0;n<this.items.length;n++)t=this.items[n],this.valueMap[i(t)]=r(t)},update:function(){var i=this,r=i.dataSource;if(r){if(u.isObject(r)||u.isArray(r))return r=new t.data.DataSource(n.extend(!0,{paginate:!1,_preferSync:!0},f.normalizeDataSourceOptions(r))),r.load().done(function(n){i.items=n,i.updateValueMap&&i.updateValueMap()});t.log("E1016")}else i.updateValueMap&&i.updateValueMap()}})):n.extend(!0,r,{allowSorting:!1,allowGrouping:!1,calculateCellValue:function(){return null}}),r.resizedCallbacks=n.Callbacks(),i.resized&&r.resizedCallbacks.add(n.proxy(i.resized,i)),d(r,i.dataType),r}}}()),h.dxDataGrid.ColumnsController=s,e.registerModule("columns",{defaultOptions:function(){return{commonColumnSettings:{allowFiltering:!0,allowHiding:!0,allowSorting:!0,allowEditing:!0,encodeHtml:!0,trueText:Globalize.localize("dxDataGrid-trueText"),falseText:Globalize.localize("dxDataGrid-falseText")},allowColumnReordering:!1,allowColumnResizing:!1,columns:i,regenerateColumnsByVisibleItems:!1,sorting:{mode:"single",ascendingText:Globalize.localize("dxDataGrid-sortingAscendingText"),descendingText:Globalize.localize("dxDataGrid-sortingDescendingText"),clearText:Globalize.localize("dxDataGrid-sortingClearText")},customizeColumns:null}},controllers:{columns:s}})}(jQuery,DevExpress),function(n,t){var r=t.ui.dxDataGrid,c=t.ui.events,u=t.utils,e="dx-editor-cell",o="dx-selection",v="dx-row-inserted",f="dx-select-checkbox",l="dx-select-checkboxes-hidden",s="dx-command-select",a="dx-selection-disabled",h="dx-data-row",i="selection.showCheckBoxesInMultipleMode";r.SelectionController=r.Controller.inherit(function(){var o="selection.mode",b=function(n){return n==="single"||n==="multiple"},f=function(t,i,r){var f,e=r?t._unselectedItemKeys:t._selectedItemKeys;if(u.isObject(i)){for(f=0;f<e.length;f++)if(l(e[f],i))return f;return-1}return n.inArray(i,e)},v=function(t,i){var u=-1;return n.each(i,function(n,i){if(r.equalKeys(t,i))return u=n,!1}),u},y=function(n,t){var i=n.getController("data").keyOf(t),r;f(n,i)===-1&&(n._selectedItemKeys.push(i),n._addedItemKeys.push(i),n._selectedItems.push(t)),n._isSelectAll&&(r=f(n,i,!0),n._unselectedItemKeys.splice(r,1))},p=function(n,t){var i=f(n,t);i>=0&&(n._selectedItemKeys.splice(i,1),n._removedItemKeys.push(t),n._selectedItems.splice(i,1),n._isSelectAll&&f(n,t,!0)===-1&&n._unselectedItemKeys.push(t))},k=function(n){c(n,[],[])},c=function(t,i,r,u){var f,e=t._selectedItemKeys;for(t._selectedItemKeys=i,t._selectedItems=r,t._unselectedItemKeys=[],t._isSelectAll=!!u,f=0;f<e.length;f++)n.inArray(e[f],i)===-1&&t._removedItemKeys.push(e[f]);for(f=0;f<i.length;f++)n.inArray(i[f],e)===-1&&t._addedItemKeys.push(i[f])},l=r.equalKeys,w=function(n){delete n._shiftFocusedItemIndex},e=function(n){return n&&n.rowType==="data"&&!n.inserted},d=function(n,t,i){var f=!1,o,r,h=n.getController("data"),c=i[n._focusedItemIndex]&&n.isRowSelected(h.keyOf(i[n._focusedItemIndex].data)),s=function(n,t,i){i?p(n,h.keyOf(t)):y(n,t)};if(u.isDefined(n._shiftFocusedItemIndex)||(n._shiftFocusedItemIndex=n._focusedItemIndex),n._shiftFocusedItemIndex!==n._focusedItemIndex)for(o=n._focusedItemIndex<n._shiftFocusedItemIndex?1:-1,r=n._focusedItemIndex;r!==n._shiftFocusedItemIndex;r+=o)e(i[r])&&(s(n,i[r].data,!0),f=!0);if(t!==n._shiftFocusedItemIndex)for(o=t<n._shiftFocusedItemIndex?1:-1,r=t;r!==n._shiftFocusedItemIndex;r+=o)e(i[r])&&(s(n,i[r].data,!1),f=!0);return e(i[n._focusedItemIndex])&&!c&&(s(n,i[n._focusedItemIndex].data,!1),f=!0),f},g=function(t,i,r){var o,f,e=t&&t.key(),u=[];return t&&(e?n.each(i,function(t,i){if(u.length>0&&u.push(r?"and":"or"),n.isArray(e)){for(o=[],f=0;f<e.length;f++)f>0&&o.push(r?"or":"and"),o.push([e[f],r?"<>":"=",i[e[f]]]);u.push(o)}else u.push([e,r?"<>":"=",i])}):u=function(n){for(var t=0;t<i.length;t++)if(l(i[t],n))return!r;return r}),u.length>0||n.isFunction(u)?u:void 0},h=function(t){var r=[],u=t.getController("data"),f,o;u&&(n.each(u.items(),function(n,i){e(i)&&i.isSelected!==t.isRowSelected(i.key)&&r.push(n)}),t.option(i)==="onClick"&&(t._selectedItemKeys.length>1?t.startSelectionWithCheckboxes():t._selectedItemKeys.length===0&&r.length&&t.stopSelectionWithCheckboxes()),r.length&&u.updateItems({changeType:"updateSelection",itemIndexes:r}),f=t._addedItemKeys,o=t._removedItemKeys,(f.length||o.length)&&(t._selectedItemsInternalChange=!0,t.option("selectedRowKeys",t._selectedItemKeys.slice(0)),t._selectedItemsInternalChange=!1,t.selectionChanged.fire(t._selectedItemKeys),t.executeAction("onSelectionChanged",{selectedRowsData:t._selectedItems,selectedRowKeys:t._selectedItemKeys,currentSelectedRowKeys:f,currentDeselectedRowKeys:o})),t._addedItemKeys=[],t._removedItemKeys=[])},a=function(n){var t=n.getController("columns"),i=n.isSelectColumnVisible();t.addCommandColumn({command:"select",visible:i,visibleIndex:-1,dataType:"boolean",alignment:"center",cssClass:s,width:"auto"}),t.columnOption("command:select","visible",i)};return{init:function(){var n=this;n._isSelectionWithCheckboxes=!1,n._focusedItemIndex=-1,n._selectedItemKeys=[],n._unselectedItemKeys=[],n._selectedItems=[],n._addedItemKeys=[],n._removedItemKeys=[],n._isSelectAll=!1,a(n),n.createAction("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})},callbackNames:function(){return["selectionChanged"]},optionChanged:function(n){var t=this;t.callBase(n);switch(n.name){case"selection":t.init(),t.getController("columns").updateColumns();break;case"selectedRowKeys":u.isArray(n.value)&&!t._selectedItemsInternalChange&&t.selectRows(n.value)}},publicMethods:function(){return["selectRows","deselectRows","selectRowsByIndexes","getSelectedRowKeys","getSelectedRowsData","clearSelection","selectAll","startSelectionWithCheckboxes","stopSelectionWithCheckboxes","isRowSelected"]},isRowSelected:function(n){var t=f(this,n);return t!==-1},isSelectColumnVisible:function(){var n=this.option(i);return this.option(o)==="multiple"&&(n==="always"||n==="onClick"||this._isSelectionWithCheckboxes)},isSelectAll:function(){return this._isSelectAll&&!this._unselectedItemKeys.length},selectAll:function(){return this.option(i)==="onClick"&&this.startSelectionWithCheckboxes(),this.selectedItemKeys([],!0)},clearSelection:function(){this.selectedItemKeys([])},refresh:function(){var n=this,t;return t=n.isSelectAll()?n.selectAll():n.selectedItemKeys(n.option("selectedRowKeys")||[]),t.done(function(){h(n)})},selectedItemKeys:function(i,r){var s=this,y,f,p,e,a=s.getController("data"),w=a.dataSource(),v=w&&w.store(),l,o;return u.isDefined(i)?(v&&(y=n.isArray(i)?n.extend([],i):[i],s._isSelectAll=r,(y.length||r)&&(f=g(w,y,r),p=n.isFunction(f),(f||r)&&(r&&(l=a.combinedFilter()),f&&!p&&l?(o=[],o.push(f),o.push(l)):l?o=l:f&&!p&&(o=f),e=n.Deferred(),a.setSelectionLoading(!0),v.load({filter:o}).done(function(n){new t.data.ArrayStore(n).load({filter:f}).done(function(n){e.resolve(n)})}).fail(n.proxy(e.reject,e)).always(function(){a.setSelectionLoading(!1)})))),e=e||n.Deferred().resolve([]),e.done(function(n){var t,i,u=[];if(v&&n.length>0)for(t=0;t<n.length;t++)i=v.keyOf(n[t]),u.push(i);c(s,u,n,r),h(s)}),e):s._selectedItemKeys},getSelectedRowKeys:function(){return this.selectedItemKeys()},selectRows:function(t,i){t=n.isArray(t)?t:[t];var r=t;return i&&(r=this.getSelectedRowKeys(),n.each(t,function(n,t){v(t,r)===-1&&r.push(t)})),this.selectedItemKeys(r)},deselectRows:function(t){var i=this.getSelectedRowKeys(),t=n.isArray(t)?t:[t];return n.each(t,function(n,t){var r=v(t,i);r>=0&&i.splice(r,1)}),this.selectedItemKeys(i)},selectRowsByIndexes:function(t){var r=this.getController("data").items(),f,i=[];return u.isArray(t)||(t=Array.prototype.slice.call(arguments,0)),n.each(t,function(){var n=r[this];n&&n.rowType==="data"&&i.push(n.key)}),this.selectRows(i)},getSelectedRowsData:function(){return this._selectedItems},changeItemSelection:function(n,t){var i=this,v=i.getController("data"),g=v.items(),f=g[n],s=f&&f.data,a=i.option(o),u,nt,r;return b(a)&&e(f)&&(r=v.keyOf(s),t=t||{},i.isSelectionWithCheckboxes()&&(t.control=!0),t.shift&&a==="multiple"&&i._focusedItemIndex>=0?u=d(i,n,g):t.control?(w(i),nt=i.isRowSelected(r),a==="single"&&k(i),nt?p(i,r):y(i,s),u=!0):(w(i),i._selectedItemKeys.length===1&&l(i._selectedItemKeys[0],r)||(c(i,[r],[s]),u=!0)),u)?(i._focusedItemIndex=n,h(i),!0):!1},focusedItemIndex:function(n){var t=this;if(u.isDefined(n))t._focusedItemIndex=n;else return t._focusedItemIndex},isSelectionWithCheckboxes:function(){var n=this.option(o),t=this.option(i);return n==="multiple"&&(t==="always"||this._isSelectionWithCheckboxes)},startSelectionWithCheckboxes:function(){var n=this,t=n.isSelectColumnVisible();return n.option(o)==="multiple"&&!n.isSelectionWithCheckboxes()?(n._isSelectionWithCheckboxes=!0,a(n),t===n.isSelectColumnVisible()&&n.option(i)==="onClick"&&h(n),!0):!1},stopSelectionWithCheckboxes:function(){var n=this,t=n.isSelectColumnVisible();return n._isSelectionWithCheckboxes?(n._isSelectionWithCheckboxes=!1,a(n),!0):!1}}}()),r.registerModule("selection",{defaultOptions:function(){return{selection:{mode:"none",showCheckBoxesInMultipleMode:"onClick",allowSelectAll:!0},selectedRowKeys:[]}},controllers:{selection:r.SelectionController},extenders:{controllers:{data:{setDataSource:function(n){this.callBase(n),this.getController("selection").refresh()},setSelectionLoading:function(n){this._isSelectionLoading=n,this._fireLoadingChanged()},isLoading:function(){var n=this.callBase();return n||!!this._isSelectionLoading},pageIndex:function(n){var t=this,i=t._dataSource;return i&&n&&i.pageIndex()!==n&&t.getController("selection").focusedItemIndex(-1),t.callBase(n)},_processDataItem:function(){var i=this,t=i.getController("selection"),r=t.isSelectColumnVisible(),n=this.callBase.apply(this,arguments);return n.isSelected=t.isRowSelected(n.key),r&&n.values&&(n.values[0]=n.isSelected),n},refresh:function(){return n.when(this.getController("selection").refresh(),this.callBase.apply(this,arguments))}}},views:{columnHeadersView:{_renderCore:function(n){var t=this;t.getController("selection").selectionChanged.remove(t._selectionChangedHandler),t.callBase(n)},_renderHeaderContent:function(t,i,r){var u=this,s,o=u.getController("selection"),h=function(n){if(n.isSelectAll()||n.getSelectedRowKeys().length===0)return n.isSelectAll()};if(i.command==="select"){t.addClass(e),s=n("<div />").appendTo(t).addClass(f),u.getController("editorFactory").createEditor(s,n.extend({},i,{parentType:"headerRow",value:h(o),setValue:function(n,t){t.jQueryEvent&&h(o)!==n&&((t.previousValue===undefined||t.previousValue)&&(o.clearSelection(),t.component.option("value",!1)),t.previousValue===!1&&(u.option("selection.allowSelectAll")?o.selectAll():t.component.option("value",!1)),t.jQueryEvent.preventDefault())}}));t.on("dxclick",u.createAction(function(t){var i=t.jQueryEvent;n(i.target).closest("."+f).length||n(i.currentTarget).children().trigger("dxclick"),i.preventDefault()}));u._selectionChangedHandler=function(){s.dxCheckBox("instance").option("value",h(o))},o.selectionChanged.add(u._selectionChangedHandler)}else u.callBase(t,i,r)}},rowsView:{_getDefaultTemplate:function(t){var i=this,r;return t.command==="select"?function(u,o){if(o.rowType==="data"&&!o.row.inserted){u.addClass(e);u.on("dxclick",i.createAction(function(t){var r=i.getController("selection"),u=t.jQueryEvent,f=i.getRowIndex(n(u.currentTarget).closest(".dx-row"));f>=0&&(r.startSelectionWithCheckboxes(),r.changeItemSelection(f,{shift:u.shiftKey}))}));r=n("<div />").addClass(f).appendTo(u),i.getController("editorFactory").createEditor(r,n.extend({},t,{parentType:"dataRow",value:o.value,setValue:function(n,t){t&&t.jQueryEvent&&t.jQueryEvent.type==="keydown"&&u.trigger("dxclick",t)}}))}}:i.callBase(t)},_update:function(t){var i=this;t.changeType==="updateSelection"?(i._tableElement.length>0&&n.each(t.itemIndexes||[],function(n,r){var u,e;t.items[r]&&(u=i._getRowElements().eq(r),e=!!t.items[r].isSelected,u.toggleClass(o,e),u.find("."+f).dxCheckBox("option","value",e))}),i._updateCheckboxesClass()):i.callBase(t)},_createTable:function(){var t=this,u=t.option("selection.mode"),r=t.callBase.apply(t,arguments);if(u!=="none")r.on(c.addNamespace("dxhold","dxDataGridRowsView"),"."+h,t.createAction(function(r){var u=t.getController("selection"),f=r.jQueryEvent,e=n(f.target).closest("."+h).index();t.option(i)==="onLongTap"?u.isSelectionWithCheckboxes()?u.stopSelectionWithCheckboxes():u.startSelectionWithCheckboxes():(t.option(i)==="onClick"&&u.startSelectionWithCheckboxes(),u.changeItemSelection(e,{control:!0}))})).on("mousedown selectstart",t.createAction(function(n){var t=n.jQueryEvent;t.shiftKey&&t.preventDefault()}));return r},_createRow:function(n){var t=this.callBase(n);return n&&t.toggleClass(o,!!n.isSelected),t},_rowClick:function(t,i){var r=this,u=n(i.target).closest("."+s).length,f=n(i.target).closest("."+a).length;u||(f||r.getController("selection").changeItemSelection(t,{control:i.ctrlKey,shift:i.shiftKey}),r.callBase(t,i))},_renderCore:function(n){this.callBase(n),this._updateCheckboxesClass()},_updateCheckboxesClass:function(){var n=this.getController("selection"),t=n.isSelectColumnVisible()&&!n.isSelectionWithCheckboxes();this._tableElement&&this._tableElement.toggleClass(l,t)}}}}})}(jQuery,DevExpress),function(n,t){var i=t.ui.dxDataGrid,f=t.utils,e=t.ui.events.addNamespace,h="dx-datagrid-checkbox-size",o="dxDataGridEditorFactory",s=e("focusin dxpointerdown dxclick",o),r="dx-datagrid-focus-overlay",u="dx-focused",c="dx-datagrid-content",l="dx-highlight-outline",a=9;i.EditorFactoryController=i.ViewController.inherit(function(){var i=function(t,i){return n.extend(t,{readOnly:i.readOnly,rtlEnabled:i.rtlEnabled,disabled:i.disabled})},v=function(n,t){return i({placeholder:t.placeholder,width:t.width,value:t.value,onValueChanged:function(i){var r=function(n){t&&t.setValue(n.value)};window.clearTimeout(n._valueChangeTimeoutID),i.jQueryEvent&&i.jQueryEvent.type==="keyup"?n._valueChangeTimeoutID=window.setTimeout(function(){r(i)},f.isDefined(t.updateValueTimeout)?t.updateValueTimeout:0):r(i)},valueChangeEvent:"change"+(t.parentType==="filterRow"?" keyup":"")},t)},p=function(n,r){n.dxDateBox(i({value:r.value,useCalendar:!0,customOverlayCssClass:"dx-datagrid",formatString:t.utils.isString(r.format)&&t.DateTimeFormat[r.format.toLowerCase()]||r.format,formatWidthCalculator:null},r));n.dxDateBox("instance").on("optionChanged",function(n){var t=n.name,i=n.value;t==="value"&&r.setValue(i)})},w=function(n,i){var r=v(n,i),u=i.parentType==="searchPanel",f=function(n){return t.utils.isDefined(n)?n.toString():""};r.value=f(i.value),r.valueChangeEvent+=u?" keyup search":"",r.mode=u?"search":"text",n.dxTextBox(r)},b=function(n,t){var i=v(n,t);i.value=f.isDefined(t.value)?t.value:null,n.dxNumberBox(i)},k=function(t,i){i.parentType==="filterRow"?y(t,n.extend({lookup:{displayExpr:function(n){return n===!0?i.trueText||"true":n===!1?i.falseText||"false":void 0},items:[!0,!1],rtlEnabled:i.rtlEnabled,disabled:i.disabled}},i)):d(t,i)},y=function(n,r){var f=r.lookup,u,e,o=r.parentType==="filterRow";f&&(u=f.items,e=t.data.utils.compileGetter(f.displayExpr),o&&u&&(u=u.slice(0),u.unshift(null)),n.dxSelectBox(i({searchEnabled:!0,value:r.value,valueExpr:r.lookup.valueExpr,showClearButton:f.allowClearing&&!o,displayExpr:function(n){return n===null?r.showAllText:e(n)},items:u,onValueChanged:function(n){r.setValue(n.value,n)}},r)))},d=function(n,t){n.addClass(h).dxCheckBox(i({value:t.value,onValueChanged:function(n){t.setValue&&t.setValue(n.value,n)}},t))},g=function(n,t){var i,r=window.pageXOffset,u=window.pageYOffset;return window.scrollTo(n,t),i=document.elementFromPoint(n-window.pageXOffset,t-window.pageYOffset),window.scrollTo(r,u),i};return{_getFocusedElement:function(n){return n.find("[tabindex]:focus:not(.dx-checkbox):not(.dx-menu):not(.dx-menu-item), input:focus")},_updateFocusCore:function(){var n=this._$focusedElement,t=this.component&&this.component.element();if(t&&(n=this._getFocusedElement(t),n.length&&(n=n.closest(".dx-row > td"),n.length))){this.focus(n);return}this.loseFocus()},_updateFocus:function(t){var i=this,u=t&&t.jQueryEvent&&n(t.jQueryEvent.target).hasClass(r);i._isFocusOverlay=i._isFocusOverlay||u,clearTimeout(i._updateFocusTimeoutID),i._updateFocusTimeoutID=setTimeout(function(){delete i._updateFocusTimeoutID,i._isFocusOverlay||i._updateFocusCore(),i._isFocusOverlay=!1})},_updateFocusOverlaySize:function(n,i){var r=t.calculatePosition(n,i);r.h.oversize>0&&n.outerWidth(n.outerWidth()-r.h.oversize),r.v.oversize>0&&n.outerHeight(n.outerHeight()-r.v.oversize)},callbackNames:function(){return["focused"]},focus:function(i,f){var e=this;if(i===undefined)return e._$focusedElement;i&&setTimeout(function(){var o=e._$focusOverlay=e._$focusOverlay||n("<div>").addClass(r),h,l,s;f?e._$focusOverlay&&e._$focusOverlay.hide():(l=DevExpress.browser.mozilla?"right bottom":"left top",s=i.closest("."+c),o.show().appendTo(s).outerWidth(i.outerWidth()+1).outerHeight(i.outerHeight()+1),h={my:l,at:l,of:i,boundary:s.length&&s},e._updateFocusOverlaySize(o,h),t.position(o,h),o.css("visibility","visible")),e._$focusedElement&&e._$focusedElement.removeClass(u),i.addClass(u),e._$focusedElement=i,e.focused.fire(i)})},resize:function(){var n=this._$focusedElement;n&&this.focus(n)},loseFocus:function(){this._$focusedElement&&this._$focusedElement.removeClass(u),this._$focusedElement=null,this._$focusOverlay&&this._$focusOverlay.hide()},init:function(){this.createAction("onEditorPreparing",{excludeValidators:["designMode","disabled","readOnly"]}),this.createAction("onEditorPrepared",{excludeValidators:["designMode","disabled","readOnly"]}),this._updateFocusHandler=this._updateFocusHandler||this.createAction(n.proxy(this._updateFocus,this));n(document).on(s,this._updateFocusHandler);this._attachContainerEventHandlers()},_attachContainerEventHandlers:function(){var i=this,u=i.component&&i.component.element(),f=t.browser.msie&&parseInt(t.browser.version)<11;if(u){u.on(e("keydown",o),function(n){n.which===a&&i._updateFocusHandler(n)});f&&u.on("dxclick dxpointerup dxpointerdown","."+r+", ."+l,n.proxy(i._focusOverlayEventProxy,i))}},_focusOverlayEventProxy:function(t){var i=n(t.target),u,f=this._$focusedElement,r=i.get(0).className;r&&(i.removeClass(r),u=g(t.pageX,t.pageY),n(u).trigger(jQuery.Event(t.type,{pageX:t.pageX,pageY:t.pageY})),i.addClass(r),f&&f.find("input").focus())},dispose:function(){clearTimeout(this._updateFocusTimeoutID),n(document).off(s,this._updateFocusHandler)},createEditor:function(n,t){this.component._suppressDeprecatedWarnings();var i=this.option("editorPreparing"),r=this.option("editorPrepared");if(this.component._resumeDeprecatedWarnings(),t.rtlEnabled=this.option("rtlEnabled"),t.disabled=t.disabled||this.option("disabled"),t.cancel=!1,t.editorElement=n,i&&i(n,t),this.executeAction("onEditorPreparing",t),!t.cancel){if(t.lookup)y(n,t);else switch(t.dataType){case"date":p(n,t);break;case"boolean":k(n,t);break;case"number":b(n,t);break;default:w(n,t)}r&&r(n,t),this.executeAction("onEditorPrepared",t)}}}}()),i.registerModule("editorFactory",{defaultOptions:function(){return{}},controllers:{editorFactory:i.EditorFactoryController}})}(jQuery,DevExpress),function(n,t,i){var o=t.ui,s=t.utils,r=o.dxDataGrid,u="dx-sort",h="dx-sort-up",c="dx-sort-down",l="dx-sort-alignment-",a="dx-datagrid-text-content",f="dx-datagrid-scroll-container",v="dx-row",y="dx-group-row",p="dx-datagrid-content",e="dx-datagrid-table",w="dx-datagrid-table-fixed";r.createColGroup=function(t){for(var r=n("<colgroup />"),u=t.length,i=0;i<u;i++)n("<col />").width(t[i].visibleWidth||t[i].width).appendTo(r);return r},r.ColumnsView=r.View.inherit({_applySorting:function(t,i,r){function a(n){return n==="right"?"left":"right"}var f,e,o;t.find("."+u).remove(),s.isDefined(i.sortOrder)&&(i.alignment==="center"&&(o=this.option("rtlEnabled")?"right":"left",n("<span />").addClass(u).css("float",o).prependTo(t)),e=i.alignment||"left",f=n("<span />").addClass(u).css("float",r?a(i.alignment):e).toggleClass(h,i.sortOrder==="asc").toggleClass(c,i.sortOrder==="desc"),this.option("showColumnLines")?f.prependTo(t):f.addClass(l+e).appendTo(t))},_updateSortIndicatorPositions:function(t){if(t){var i=t.find("."+u);n.each(i,function(){var t=n(this),i=t.parent(),r=i.find("."+a);t.height("auto"),t.height(r.height()||i.height())})}},_createRow:function(){return n("<tr />").addClass(v)},_createTable:function(i){var f=this,u=n("<table />").addClass(e).addClass(e+"-fixed");if(i&&(u.append(r.createColGroup(i)),t.devices.real().ios&&u.append("<thead><tr><\/tr><\/thead>")),f.option("cellHintEnabled"))u.on("mousemove",".dx-row > td",this.createAction(function(t){var r=t.jQueryEvent,i=n(r.target),u=n(r.currentTarget),e=u.parent(),o=e.hasClass("dx-data-row"),h=e.children(),c=f._columnsController.getVisibleColumns(),l=h.index(u),s=c[l];(!o||o&&s&&!s.cellTemplate)&&(i.removeAttr("title"),i[0].scrollWidth>i[0].clientWidth&&i.attr("title",i.text()))}));return u},_columnOptionChanged:function(t){var f=t.optionNames,i,u;if(r.checkChanges(f,["width","visibleWidth"])){i=this._columnsController.getVisibleColumns(),u=n.map(i,function(n){return n.visibleWidth||n.width||"auto"}),this.setColumnWidths(u);return}this.render()},_getTableElements:function(){return this._tableElement||[]},optionChanged:function(n){this.callBase(n),n.name==="cellHintEnabled"&&this.render()},init:function(){var t=this;t._columnsController=t.getController("columns"),t._dataController=t.getController("data"),t._columnsController.columnsChanged.add(n.proxy(t._columnOptionChanged,t)),t._dataController&&t._dataController.changed.add(n.proxy(t._handleDataChanged,t))},_handleDataChanged:function(){},scrollOffset:function(n){var r=this,u=r.element(),t=u&&u.find("."+f);if(n===i)return t&&t.scrollLeft();r._scrollLeft!==n&&(r._scrollLeft=n,t&&t.scrollLeft(n))},wrapTableInScrollContainer:function(t){return n("<div/>").addClass(p).addClass(f).append(t)},getColumnWidths:function(){var r=this,u,f=[],t,i;return r._tableElement&&(u=r._tableElement.children("tbody").children("tr").filter(":not(."+y+")").first().find("td"),n.each(u,function(r,u){t=n(u).outerWidth(!0),u.getBoundingClientRect&&(i=u.getBoundingClientRect(),i.width>t&&(t=Math.ceil(i.width))),f.push(t)})),f},setColumnWidths:function(n){var r,i,t,u=this._getTableElements();if(n)for(i=0;i<u.length;i++)for(r=u.eq(i).find("col"),t=0;t<n.length;t++)r.eq(t).width(n[t]||"auto")},getColumnElements:function(){},getColumns:function(){},getCell:function(t){var i;if(this._tableElement&&this._tableElement.length===1)return i=this._tableElement[0].rows[t.rowIndex],i?n(i.cells[t.columnIndex]):null},getRowsCount:function(){return this._tableElement&&this._tableElement.length===1?this._tableElement[0].rows.length:0},getBoundingRect:function(){},getName:function(){},tableElement:function(){return this._tableElement}})}(jQuery,DevExpress),function(n,t){var f=t.ui,e=t.utils,i=f.dxDataGrid,o="dx-datagrid-column-chooser",r="dx-datagrid-column-chooser-button",s="column-chooser",u="dx-column-chooser-item",h="dx-column-chooser-message",c="dx-datagrid-drag-action";i.ColumnChooserController=i.ViewController.inherit({renderShowColumnChooserButton:function(t){var i=this,f=i.option("columnChooser.enabled"),u=t.find("."+r);f?u.length?u.show():n("<div />").addClass(r).appendTo(t).dxButton({icon:s,onClick:function(){i.getView("columnChooserView").showColumnChooser()},hint:i.option("columnChooser.title")}):u.hide()},getPosition:function(){var n=this.getView("rowsView");return{my:"right bottom",at:"right bottom",of:n&&n.element(),collision:"fit",offset:"-2 -2",boundaryOffset:"2 2"}}}),i.ColumnChooserView=i.ColumnsView.inherit({_updateItems:function(){var r=this._columnsController.getChooserColumns(),u=this.option("columnChooser"),t=this._popupContainer.content();t.dxScrollable(i.createScrollableOptions(this)),this._renderColumnChooserItems(t,r),r.length||n("<span />").addClass(h).text(u?u.emptyPanelText:"").appendTo(t.dxScrollable("instance").content())},_initializePopupContainer:function(){var t=this,s=t.element().addClass(o),r=t.option("columnChooser"),u=DevExpress.ui.themes.current(),f=u&&u.indexOf("generic")>-1,h=u&&u.indexOf("android5")>-1,i={visible:!1,shading:!1,showCloseButton:!1,buttons:[{text:r.title,toolbar:"top",location:f||h?"before":"center"}],position:t.getController("columnChooser").getPosition(),width:r.width,height:r.height,rtlEnabled:t.option("rtlEnabled"),container:r.container};if(f?n.extend(i,{showCloseButton:!0}):i.buttons[i.buttons.length]={shortcut:"cancel"},e.isDefined(this._popupContainer))this._popupContainer.option(i);else{t._popupContainer=s.dxPopup(i).dxPopup("instance");t._popupContainer.on("optionChanged",function(n){n.name==="visible"&&t.renderCompleted.fire()})}},_renderCore:function(){this._popupContainer&&this._updateItems()},_renderColumnChooserItems:function(t,i){var r=t.dxScrollable("instance"),f=r.content(),e;f.empty(),n.each(i,function(t,i){e=n("<div />").addClass(i.cssClass).addClass(u).toggleClass(c,i.allowHiding).text(i.caption).appendTo(f)}),r.update()},getColumnElements:function(){var n=this._popupContainer&&this._popupContainer.content();return n&&n.find("."+u)},getName:function(){return"columnChooser"},getColumns:function(){return this._columnsController.getChooserColumns()},allowDragging:function(n){return this.isColumnChooserVisible()&&n&&n.allowHiding},getBoundingRect:function(){var i=this,n=i._popupContainer&&i._popupContainer._container(),t;return n&&n.is(":visible")?(t=n.offset(),{left:t.left,top:t.top,right:t.left+n.outerWidth(),bottom:t.top+n.outerHeight()}):null},showColumnChooser:function(){this._popupContainer||(this._initializePopupContainer(),this.render()),this._popupContainer.show()},hideColumnChooser:function(){this._popupContainer&&this._popupContainer.hide()},isColumnChooserVisible:function(){var n=this._popupContainer;return n&&n.option("visible")},publicMethods:function(){return["showColumnChooser","hideColumnChooser"]}}),i.registerModule("columnChooser",{defaultOptions:function(){return{columnChooser:{enabled:!1,width:250,height:260,title:Globalize.localize("dxDataGrid-columnChooserTitle"),emptyPanelText:Globalize.localize("dxDataGrid-columnChooserEmptyText"),container:undefined}}},controllers:{columnChooser:i.ColumnChooserController},views:{columnChooserView:i.ColumnChooserView},extenders:{views:{headerPanel:{_renderShowColumnChooserButton:function(){this.getController("columnChooser").renderShowColumnChooserButton(this.element())},_renderCore:function(){this.callBase(),this._renderShowColumnChooserButton()},optionChanged:function(n){this.callBase(n);switch(n.name){case"columnChooser":this._renderShowColumnChooserButton()}},isVisible:function(){var n=this,t=n.option("columnChooser.enabled");return n.callBase()||t}}}}})}(jQuery,DevExpress),function(n,t){var o=t.ui.dxDataGrid,a=t.ui.events,g=a.addNamespace,v=t.utils,f=o.getIndexByKey,nt="dx-link",ct="dx-state-hover",y="dx-editor-cell",p="dx-selection",w="dx-edit-row",b="dx-edit-button",l="__DX_INSERT_INDEX__",tt="dx-row-removed",it="dx-row-inserted",rt="dx-row-modified",k="dx-cell-modified",d="dx-highlight-outline",ut="dxDataGridEditing",ft="dx-datagrid-focus-overlay",et="dx-datagrid-readonly",ot="dx-data-row",st="dx-checkbox",ht="dx-editor-inline-block",r="batch",u="row",s="cell",e="insert",h="update",c="remove",i=function(n){var t=n.option("editing.editMode");return t===r||t===s?t:u};o.EditingController=o.ViewController.inherit(function(){var a=function(t){return function(i,r){var u=n("<div/>").appendTo(i);t.getController("editorFactory").createEditor(u,n.extend({},r.column,{value:r.value,setValue:r.setValue,parentType:"dataRow",width:null,readOnly:r.setValue===undefined}))}},o=function(n){return n.getController("data")};return{init:function(){var t=this;if(t._insertIndex=1,t._editRowIndex=-1,t._editData=[],t._editColumnIndex=-1,t._columnsController=t.getController("columns"),t.createAction("onInitNewRow",{excludeValidators:["disabled","readOnly"]}),t.createAction("onRowInserting",{excludeValidators:["disabled","readOnly"]}),t.createAction("onRowInserted",{excludeValidators:["disabled","readOnly"]}),t.createAction("onEditingStart",{excludeValidators:["disabled","readOnly"]}),t.createAction("onRowUpdating",{excludeValidators:["disabled","readOnly"]}),t.createAction("onRowUpdated",{excludeValidators:["disabled","readOnly"]}),t.createAction("onRowRemoving",{excludeValidators:["disabled","readOnly"]}),t.createAction("onRowRemoved",{excludeValidators:["disabled","readOnly"]}),!t._saveEditorHandler){t._saveEditorHandler=t.createAction(function(r){var f=r.jQueryEvent,e,c,l,a,o,v,s,h;i(t)!==u&&t.isEditing()&&!t._editCellInProgress&&(c=n(f.target).closest(".dx-overlay-wrapper").length,l=n(f.target).closest(document).length,a=n(f.target).hasClass(ft),h=n(f.target).closest("."+ot).length,e=t._columnsController.getVisibleColumns(),o=n(f.target).closest("td"),s=o[0]&&o[0].cellIndex,v=e[s]&&e[s].allowEditing,h&&(!h||v)||c||a||!l||t.closeEditCell())});n(document).on("dxclick",t._saveEditorHandler)}t._updateEditColumn(),t._updateEditButtons()},getEditMode:function(){return i(this)},getIndexByKey:function(n,t){return f(n,t)},hasChanges:function(){var i=this,t=!1;return n.each(i._editData,function(n,i){t=t||!!i.type}),t},dispose:function(){this.callBase(),n(document).off("dxclick",this._saveEditorHandler)},optionChanged:function(n){n.name==="editing"&&this.init(),this.callBase(n)},publicMethods:function(){return["insertRow","editRow","editCell","closeEditCell","removeRow","saveEditData","recoverRow","undeleteRow","cancelEditData"]},refresh:function(){var n=this._editRowIndex,t=this._editData;i(this)===u||i(this)===s?this.init():(this._editRowIndex=-1,this._editColumnIndex=-1)},isEditing:function(){return this._editRowIndex>-1},isEditRow:function(n){return i(this)===u&&this._editRowIndex===n},isEditCell:function(n,t){return this._editRowIndex===n&&this._editColumnIndex===t},processItems:function(n){var u=this,f=u._editData,i,r,o;for(u.update(),i=0;i<f.length;i++)r=f[i].key,o={key:r},f[i].type===e&&r.pageIndex===u._pageIndex&&(o[l]=r[l],n.splice(r.rowIndex,0,o));return n},processDataItem:function(t,u,o){var a=this,v,y,s,p=t.data[l]?t.data.key:t.key,w=i(a);if(v=f(p,a._editData),v>=0){y=a._editData[v],s=y.data;switch(y.type){case e:t.inserted=!0,t.key=p,t.data=s;break;case h:t.modified=!0,t.data=n.extend(!0,{},t.data,s),t.modifiedValues=o(s,u);break;case c:w===r&&(t.data=n.extend(!0,{},t.data,s)),t.removed=!0}}},insertRow:function(){var n=this,f=o(n),s=n.getView("rowsView"),u={data:{}},t={pageIndex:f.pageIndex(),rowIndex:s?s.getTopVisibleItemIndex():0},h=n._editRowIndex,c=i(n);if(n.refresh(),c!==r){if(n._insertIndex>1)return;n._editRowIndex=t.rowIndex}n.executeAction("onInitNewRow",u),t[l]=n._insertIndex++,n._addEditData({key:t,data:u.data,type:e}),f.updateItems({changeType:"update",rowIndices:[h,t.rowIndex]}),n._afterInsertRow({key:t,data:u.data})},_isEditingStart:function(n){return this.executeAction("onEditingStart",n),n.cancel},editRow:function(n){var t=this,r=o(t),u=r.items(),i=u[n],f={data:i.data,cancel:!1},e=t._editRowIndex;if(n===e)return!0;(i.inserted||(f.key=i.key),t._isEditingStart(f))||(t.init(),t._pageIndex=r.pageIndex(),t._editRowIndex=u[0].inserted?n-1:n,t._addEditData({data:{},key:i.key,oldData:i.data}),r.updateItems({changeType:"update",rowIndices:[e,n]}))},editCell:function(n,t){var r=this,h=o(r),v=h.items(),f=v[n],e={data:f&&f.data,cancel:!1,column:r._columnsController.getVisibleColumns()[t]},c=i(r),y=r._editRowIndex,l=r._editColumnIndex,a=r._columnsController.getVisibleColumns(),p=e.column&&e.column.allowEditing,w=e.column&&e.column.showEditorAlways;return p&&f&&f.rowType==="data"&&!f.removed&&c!==u?r.isEditCell(n,t)?!0:c===s&&!f.inserted&&r.hasChanges()&&(r.saveEditData(),r.hasChanges())?!0:(f.inserted||(e.key=f.key),r._isEditingStart(e))?!0:(r._editRowIndex=n,r._editColumnIndex=t,r._pageIndex=h.pageIndex(),r._addEditData({data:{},key:f.key,oldData:f.data}),w&&(!a[l]||a[l].showEditorAlways)||(r._editCellInProgress=!0,h.updateItems({changeType:"update",rowIndices:[y,r._editRowIndex]})),setTimeout(function(){var t=r.getView("rowsView"),n=t.getCellElement(r._editRowIndex,r._editColumnIndex);n&&n.find("[tabindex], input").focus(),r._editCellInProgress=!1}),!0):!1},removeRow:function(n){var i=this,u=i.option("editing"),s=u&&u.texts,w=s&&s.confirmDeleteTitle,a=u&&u.editMode===r,v=s&&s.confirmDeleteMessage,y=o(i),l,b=i._editRowIndex,h=y.items()[n],p=h&&h.key;h&&(l=function(t){i.refresh();var r=f(t,i._editData);r>=0?i._editData[r].type===e?i._editData.splice(r,1):i._editData[r].type=c:i._addEditData({key:t,oldData:h.data,type:c}),a?y.updateItems({changeType:"update",rowIndices:[b,n]}):i.saveEditData()},a||!v?l(p):t.ui.dialog.confirm(v,w).done(function(n){n&&l(p)}))},recoverRow:function(n){return t.log("W1002","recoverRow","14.1","Use the 'undeleteRow' method instead"),this.undeleteRow(n)},undeleteRow:function(t){var i=this,s=o(i),u=s.items()[t],c=i._editRowIndex,l=u&&u.key,r,e;u&&(r=f(l,i._editData),r>=0&&(e=i._editData[r],n.isEmptyObject(e.data)?i._editData.splice(r,1):e.type=h,s.updateItems({changeType:"update",rowIndices:[c,t]})))},saveEditData:function(){var t=this,s=o(t),l=s.store(),d,g,a=[],v=[],y=t._editRowIndex,b=n.extend({},t._editData),p=i(t),k=function(t,i){n.each(i,function(n,i){var r=f(i,t._editData);r>=0&&t._editData.splice(r,1)})},w=function(n){n._editColumnIndex=-1,n._editRowIndex=-1};if(!t._beforeSaveEditData()){if(n.each(t._editData,function(i,r){var s=r.data,y=r.oldData,o=r.key,p=r.type,f,u;if(!t._beforeSaveEditData(r,i)){switch(p){case c:if(u={data:y,key:o,cancel:!1},t.executeAction("onRowRemoving",u),u.cancel)return;f=l.remove(o);break;case e:if(u={data:s,cancel:!1},t.executeAction("onRowInserting",u),u.cancel)return;f=l.insert(u.data);break;case h:if(u={newData:s,oldData:y,key:o,cancel:!1},t.executeAction("onRowUpdating",u),u.cancel)return;f=l.update(o,u.newData)}f&&(f.done(n.proxy(a.push,a,o)),v.push(f))}}),v.length){n.when.apply(n,v).always(function(i){var u=i&&i.name==="Error";u&&(s.dataErrorOccurred.fire(i),p!==r)||(k(t,a),w(t),n.when(s.refresh()).always(function(){n.each(b,function(r,f){var s=f.data,l=f.key,a=f.type,o={key:l,data:s};u&&(o.error=i);switch(a){case c:t.executeAction("onRowRemoved",n.extend({},o,{data:f.oldData}));break;case e:t.executeAction("onRowInserted",o);break;case h:t.executeAction("onRowUpdated",o)}}),t._afterSaveEditData()}))});return}p===u?t.hasChanges()||t.cancelEditData():(w(t),s.updateItems(y>=0&&{changeType:"update",rowIndices:[y]})),t._afterSaveEditData()}},_updateEditColumn:function(){var n=this,t=n.option("editing"),r=t&&((t.editEnabled||t.insertEnabled)&&i(n)===u||t.removeEnabled);n._columnsController.addCommandColumn({command:"edit",visible:r,cssClass:"dx-command-edit",width:"auto"}),n._columnsController.columnOption("command:edit","visible",r)},_updateEditButtons:function(){var n=this,t=n._saveChangesButton,i=n._cancelChangesButton,r=n.hasChanges();t&&t.option("disabled",!r),i&&i.option("disabled",!r)},cancelEditData:function(){var n=this,t=o(n);n._beforeCancelEditData(),n.init(),t.updateItems()},closeEditCell:function(){var n=this,t=n._editRowIndex,r=o(n);setTimeout(function(){i(n)===s&&n.hasChanges()?n.saveEditData():t>=0&&(n._editRowIndex=-1,n._editColumnIndex=-1,r.updateItems({changeType:"update",rowIndices:[t]}))})},update:function(){var n=this,t=o(n);n._pageIndex!==t.pageIndex()&&(n.refresh(),n._pageIndex=t.pageIndex()),n._updateEditButtons()},updateFieldValue:function(n,t){var i=this,r={},u=n.key,f=n.cellElement,o=n.column.dataField,s=n.column.serializeValue?n.column.serializeValue(t):t,e;u!==undefined&&(f&&f.addClass(k),n.value=t,r[o]=s,e={data:r,key:u,type:h},i._addEditData(e),i._updateEditButtons())},_addEditData:function(t){var i=this,r=f(t.key,i._editData);return r<0&&(r=i._editData.length,i._editData.push(t)),i._editData[r]&&(t.type=i._editData[r].type||t.type,n.extend(!0,i._editData[r],{data:t.data,type:t.type})),r},getColumnTemplate:function(t){var r=this,f=t.column,l=t.row&&t.row.rowIndex,h,o,e,p=r.option("editing.editEnabled"),s=i(r)===u,c=r.isEditRow(l),y=r.isEditCell(l,t.columnIndex);return(f.showEditorAlways||f.allowEditing&&f.dataField&&(c||y))&&t.rowType==="data"&&!v.isDefined(f.command)?((p||c||y)&&(s&&c||!s)&&(t.setValue=function(n){r.updateFieldValue(t,n)}),h=f.editCellTemplate||a(r)):f.command==="edit"&&(h=function(t,i){var u=function(t,i,u,f){var e=n("<a />").addClass(nt).text(i).on(g("dxclick",ut),r.createAction(function(n){var t=n.jQueryEvent;t.stopPropagation(),setTimeout(function(){f.row&&r[u](f.row.rowIndex)})}));f.rtlEnabled?t.prepend(e,"&nbsp;"):t.append(e,"&nbsp;")};t.css("text-align","center"),i.rtlEnabled=r.option("rtlEnabled"),o=r.option("editing")||{},e=o.texts||{},i.row&&i.row.rowIndex===r._editRowIndex&&s?(u(t,e.saveRowChanges,"saveEditData",i),u(t,e.cancelRowChanges,"cancelEditData",i)):(o.editEnabled&&s&&u(t,e.editRow,"editRow",i),o.removeEnabled&&(i.row.removed?u(t,e.undeleteRow,"undeleteRow",i):u(t,e.deleteRow,"removeRow",i)))}),h},renderEditButtons:function(t){var u=this,s=t.find("."+b),f=u.option("editing")||{},e=u.option("editing.texts")||{},h={cancel:e.cancelAllChanges,save:e.saveAllChanges,addrow:e.addRow},o=function(t,i,r){return n("<div />").addClass(b).addClass("dx-datagrid-"+i+"-button").appendTo(t).dxButton({icon:"edit-button-"+i,onClick:function(n){var t=n.jQueryEvent;t.stopPropagation(),u[r]()},hint:h&&h[i]}).dxButton("instance")};s.length&&s.remove(),(f.editEnabled||f.insertEnabled||f.removeEnabled)&&i(u)===r&&(u._cancelChangesButton=o(t,"cancel","cancelEditData"),u._saveChangesButton=o(t,"save","saveEditData"),u._updateEditButtons()),f.insertEnabled&&o(t,"addrow","insertRow")},createHighlightCell:function(t){var i=t.find("."+d);i.length||t.wrapInner(n("<div>").addClass(d))},_afterInsertRow:function(){},_beforeEditCell:function(){},_beforeSaveEditData:function(){},_afterSaveEditData:function(){},_beforeCancelEditData:function(){}}}()),o.registerModule("editing",{defaultOptions:function(){return{editing:{editMode:"row",insertEnabled:!1,editEnabled:!1,removeEnabled:!1,texts:{editRow:Globalize.localize("dxDataGrid-editingEditRow"),saveAllChanges:Globalize.localize("dxDataGrid-editingSaveAllChanges"),saveRowChanges:Globalize.localize("dxDataGrid-editingSaveRowChanges"),cancelAllChanges:Globalize.localize("dxDataGrid-editingCancelAllChanges"),cancelRowChanges:Globalize.localize("dxDataGrid-editingCancelRowChanges"),addRow:Globalize.localize("dxDataGrid-editingAddRow"),deleteRow:Globalize.localize("dxDataGrid-editingDeleteRow"),recoverRow:Globalize.localize("dxDataGrid-editingUndeleteRow"),undeleteRow:Globalize.localize("dxDataGrid-editingUndeleteRow"),confirmDeleteMessage:Globalize.localize("dxDataGrid-editingConfirmDeleteMessage"),confirmDeleteTitle:Globalize.localize("dxDataGrid-editingConfirmDeleteTitle")}}}},controllers:{editing:o.EditingController},extenders:{controllers:{data:{init:function(){this._editingController=this.getController("editing"),this.callBase()},reload:function(){return this._editingController.refresh(),this.callBase()},_processItems:function(n,t){return n=this._editingController.processItems(n,t),this.callBase(n,t)},_processDataItem:function(n,t){return this._editingController.processDataItem(n,t.visibleColumns,this._generateDataValues),this.callBase(n,t)}}},views:{rowsView:{_getColumnTemplate:function(n){var t=this,i=t.getController("editing").getColumnTemplate(n);return i||t.callBase(n)},_createTable:function(){var n=this,t=n.option("editing"),i=n.callBase.apply(n,arguments);if(t&&t.editMode!==u&&t.editEnabled)i.on(a.addNamespace("dxhold","dxDataGridRowsView"),"td:not(."+y+")",n.createAction(function(){var i=n.getController("editing");i.isEditing()&&i.closeEditCell()}));return i},_createRow:function(n){var t=this.callBase(n),o,u,f,e,s;return n&&(o=this.getController("editing"),u=o.isEditRow(n.rowIndex),f=!!n.removed,e=!!n.inserted,s=!!n.modified,i(this)===r?t.toggleClass(tt,f):t.toggleClass(w,u),t.toggleClass(it,e),t.toggleClass(rt,s),(u||e||f)&&t.removeClass(p)),t},_rowClick:function(t,i){var r=this,u=r.getController("editing"),f=n(i.target).closest("td"),e=f.length?f[0].cellIndex:-1,o=r.option("editing.editEnabled");o&&u.editCell(t,e)||u.isEditRow(t)||r.callBase(t,i)},_cellPrepared:function(n,t){var u=t.row&&(t.row.inserted?t.row.values:t.row.modifiedValues),o=t.columnIndex,f=t.column.alignment,i=this.getController("editing"),e=i.getEditMode();t.isEditing=i.isEditCell(t.rowIndex,t.columnIndex)||i.isEditRow(t.rowIndex)&&t.column.allowEditing,!v.isDefined(t.column.command)&&(t.isEditing||t.column.showEditorAlways)&&(n.addClass(y).toggleClass(et,!t.setValue),f&&n.find("input").first().css("text-align",f)),n.children("."+st).length===1&&n.addClass(ht),(e===r||e===s&&t.row.inserted)&&(u&&u[o]!==undefined&&t.column&&t.column.allowEditing?(i.createHighlightCell(n),n.addClass(k)):t.setValue&&i.createHighlightCell(n,!0)),this.callBase.apply(this,arguments)},_update:function(n){this.callBase(n),n.changeType==="updateSelection"&&this._tableElement.children("tbody").children("."+w).removeClass(p)}},headerPanel:{_renderCore:function(){this.callBase(),this.getController("editing").renderEditButtons(this.element())},isVisible:function(){var t=this,n=t.getController("editing").option("editing");return t.callBase()||n&&(n.insertEnabled||(n.editEnabled||n.removeEnabled)&&n.editMode===r)}}}}})}(jQuery,DevExpress),function(n,t){var i=t.ui.dxDataGrid,r=t.utils,e="dx-datagrid-invalid",l="dx-highlight-outline",o="dx-invalid-message",s="dx-invalid-message-always",u="__DX_INSERT_INDEX__",h="row",f="batch",c="cell",a="insert";i.ValidatingController=i.Controller.inherit(function(){return{init:function(){this._editingController=this.getController("editing"),this.createAction("onRowValidating")},_rowValidating:function(n,t){var i=this,u=t.brokenRules||t.brokenRule&&[t.brokenRule],f=i.getController("data").items(),r={brokenRules:u,isValid:t.isValid,key:n.key,newData:n.data,oldData:n.oldData,errorText:null};return i.executeAction("onRowValidating",r),{isValid:r.isValid,errorText:r.errorText,rowIndex:i._editingController.getIndexByKey(n.key,f),brokenRules:u}},validate:function(t){var i=this,r=!0,u=i._editingController,t=t||u.getEditMode()===h,f,e;return i._isValidationInProgress?!1:(i._isValidationInProgress=!0,t?n.each(u._editData,function(t,f){var e;f.type&&(e=i.validateGroup(f),e.isValid||n.each(e.brokenRules,function(){this.validator.option("adapter").getValue()===undefined&&u.updateFieldValue({key:f.key,column:this.column},null,!0)}),r=r&&e.isValid)}):i._currentCellValidator&&(f=i._currentCellValidator._findGroup(),e=i._currentCellValidator.validate(),r=i._rowValidating(f,e).isValid),i._isValidationInProgress=!1,r)},validateGroup:function(i){var f=this,e=t.validationEngine.getGroupConfig(i),r,u={isValid:!0};return e&&(r=t.validationEngine.validateGroup(i),n.extend(!0,u,f._rowValidating(i,r))),u},updateEditData:function(n){this.setDisableApplyValidationResults(!0),n.isValid=t.validationEngine.getGroupConfig(n)?t.validationEngine.validateGroup(n).isValid:!0,this.setDisableApplyValidationResults(!1)},setValidator:function(n){this._currentCellValidator=n},getValidator:function(){return this._currentCellValidator},removeValidators:function(i){var u=this,f=u._editingController;n.each(f._editData,function(n,u){var e=t.validationEngine.getGroupConfig(u),o,f;if((!r.isDefined(i)||i===n)&&e)for(f=0;f<e.validators.length;f++)e.validators[f]._dispose(),f--})},createValidator:function(i,r){var s=this,u=s._editingController,f=i.column,h,o=u.getIndexByKey(i.key,u._editData),c=function(n){n.brokenRule&&(n.brokenRule.columnIndex=f.index,n.brokenRule.column=f),r&&!s.getDisableApplyValidationResults()&&(n.isValid||u.createHighlightCell(r,!0),r.toggleClass(e,!n.isValid))};return o<0&&f.showEditorAlways&&(o=u._addEditData({key:i.key})),o>=0?(h=u._editData[o],new t.ui.dxValidator(r||{},{name:f.caption,validationRules:n.extend(!0,[],f.validationRules),validationGroup:h,adapter:{getValue:function(){return i.value},applyValidationResults:c}})):void 0},setDisableApplyValidationResults:function(n){this._disableApplyValidationResults=n},getDisableApplyValidationResults:function(){return this._disableApplyValidationResults}}}()),i.registerModule("validating",{defaultOptions:function(){return{}},controllers:{validating:i.ValidatingController},extenders:{controllers:{data:{reload:function(){var n=this.callBase(),t=this.getController("editing");return n.done(function(){t.resetRowAndPageIndeces(!0)})}},editing:{_addEditData:function(n){var t=this,u=t.getController("validating"),i=t.getIndexByKey(n.key,t._editData),r;return i>=0&&(r=t._editData[i],u.updateEditData(r)),t.callBase(n)},_updateRowAndPageIndeces:function(){var t=this,i=t.getView("rowsView").getTopVisibleItemIndex(),r=i;n.each(t._editData,function(n,u){u.isValid||u.pageIndex===t._pageIndex||(u.pageIndex=t._pageIndex,u.rowIndex=u.type==="insert"?i:r,r++)})},resetRowAndPageIndeces:function(t){var i=this;n.each(i._editData,function(n,r){(r.pageIndex!==i._pageIndex||t)&&(delete r.pageIndex,delete r.rowIndex)})},init:function(){var t=this;t.callBase(),t.getController("data").changed.add(function(i){t.option("scrolling.mode")==="standard"&&t.resetRowAndPageIndeces(),n.each(t._editData,function(n,t){i&&i.changeType==="prepend"&&(t.rowIndex+=i.items.length)})})},processItems:function(t,r){var e=this,l=e.getController("data"),o,s=e._editData,h=t.length,c=0,a=function(t,r){var u=-1,f=t.type==="insert",e=t.key;return n.each(r,function(n,t){if(i.equalKeys(e,f?t:l.keyOf(t)))return u=n,!1}),u},v=function(n){var f={key:n.key},i=a(n,t),r;i>=0&&e.option("scrolling.mode")==="standard"||(n.rowIndex=n.rowIndex>h?n.rowIndex%h:n.rowIndex,r=n.rowIndex,f[u]=1,i>=0&&(t.splice(i,1),r-=c),t.splice(r,0,f),c++)};if(e.update(),e.getEditMode()===f&&r!=="prepend"&&r!=="append")for(o=0;o<s.length;o++)s[o].type&&s[o].pageIndex===e._pageIndex&&s[o].key.pageIndex!==e._pageIndex&&v(s[o]);return e.callBase(t,r)},processDataItem:function(t){var o=this,h,s,l=t.data[u],c=l?t.data.key:t.key,a=o.getEditMode();a===f&&l&&c&&(h=i.getIndexByKey(c,o._editData),h>=0&&(s=o._editData[h],s.type!=="insert"&&(t.data=n.extend(!0,{},s.oldData,s.data),t.key=c))),o.callBase.apply(o,arguments)},saveEditData:function(){this._updateRowAndPageIndeces(),this.callBase()},_afterInsertRow:function(t){var i=this.getController("validating"),u=this.getController("columns").getHiddenColumns();n.each(u,function(n,u){r.isArray(u.validationRules)&&i.createValidator({column:u,key:t.key,value:t.data[u.dataField]})}),this.callBase(t)},_beforeSaveEditData:function(n,t){var i=this,u,o,f=i.callBase.apply(i,arguments),e=i.getController("validating");return n?(n.isValid===undefined&&e.updateEditData(n),u=n.type==="remove"||n.isValid,u?e.removeValidators(t):r.isDefined(i._hasInvalidRules)&&(i._hasInvalidRules=!0),f=f||!u):i.getEditMode()===c&&(u=e.validate(),o=e.validate(!0),u&&i._hasInvalidRules?(i.cancelEditData(),i._hasInvalidRules=!1,f=!0):o||(i._hasInvalidRules=!0,f=!0)),f},_afterSaveEditData:function(){this.getController("validating").validate(!0)},_beforeCancelEditData:function(){var n=this.getController("validating");n.removeValidators(),this.callBase()},createHighlightCell:function(n,t){var r=!0,i;t||(i=n.data("dxValidator"),i&&(r=i.validate().isValid)),r&&this.callBase(n)},updateFieldValue:function(n,t,i){var r=this,u=r.getEditMode();r.callBase.apply(r,arguments),i||(r._hasInvalidRules=!1)}},editorFactory:{loseFocus:function(n){n||this.getController("validating").setValidator(null),this.callBase()},focus:function(t){var f=this,h=!1,u=f.getView("rowsView"),i=t&&t.closest("td"),e=i&&i.data("dxValidator"),v=f.getController("validating"),l=i&&i.closest(".dx-datagrid-rowsview").find(".dx-tooltip"),y=i&&f.getController("columns").getVisibleColumns()[i.index()],a,c,r;return l&&l.remove(),e&&(a=e.option("adapter").getValue(),v.setValidator(e),a!==undefined&&(c=e.validate(),c.isValid||(r=y.alignment,h=!0,n("<div/>").addClass(o).addClass(s).text(c.brokenRule.message).appendTo(i).dxTooltip({target:i,container:i,visible:!0,closeOnOutsideClick:!1,closeOnTargetScroll:!1,arrowPosition:{offset:r==="left"?"5 0":"-5 0",my:"bottom "+r,at:"top "+r},position:{collision:"fit flip",boundary:u.element(),boundaryOffset:"0 0",offset:"0 -9",my:"top "+r,at:"bottom "+r},onPositioned:function(){u.element()&&u.updateFreeSpaceRowHeight()}})))),!h&&u.element()&&u.updateFreeSpaceRowHeight(),f.callBase(t,h)}}},views:{rowsView:{updateFreeSpaceRowHeight:function(){var t=this,r=t._getRowElements(),n=t._getFreeSpaceRowElement(),i=t.element().find(".dx-invalid-message .dx-overlay-content");t.callBase(),i.length&&n&&r.length===1&&(!n.is(":visible")||i.outerHeight()>n.outerHeight())&&(n.show(),n.height(i.outerHeight()))},_cellPrepared:function(n,t){var i=this.getController("validating"),u=t.column;r.isArray(u.validationRules)&&i.createValidator(t,n),this.callBase.apply(this,arguments)}}}}})}(jQuery,DevExpress),function(n,t,i){var u=t.ui,r=u.dxDataGrid,f=t.utils;r.proxyMethod=function(n,t,i){n[t]||(n[t]=function(){var n=this._dataSource;return n?n[t].apply(n,arguments):i})},r.DataController=r.Controller.inherit({}).include(u.DataHelperMixin).inherit(function(){var u={init:function(){var t=this;t._items=[],t._columnsController=t.getController("columns"),t._columnsChangedHandler=n.proxy(t._handleColumnsChanged,t),t._dataChangedHandler=n.proxy(t._handleDataChanged,t),t._loadingChangedHandler=n.proxy(t._handleLoadingChanged,t),t._loadErrorHandler=n.proxy(t._handleLoadError,t),t._customizeStoreLoadOptionsHandler=n.proxy(t._handleCustomizeStoreLoadOptions,t),t._columnsController.columnsChanged.add(t._columnsChangedHandler),t._isLoading=!1,t._isCustomLoading=!1,t._refreshDataSource(),t.createAction("onDataErrorOccurred"),t.dataErrorOccurred.add(function(n){return t.executeAction("onDataErrorOccurred",{error:n})})},callbackNames:function(){return["changed","loadingChanged","dataErrorOccurred","pageIndexChanged","pageSizeChanged","filterChanged","dataSourceChanged"]},callbackFlags:function(n){if(n==="dataErrorOccurred")return"stopOnFalse"},publicMethods:function(){return["beginCustomLoading","endCustomLoading","refresh","filter","clearFilter","combinedFilter","keyOf","byKey","getDataByKeys","pageIndex","pageSize","pageCount","totalCount","_disposeDataSource","getKeyByRowIndex","getRowIndexByKey"]},optionChanged:function(n){var t=this;switch(n.name){case"dataSource":case"scrolling":case"rtlEnabled":case"paging":t._columnsController.reset(),t._refreshDataSource();break;case"onDataErrorOccurred":t.createAction("onDataErrorOccurred")}},isReady:function(){return!this._isLoading},_combineFilters:function(n,t){var i=[],r;for(t=t||"and",r=0;r<n.length;r++)n[r]&&(i.length&&i.push(t),i.push(n[r]));return i.length===1&&(i=i[0]),i.length?i:void 0},combinedFilter:function(n){var t=this,r=t._dataSource,u=t._columnsController,f;return r&&(n===i&&(n=r.filter()),f=t._calculateAdditionalFilter(),f&&(u.isDataSourceApplied()||u.isAllDataTypesDefined())&&(n=t._combineFilters([f,n])),u.updateFilter(r,n)),n},_handleCustomizeStoreLoadOptions:function(n){var i=this._columnsController,r=this._dataSource,t=n.storeLoadOptions;t.filter=this.combinedFilter(t.filter),i.isDataSourceApplied()||i.updateColumnDataTypes(r),this._columnsUpdating=!0,i.updateSortingGrouping(r,!this._isFirstLoading),this._columnsUpdating=!1,t.sort=i.getSortDataSourceParameters(),t.group=i.getGroupDataSourceParameters(),r.sort(t.sort),r.group(t.group),this._isFirstLoading=!1},_handleColumnsChanged:function(n){var t=this,e=n.changeTypes,u=n.optionNames,o,s=function(){t._columnsController.columnsChanged.remove(s),t.updateItems()};e.sorting||e.grouping?t._dataSource&&!t._columnsUpdating&&(t._dataSource.group(t._columnsController.getGroupDataSourceParameters()),t._dataSource.sort(t._columnsController.getSortDataSourceParameters()),t.reload()):e.columns&&((u.filterValue||u.selectedFilterOperation)&&this.option("filterRow.applyFilter")!=="onClick"&&(o=t._columnsController.columnOption(n.columnIndex,"filterValue"),(n.columnIndex===i||f.isDefined(o)||!u.selectedFilterOperation||u.filterValue)&&t._applyFilter()),t._needApplyFilter||r.checkChanges(u,["width","visibleWidth","filterValue","selectedFilterOperation"])||t._columnsController.columnsChanged.add(s))},_handleDataChanged:function(i){var r=this,u=r._dataSource,f=r._columnsController,e=f.isAllDataTypesDefined();u&&!r._isDataSourceApplying&&(r._isDataSourceApplying=!0,n.when(r._columnsController.applyDataSource(u)).done(function(){r._isLoading&&r._handleLoadingChanged(!1),r._isDataSourceApplying=!1;var n=r._calculateAdditionalFilter(),u=r._needApplyFilter;r._needApplyFilter=!1,u&&n&&n.length&&!e?(t.log("W1005",r.component.NAME),r._applyFilter()):r.updateItems(i)}),r._isDataSourceApplying&&r._handleLoadingChanged(!0),r._needApplyFilter=!r._columnsController.isDataSourceApplied())},_handleLoadingChanged:function(n){this._isLoading=n,this._fireLoadingChanged()},_handleLoadError:function(n){this.dataErrorOccurred.fire(n)},_dataSourceOptions:function(){return{_preferSync:!0}},_initDataSource:function(){var n=this,c=n._columnsController,l,a,t=this.option("dataSource"),r=this.option("paging.pageIndex"),u=this.option("paging.pageSize"),f=n.option("scrolling.mode"),e=this.option("paging.enabled"),o=f==="infinite",s=f==="virtual",h=this._dataSource;n.callBase(),t=n._dataSource,n._dataSource=h,n._isFirstLoading=!0,t&&(t.requireTotalCount(!o),e!==i&&t.paginate(e||s||o),u!==i&&t.pageSize(u),r!==i&&t.pageIndex(r),n.setDataSource(t))},_loadDataSource:function(){var n=this._dataSource;n&&n.load()},_processItems:function(t){var r=this,e=r._columnsController.getVisibleColumns(),o={visibleColumns:e,dataIndex:0},u=[];return n.each(t,function(n,t){f.isDefined(t)&&(t=r._processItem(t,o),u.push(t))}),u},_processItem:function(n,t){return n=this._generateDataItem(n),n=this._processDataItem(n,t),n.dataIndex=t.dataIndex++,n},_generateDataItem:function(n){return{rowType:"data",data:n,key:this.keyOf(n)}},_processDataItem:function(n,t){return n.values=this._generateDataValues(n.data,t.visibleColumns),n},_generateDataValues:function(t,i){var r=[];return n.each(i,function(){var n=null;this.command?n=null:this.calculateCellValue?n=this.calculateCellValue(t):this.dataField&&(n=t[this.dataField]),r.push(n)}),r},_updateItemsCore:function(t){var i=this,u,c=i._dataSource,l=[],o=t.changeType,f,s,e,h;if(c){u=t.items||c.items(),u=i._processItems(u.slice(0),o),t.items=u,t.changeType=o||"refresh";switch(o){case"prepend":i._items.unshift.apply(i._items,u);break;case"append":i._items.push.apply(i._items,u);break;case"update":for(f=t.rowIndices.slice(0),s=0,f.sort(function(n,t){return n-t}),e=0;e<f.length;e++)(f[e]<0||f[e-1]===f[e])&&(f.splice(e,1),e--);t.items=[],t.rowIndices=[],t.changeTypes=[],h=function(n,t){return r.equalKeys(n.key,t.key)&&n.rowType===t.rowType},n.each(f,function(n,r){var e,f,c,l;r+=s,t.rowIndices.push(r),e=i._items[r],c=i._items[r+1],f=u[r],l=u[r+1],f&&t.items.push(f),e&&f&&h(e,f)?(o="update",i._items[r]=f,e.visible!==f.visible&&t.items.splice(-1,1,{visible:f.visible})):f&&!e||l&&h(e,l)?(o="insert",i._items.splice(r,0,f),s++):(e&&!f||c&&h(f,c))&&(o="remove",i._items.splice(r,1),s--),t.changeTypes.push(o)});break;default:i._items=u.slice(0)}n.each(i._items,function(n,t){t.rowIndex=n})}},updateItems:function(n){var t=this;n=n||{},t._dataSource&&t._columnsController.isDataSourceApplied()&&(t._updateItemsCore(n),t.changed.fire(n))},isLoading:function(){return this._isLoading||this._isCustomLoading},_fireLoadingChanged:function(n){this.loadingChanged.fire(this.isLoading(),n)},_calculateAdditionalFilter:function(){return null},_applyFilter:function(){var t=this,i=t._dataSource;if(i)return i.pageIndex(0),t.reload().done(n.proxy(t.filterChanged,"fire"))},filter:function(n){var t=this._dataSource;if(arguments.length===0)return t?t.filter():i;n=arguments.length>1?Array.prototype.slice.call(arguments,0):n,t&&t.filter(n),this._applyFilter()},clearFilter:function(){this.filter(null)},_fireDataSourceChanged:function(){var n=this,t=function(){n.changed.remove(t),n.dataSourceChanged.fire()};n.changed.add(t)},_getDataSourceAdapterType:function(n){return n&&n.filtering&&n.sorting&&n.paging?r.DataSourceAdapterServer:r.DataSourceAdapterClient},_createDataSourceAdapterCore:function(n,i){var u,r;return i==="auto"&&(i=!(n.store()instanceof t.data.ArrayStore)),i===!0&&(i={filtering:!0,sorting:!0,paging:!0}),u=this._getDataSourceAdapterType(i),r=new u(this.component),r.init(n,i),r},_createDataSourceAdapter:function(n){var t=this.option("remoteOperations");return this._createDataSourceAdapterCore(n,t)},setDataSource:function(n){var t=this;t._dataSource&&(t._dataSource.changed.remove(t._dataChangedHandler),t._dataSource.loadingChanged.remove(t._loadingChangedHandler),t._dataSource.loadError.remove(t._loadErrorHandler),t._dataSource.customizeStoreLoadOptions.remove(t._customizeStoreLoadOptionsHandler),t._dataSource.dispose()),n&&(n=t._createDataSourceAdapter(n)),t._dataSource=n,n&&(t._fireDataSourceChanged(),t._isLoading=!n.isLoaded(),t._needApplyFilter=!0,n.changed.add(t._dataChangedHandler),n.loadingChanged.add(t._loadingChangedHandler),n.loadError.add(t._loadErrorHandler),n.customizeStoreLoadOptions.add(t._customizeStoreLoadOptionsHandler))},items:function(){return this._items},pageCount:function(){return this._dataSource?this._dataSource.pageCount():1},dataSource:function(){return this._dataSource},store:function(){var n=this._dataSource;return n&&n.store()},getKeyByRowIndex:function(n){var t=this.items()[n];if(t)return t.key},getRowIndexByKey:function(n){return r.getIndexByKey(n,this.items())},keyOf:function(n){var t=this.store();if(t)return t.keyOf(n)},byKey:function(t){var i=this.store(),r=this.getRowIndexByKey(t),u;if(i)return r>=0&&(u=n.Deferred().resolve(this.items()[r].data)),u||i.byKey(t)},getDataByKeys:function(t){var f=this,i=n.Deferred(),r=[],u=[];return n.each(t,function(n,t){r.push(f.byKey(t).done(function(t){u[n]=t}))}),n.when.apply(n,r).always(function(){i.resolve(u)}),i},pageIndex:function(t){var u=this,r=u._dataSource;return r?t!==i&&r.pageIndex()!==t?(r.pageIndex(t),r.load().done(n.proxy(u.pageIndexChanged,"fire"))):r.pageIndex():0},pageSize:function(t){var u=this,f=u.option("paging"),r=u._dataSource;return t===i?r?r.pageSize():0:r?(r.pageIndex(0),r.pageSize(t),f&&(f.pageSize=t),r.reload().done(n.proxy(u.pageSizeChanged,"fire"))):void 0},beginCustomLoading:function(n){this._isCustomLoading=!0,this._fireLoadingChanged(n)},endCustomLoading:function(){this._isCustomLoading=!1,this._fireLoadingChanged()},refresh:function(){var i=this,t=n.Deferred();return n.when(this._columnsController.refresh()).always(function(){n.when(i.reload()).done(t.resolve).fail(t.reject)}),t},dispose:function(){var n=this,t=n._dataSource;n.callBase(),t&&(t.changed.remove(n._dataChangedHandler),t.loadingChanged.remove(n._loadingChangedHandler))}};return r.proxyMethod(u,"load"),r.proxyMethod(u,"reload"),r.proxyMethod(u,"itemsCount",0),r.proxyMethod(u,"totalItemsCount",0),r.proxyMethod(u,"hasKnownLastPage",!0),r.proxyMethod(u,"isLoaded",!1),r.proxyMethod(u,"totalCount",0),u}()),r.registerModule("data",{defaultOptions:function(){return{loadingTimeout:0,dataSource:null,onDataErrorOccurred:null,remoteOperations:"auto"}},controllers:{data:u.dxDataGrid.DataController}})}(jQuery,DevExpress),function(n,t){var r=t.ui,i=r.dxDataGrid,u=t.utils;i.DataSourceAdapterServer=i.Controller.inherit(function(){return{init:function(t,i){var r=this;r._dataSource=t,r._remoteOperations=i,r._isLastPage=!t.isLastPage(),r._hasLastPage=!1,r._currentTotalCount=0,r.changed=n.Callbacks(),r.loadingChanged=n.Callbacks(),r.loadError=n.Callbacks(),r.customizeStoreLoadOptions=n.Callbacks(),r._dataChangedHandler=n.proxy(r._handleDataChanged,r),r._dataLoadingHandler=n.proxy(r._handleDataLoading,r),r._dataLoadedHandler=n.proxy(r._handleDataLoaded,r),r._loadingChangedHandler=n.proxy(r._handleLoadingChanged,r),r._loadErrorHandler=n.proxy(r._handleLoadError,r);t.on("changed",r._dataChangedHandler);t.on("customizeStoreLoadOptions",r._dataLoadingHandler);t.on("customizeLoadResult",r._dataLoadedHandler);t.on("loadingChanged",r._loadingChangedHandler);t.on("loadError",r._loadErrorHandler);n.each(t,function(t,i){!r[t]&&n.isFunction(i)&&(r[t]=function(){return this._dataSource[t].apply(this._dataSource,arguments)})})},dispose:function(){var n=this,t=n._dataSource;t.off("changed",n._dataChangedHandler),t.off("customizeStoreLoadOptions",n._dataLoadingHandler),t.off("customizeLoadResult",n._dataLoadedHandler),t.off("loadingChanged",n._loadingChangedHandler),t.off("loadError",n._loadErrorHandler),t.dispose()},refresh:function(n,t){var i=this,r=i._dataSource;t&&(i._currentTotalCount=0,i._isLastPage=!r.paginate(),i._hasLastPage=i._isLastPage)},_handleDataLoading:function(t){var i=this,r;i.customizeStoreLoadOptions.fire(t),t.delay=this.option("loadingTimeout"),t.originalStoreLoadOptions=t.storeLoadOptions,r=!i.isLoaded()&&!i._isRefreshing,i._isRefreshing=!0,n.when(i.refresh(t.storeLoadOptions,r)).always(function(){i._lastOperationId===t.operationId&&i.load(),i._isRefreshing=!1}),i._dataSource.cancel(i._lastOperationId),i._lastOperationId=t.operationId,i._isRefreshing&&i._dataSource.cancel(i._lastOperationId)},_handleDataLoaded:function(n){n.storeLoadOptions=n.originalStoreLoadOptions},_handleLoadingChanged:function(n){this.loadingChanged.fire(n)},_handleLoadError:function(n){this.changed.fire({changeType:"loadError",error:n}),this.loadError.fire(n)},_handleDataChanged:function(n){var t=this,u,i=t._dataSource,r=t.itemsCount();t._isLastPage=!r||!t.pageSize()||r<t.pageSize(),t._isLastPage&&(t._hasLastPage=!0),i.totalCount()>=0?i.pageIndex()>=t.pageCount()&&(i.pageIndex(t.pageCount()-1),i.load()):(u=i.pageIndex()*t.pageSize()+r,t._currentTotalCount=Math.max(t._currentTotalCount,u),r===0&&i.pageIndex()>=t.pageCount()&&(i.pageIndex(t.pageCount()-1),i.load())),i.isLoading()||this.changed.fire(n)},isLastPage:function(){return this._isLastPage},totalCount:function(){return parseInt(this._currentTotalCount||this._dataSource.totalCount())},itemsCount:function(){return this._dataSource.items().length},totalItemsCount:function(){return this.totalCount()},pageSize:function(){var n=this._dataSource;return!arguments.length&&!n.paginate()?0:n.pageSize.apply(n,arguments)},pageCount:function(){var n=this,t=n.totalItemsCount(),i=n.pageSize();return i&&t>0?Math.max(1,Math.ceil(t/i)):1},hasKnownLastPage:function(){return this._hasLastPage||this._dataSource.totalCount()>=0}}}()),i.DataSourceAdapterClient=i.DataSourceAdapterServer.inherit({_handleDataLoading:function(n){this.callBase(n);var i=this._remoteOperations||{},t=n.loadOptions=n.storeLoadOptions;n.storeLoadOptions={userData:t.userData},i.filtering&&(n.storeLoadOptions.filter=t.filter,delete t.filter),i.sorting&&(n.storeLoadOptions.sort=t.sort,delete t.sort),this._handleDataLoadingCore(n)},_handleDataLoadingCore:function(){},_handleDataLoaded:function(n){var r=this.callBase,i=n.loadOptions;if(!i){this._dataSource.cancel(n.operationId);return}n.skip=i.skip,n.take=i.take,delete i.skip,delete i.take,new t.data.ArrayStore(n.data).load(i).done(function(t){n.data=t,i.requireTotalCount&&(n.extra=n.extra||{totalCount:t.length})}),this._handleDataLoadedCore(n),r.apply(this,arguments)},_handleDataLoadedCore:function(n){n.skip!==undefined&&(n.data=n.data.slice(n.skip)),n.take!==undefined&&(n.data=n.data.slice(0,n.take))}})}(jQuery,DevExpress),function(n,t){var o=t.ui,i=o.dxDataGrid,y=o.events,u=t.utils,f=t.data.utils.normalizeSortingInfo,r="dx-datagrid-group-panel",p="dx-group-panel-message",s="dx-group-panel-item",w="dx-datagrid-action",h="dx-datagrid-group-space",b="dx-datagrid-group-opened",k="dx-datagrid-group-closed",c="dx-datagrid-expand",d="dx-selection-disabled",l=function(){var i=function(n,i){for(var r=0;r<n.length;r++)if(t.data.utils.keysEqual(null,n[r].key,i))return n[r]},r=function(n,t){for(var i=0;i<n.length;i++)if(n[i].offset>t)break;return i},u=function(n){for(var t,u,i=0;i<n.length;i++)t=n[i],t.data&&t.data.offset!==t.offset&&(n.splice(i,1),t.offset=t.data.offset,u=r(n,t.offset),n.splice(u,0,t),u>i&&i--)},e=function(n,t,i){for(var r=0;r<n.length;r++)t+1>=i?n[r].children=[]:e(n[r].children,t+1,i)};return{init:function(){this.callBase.apply(this,arguments),this.reset()},reset:function(){this._groupsInfo=[],this._totalCountCorrection=0},totalItemsCount:function(){var n=this,t=n.callBase();return t>0&&n._dataSource.group()&&n._dataSource.requireTotalCount()?t+n._totalCountCorrection:t},itemsCount:function(){return this._dataSource.group()?this._itemsCount||0:this.callBase()},updateTotalItemsCount:function(n){this._totalCountCorrection=n||0},_isGroupItemCountable:function(n){return!this._isVirtualPaging()||!n.isContinuation},_isVirtualPaging:function(){var n=this.option("scrolling.mode");return n==="virtual"||n==="infinite"},updateItemsCount:function(n,t){function i(n,t,r){var u,f=0;if(t)if(r)for(u=0;u<t.length;u++)n._isGroupItemCountable(t[u])&&f++,f+=i(n,t[u].items,r-1);else f=t.length;return f}this._itemsCount=i(this,n,t)},foreachGroups:function(t,i,r){function f(t,i,e,o){function l(n,t,i,r){var u=t&&n(t,i);return r.push(u),u}for(var c,h=[],s=0;s<t.length;s++){if((o.push(t[s].data),!e&&l(i,t[s].data,o,h)===!1)||(!t[s].data||t[s].data.isExpanded||r)&&(c=f(t[s].children,i,e,o),h.push(c),c===!1)||e&&l(i,t[s].data,o,h)===!1)return!1;o.pop()}return n.when.apply(n,h).always(function(){u(t)})}var e=this;return f(e._groupsInfo,t,i,[])},findGroupInfo:function(n){for(var f=this,e,t,u=f._groupsInfo,r=0;u&&r<n.length;r++)t=i(u,n[r]),u=t&&t.children;return t&&t.data},addGroupInfo:function(n){for(var h=this,s,t,o=n.path,e=h._groupsInfo,f=0;f<o.length;f++)t=i(e,o[f]),t||(t={key:o[f],offset:n.offset,children:[]},s=r(e,n.offset),e.splice(s,0,t)),f===o.length-1&&(t.data=n,u(e)),e=t.children},allowCollapseAll:function(){return!0},isRowExpanded:function(n){var t=this.findGroupInfo(n);return t?t.isExpanded:!1},collapseAll:function(n){return this.allowCollapseAll()?this._collapseExpandAll(n,!1):(t.log("E1018"),!1)},expandAll:function(n){return this._collapseExpandAll(n,!0)},_collapseExpandAll:function(n,t){var e=this,o=e._dataSource,u=o.group(),r=f(u||[]),i;if(r.length){for(i=0;i<r.length;i++)n===undefined||n===i?r[i].isExpanded=t:u&&u[i]&&(r[i].isExpanded=u[i].isExpanded);o.group(r),e.foreachGroups(function(i,r){(n===undefined||n===r.length-1)&&(i.isExpanded=t)},!1,!0)}return!0},refresh:function(n){this.callBase.apply(this,arguments);var i=this,t,u=f(i._group||[]),o=f(n.group||[]),r=Math.min(u.length,o.length);for(i._group=n.group,t=0;t<r;t++)if(u[t].selector!==o[t].selector){r=t;break}r?e(i._groupsInfo,0,r):i.reset()},changeRowExpand:function(n){var i=this,t=i._dataSource;if(t.group())return t._changeLoadingCount(1),i._changeRowExpandCore(n).always(function(){t._changeLoadingCount(-1)})}}}(),a,e,v;i.DataSourceAdapterClient=i.DataSourceAdapterClient.inherit(l),i.DataSourceAdapterServer=i.DataSourceAdapterServer.inherit(l),a=function(){return{_processItems:function(n){var t=this._columnsController.getGroupColumns();return n.length&&t.length&&(n=this._processGroupItems(n,t.length)),this.callBase(n)},_processItem:function(n,t){return u.isDefined(n.groupIndex)&&u.isString(n.rowType)&&n.rowType.indexOf("group")===0?(n=this._processGroupItem(n,t),t.dataIndex=0):n=this.callBase.apply(this,arguments),n},_processGroupItem:function(n){return n},_processGroupItems:function(n,t,i){var s=this,o,e,u,f,r;if(i||(o=s.option("scrolling.mode"),i={collectContinuationItems:o!=="virtual"&&o!=="infinite",resultItems:[],path:[]}),f=i.resultItems,r=i.path,i.data&&(i.collectContinuationItems||!i.data.isContinuation)&&f.push({rowType:"group",data:i.data,groupIndex:r.length-1,isExpanded:!!i.data.items,key:r,values:r}),n)if(t===0)f.push.apply(f,n);else for(e=0;e<n.length;e++)u=n[e],u&&(i.data=u,i.path=r.concat(u.key),s._processGroupItems(u.items,t-1,i),i.data=undefined,i.path=r);return f},publicMethods:function(){return this.callBase().concat(["collapseAll","expandAll","isRowExpanded","expandRow","collapseRow"])},collapseAll:function(n){var t=this._dataSource;t&&t.collapseAll(n)&&(t.pageIndex(0),t.reload())},expandAll:function(n){var t=this._dataSource;t&&t.expandAll(n)&&(t.pageIndex(0),t.reload())},changeRowExpand:function(t){var r=this,i=this._dataSource;i&&n.when(i.changeRowExpand(t)).done(function(){r.load()})},isRowExpanded:function(n){var t=this._dataSource;return t&&t.isRowExpanded(n)},expandRow:function(n){this.isRowExpanded(n)||this.changeRowExpand(n)},collapseRow:function(n){this.isRowExpanded(n)&&this.changeRowExpand(n)},optionChanged:function(n){n.name==="grouping"&&(n.name="dataSource"),this.callBase(n)}}}(),e=function(){return{_renderGroupPanel:function(){var i=this,f=i.element(),u=i.option("groupPanel"),t,e=i.getController("columns").getGroupColumns();t=f.find("."+r),u&&u.visible?(t.length?t.show():t=n("<div />").addClass(r).prependTo(f),i._renderGroupPanelItems(t,e),u.allowColumnDragging&&!e.length&&n("<div />").addClass(p).text(u.emptyPanelText).appendTo(t)):t.hide()},_renderGroupPanelItems:function(t,i){var r=this,u;t.empty(),n.each(i,function(i,f){u=n("<div />").addClass(f.cssClass).addClass(s).toggleClass(w,f.allowSorting).appendTo(t).text(f.caption).on(y.addNamespace("dxclick","dxDataGridHeaderPanel"),r.createAction(function(){setTimeout(function(){r.getController("columns").changeSortOrder(f.index)})})),r._applySorting(u,{alignment:"left",sortOrder:f.sortOrder==="desc"?"desc":"asc"},!0)}),r._updateSortIndicatorPositions(t)},_renderCore:function(){this.callBase.apply(this,arguments),this._renderGroupPanel()},_resizeCore:function(){var n=this,t=n.element(),i=t&&t.find("."+r),u=n.option("groupPanel");n.callBase(),n._updateSortIndicatorPositions(i)},allowDragging:function(n){var t=this.option("groupPanel");return t&&t.visible&&t.allowColumnDragging&&n&&n.allowGrouping},getColumnElements:function(){var n=this.element();return n&&n.find("."+s)},getColumns:function(){return this.getController("columns").getGroupColumns()},getBoundingRect:function(){var i=this,n=i.element(),t;return n&&n.find("."+r).length?(t=n.offset(),{top:t.top,bottom:t.top+n.height()}):null},getName:function(){return"group"},isVisible:function(){return this.callBase()||this.option("groupPanel.visible")},optionChanged:function(n){n.name==="groupPanel"?this._renderGroupPanel():this.callBase(n)}}}(),i.GroupingHeaderPanelExtender=e,v=function(){return{_rowClick:function(t,i){var r=this,u=r.getController("data"),e=n(i.target).closest("."+c),f;r.callBase(t,i),e.length&&(f=u.getKeyByRowIndex(t),u.changeRowExpand(f))},_getDefaultTemplate:function(n){var t=this;return n.command==="expand"?function(n,t){!u.isDefined(t.value)||t.data&&t.data.isContinuation||t.row.inserted?n.addClass(h):n.addClass(h).addClass(c).addClass(d).addClass(t.value?b:k)}:t.callBase(n)}}}(),i.registerModule("grouping",{defaultOptions:function(){return{grouping:{autoExpandAll:!0,allowCollapsing:!0,groupContinuesMessage:Globalize.localize("dxDataGrid-groupContinuesMessage"),groupContinuedMessage:Globalize.localize("dxDataGrid-groupContinuedMessage")},groupPanel:{visible:!1,emptyPanelText:Globalize.localize("dxDataGrid-groupPanelEmptyText"),allowColumnDragging:!0}}},extenders:{controllers:{data:a},views:{headerPanel:e,rowsView:v}}})}(jQuery,DevExpress),function(n,t){var o=t.utils,r=t.data.utils,u=t.ui.dxDataGrid,i=u.normalizeSortingInfo,e=r.keysEqual,f=function(t,i){var r=n.Deferred(),u=n.extend({skip:0,take:1,requireTotalCount:!0},i);return t.load(u).done(function(u,f){f&&isFinite(f.totalCount)?r.resolve(f.totalCount):t.totalCount(i).done(n.proxy(r.resolve,r)).fail(n.proxy(r.reject,r))}).fail(n.proxy(r.reject,r)),r};u.DataSourceAdapterServer=u.DataSourceAdapterServer.inherit(function(){var u=function(n,t){return n.foreachGroups(function(n){if(!n.isExpanded)return t(n)})},s=function(n,t){var i=0,r=t||0;return t&&(u(n,function(n){if(n.offset-i>=t)return!1;i+=n.count-1}),r+=i),r},h=function(n,t,i,r,u,f){for(var e,s,o=0,c=!1,a,l=0;l<t.length;l++)e=t[l],e.items!==undefined?(i.push(e.key),a=n.findGroupInfo(i),a&&!a.isExpanded?(e.items=null,r+=a.count,f--,f<0&&o++,u&&(c=!0)):e.items&&(s=h(n,e.items,i,r,u,f),u&&(s.offset-r>1?e.isContinuation=!0:c=!0),r=s.offset,f=s.take,f<0&&(e.items.length?e.isContinuationOnNextPage=!0:o++)),i.pop()):(u&&(c=!0),r++,f--,f<0&&o++),u=!1;return c&&t.splice(0,1),o&&t.splice(-o,o),{offset:r,take:f}},l=function(n,t){var i;if(n.length!==t.length)return!1;for(i=0;i<n.length;i++)if(!e(null,n[i],t[i]))return!1;return!0},o=function(n,t,i,r,u){var s,f,h=n._groupsInfo,e;if(t){for(s=0;s<t.length;s++)f=t[s],"key"in f&&f.items!==undefined?(i.push(f.key),u&&l(u.path,i)&&!f.isContinuation&&(u.offset=r),e=n.findGroupInfo(i),e&&!e.isExpanded?f.isContinuation||(e.offset=r,r+=e.count):r=o(n,f.items,i,r,u),i.pop()):r++;return r}},a=function(n){var t,u;n.group&&(t=i(n.group),u=i(n.sort),n.sort=r.arrangeSortingInfo(t,u),delete n.group)},c=function(n,t){for(var f=i(t.group),u=[],r=0;r<n.length;r++)u.push([f[r].selector,"=",n[r]]);return t.filter&&u.push(t.filter),u},v=function(n,t,r){for(var s=i(r||t.group),f,o,u=[],e=0;e<n.length;e++){for(o=[],f=0;f<=e;f++)o.push([s[f].selector,e===f?"<>":"=",n[f]]);u.length&&u.push("or"),u.push(o)}return n.length>1&&(u=[u]),t.filter&&u.push(t.filter),u},y=function(n,t){for(var o=i(t.group),r,e,u=[],f=0;f<n.length;f++){for(e=[],r=0;r<=f;r++)e.push([o[r].selector,f===r?o[r].desc?">":"<":"=",n[r]]);u.length&&u.push("or"),u.push(e)}return t.filter&&u.push(t.filter),u};return{_handleDataLoading:function(t){this.callBase(t);var h=this,r=t.storeLoadOptions,p,i,e=[],c=0,l=!1,y,f=r.group,o=0;a(r),i=n.extend({},r),i.skip=s(h,r.skip),i.skip&&i.take&&f&&(i.skip--,i.take++,l=!0),i.take&&f&&(y=i.take,i.take++),u(h,function(n){if(n.offset>=i.skip+i.take+o)return!1;n.offset>=i.skip+o&&n.count&&(o+=n.count-1,e.push(n.path),c+=n.count)}),n.each(e,function(){i.filter=v(this,i,f)}),t.storeLoadOptions=i,t.collapsedPaths=e,t.collapsedItemsCount=c,t.skip=i.skip||0,t.skipFirstItem=l,t.take=y,t.group=f},_handleDataLoaded:function(n){function a(n,t,i){if(n&&t.length&&i.length){for(var o,f,e=r.toComparable(t[0],!0),u=0;u<n.length;u++)if(f=r.toComparable(n[u].key,!0),i[0].desc?e>=f:e<=f)break;n.length&&e===f||n.splice(u,0,{key:t[0],items:[]}),a(n[u].items,t.slice(1),i.slice(1))}}var s=this,u=n.data,v,f,c,e=n.collapsedPaths,o=i(n.group),l=o.length;if(this.callBase(n),l){if(c=t.data.query(u),t.data.utils.multiLevelGroup(c,o).enumerate().done(function(n){u=n}),e)for(f=0;f<e.length;f++)a(u,e[f],o);h(s,u,[],n.skip,n.skipFirstItem,n.take),s.updateItemsCount(u,l),n.data=u,n.collapsedItemsCount&&n.extra&&n.extra.totalCount>=0&&(n.extra.totalCount+=n.collapsedItemsCount)}},updateTotalItemsCount:function(){var n=0;u(this,function(t){t.count&&(n-=t.count-1)}),this.callBase(n)},_changeRowExpandCore:function(t){var i=this,u=i._dataSource,a=i.basePageIndex&&i.basePageIndex()||i.pageIndex(),h=i.items(),l=s(i,a*i.pageSize()),r=i.findGroupInfo(t),e;return e=r&&!r.isExpanded?n.Deferred().resolve(r.count):f(u.store(),{filter:c(t,{filter:u.filter(),group:u.group()})}),n.when(e).done(function(n){n=parseInt(n.length?n[0]:n),r?(o(i,h,[],l),r.isExpanded=!r.isExpanded,r.count=n):(r={offset:-1,count:n,path:t,isExpanded:!1},o(i,h,[],l,r),r.offset>=0&&i.addGroupInfo(r)),i.updateTotalItemsCount()}).fail(n.proxy(u.loadError.fire,u.loadError))},allowCollapseAll:function(){return!1},refresh:function(t,i){var r=this,e=r._dataSource,o=e.store();return this.callBase.apply(this,arguments),i?u(r,function(i){var u=f(o,{filter:c(i.path,t)}),s=f(o,{filter:y(i.path,t)});return e._changeLoadingCount(1),n.when(s,u).done(function(n,t){n=parseInt(n.length?n[0]:n),t=parseInt(t.length?t[0]:t),i.offset=n,i.count!==t&&(i.count=t,r.updateTotalItemsCount())}).fail(n.proxy(r._dataSource.loadError.fire,r._dataSource.loadError)).always(function(){e._changeLoadingCount(-1)})}):void 0}}}())}(jQuery,DevExpress),function(n,t){var f=t.utils,u=t.data.utils,r=t.ui.dxDataGrid,i=r.normalizeSortingInfo,e=u.keysEqual;r.DataSourceAdapterClient=r.DataSourceAdapterClient.inherit(function(){var t=function(n,t){return n.foreachGroups(function(n,i){if(n.isExpanded)return t(n,i)},!0)},f=function(n,t,i,r){var e,u,o;if(r)for(e=0;e<t.length;e++)u=t[e],u.items!==undefined&&(i.push(u.key),o=n.findGroupInfo(i),o&&o.isExpanded?f(n,u.items,i,r-1):u.items=null,i.pop())},h=function(n,t){for(var u=!1,f=i(t).length,r=0;r<f;r++)n._isGroupExpanded(r)&&(u=!0);return u},s=function(n,t,i,r){e(n,t,0,i,[],r)},e=function(n,t,i,r,u,f){var o,s,h;if(!(i>=r))for(s=0;s<t.length;s++)o=t[s],o&&(u.push(o.key),h=n.findGroupInfo(u),h?(h.count=o.items.length,h.offset=f+s):n.addGroupInfo({isExpanded:n._isGroupExpanded(i),path:u.slice(0),offset:f+s,count:o.items.length}),e(n,o.items,i+1,r,u,0),u.pop())},r=function(n,t){return n&&n.length&&n[t]&&!!n[t].isExpanded},o=function(n,t,i){for(var o=0,f,e=i,r=0;r<n.length;r++)f=n[r].offset+1,r>0&&(f+=n[r-1].childrenTotalCount,t&&(f+=u(e,t,f,r-1)*r)),e+=f;return e},u=function(n,t,i,r){if(r=r||0,t>1&&i>0){var u=n-Math.floor(n/t)*t||t;return u+=i-r-2,u<0&&(u+=t),Math.floor(u/(t-r-1))}return 0};return{updateTotalItemsCount:function(){var n=0,i=this.pageSize(),r=this._isVirtualPaging();t(this,function(n){n.childrenTotalCount=0}),t(this,function(t,f){var s=o(f,r?0:i,n),e=t.count+t.childrenTotalCount,h;r||(e+=u(s,i,e,f.length-1)),f[f.length-2]?f[f.length-2].childrenTotalCount+=e:n+=e}),this.callBase(n)},_isGroupExpanded:function(n){var t=this._dataSource.group();return r(t,n)},_updatePagingOptions:function(n){var f=this,c=n.loadOptions,v=this._dataSource,l=f._isVirtualPaging(),r=f.pageSize(),y=i(c.group),p=i(c.sort),a=[],e=[],s=0,h=0;n.take&&(t(this,function(n){n.childrenTotalCount=0,n.skipChildrenTotalCount=0}),t(f,function(t,i){var c,y,b=0,k=0,v=o(i,l?0:r,h),d=0,p=0,f=t.count+t.childrenTotalCount,w=f;c=n.skip-v,v<=n.skip+n.take&&f&&(y=n.take,l||(d=u(v,r,f,i.length-1),f+=d*i.length,w+=d,r&&c>=0&&(b=i.length,k=i.length-1,p=Math.floor(c/r))),c>=0?(v+f>n.skip&&a.unshift(c-p*b-t.skipChildrenTotalCount),v+f>=n.skip+y&&e.unshift(y-b-t.childrenTotalCount+t.skipChildrenTotalCount)):v+f>=n.skip+y&&e.unshift(y+c-t.childrenTotalCount)),v<=n.skip&&(i[i.length-2]?i[i.length-2].skipChildrenTotalCount+=Math.min(w,c+1-p*k):s+=Math.min(w,c+1)),v<=n.skip+y&&(f=Math.min(w,c+y-(p+1)*k),i[i.length-2]?i[i.length-2].childrenTotalCount+=f:h+=f)}),n.skip-=s,n.take-=h-s),n.skips=a,n.takes=e},_changeRowExpandCore:function(t){var r=this,i=r.findGroupInfo(t);return i?(i.isExpanded=!i.isExpanded,r.updateTotalItemsCount(),n.Deferred().resolve()):n.Deferred().reject()},_handleDataLoadedCore:function(n){var e=this,l=e.callBase,a=n.data,o=i(n.loadOptions.group).length,v=e.summary(),c,h,r,u,t;for(s(e,n.data,o,0),e.updateTotalItemsCount(),e._updatePagingOptions(n),l.call(e,n),c=n.skips,h=n.takes,t=n.data,r=0;t&&r<o;r++)u=t[0],t=u&&u.items,t&&c[r]!==undefined&&(u.isContinuation=!0,t=t.slice(c[r]),u.items=t);for(t=n.data,r=0;t&&r<o;r++)u=t[t.length-1],t=u&&u.items,t&&h[r]!==undefined&&t.length>h[r]&&(u.isContinuationOnNextPage=!0,t=t.slice(0,h[r]),u.items=t);f(e,n.data,[],o),e.updateItemsCount(n.data,o)},refresh:function(n){for(var u=this,e=i(u._group),o=i(n.group),f,t=0;t<e.length;t++)f=r(n.group,t),r(u._group,t)!==f&&u.foreachGroups(function(n,i){i.length===t+1&&(n.isExpanded=f)});u.callBase.apply(this,arguments),u.foreachGroups(function(n){n.count=0})}}}())}(jQuery,DevExpress),function(n,t){var c=t.ui,i=c.dxDataGrid,w=t.utils,l="dx-datagrid-table",a="dx-row",v="dx-freespace-row",f="dx-column-lines",e="dx-datagrid-bottom-load-panel",y="dx-datagrid-table-content",p="dx-datagrid-group-space",r="infinite",o="virtual",u=25e4,s=function(){var h=function(n){return n.option("scrolling.preloadEnabled")?2:1},t=function(n){return n.option("scrolling.mode")===o},i=function(n){return n.option("scrolling.mode")===r},u=function(n){return n._cache[0]?n._cache[0].pageIndex:-1},f=function(n){var i=u(n),r=n._cache.length;t(n)&&(i<0||n._viewportItemIndex>=0&&(i*n.pageSize()>n._viewportItemIndex||i*n.pageSize()+n.itemsCount()<n._viewportItemIndex+n._viewportSize)&&n._dataSource.isLoading()?n._isLoading||(n._isLoading=!0,n.loadingChanged.fire(!0)):n._isLoading&&(n._isLoading=!1,n.loadingChanged.fire(!1)))},e=function(n,t){n._isDelayChanged&&(n._isDelayChanged=!1,t.call(n))},s=function(n,t,i,r){var e=n._dataSource,u=e.items();i==="append"?n._items.push.apply(n._items,u):i==="prepend"?n._items.unshift.apply(n._items,u):n._items=u,f(n),n._lastPageIndex=n.pageIndex(),n._isDelayChanged=r,r||t.call(n,i&&{changeType:i,items:u})};return{init:function(n){var t=this;t.callBase.apply(t,arguments),t._isLoading=!0,t._pageIndex=n.pageIndex(),t._lastPageIndex=t._pageIndex,t._viewportSize=0,t._viewportItemIndex=-1,t._userPageSize=t.option("paging.pageSize"),t._items=[],t._isLoaded=!0,t._cache=[],n.isLoaded()&&t._handleDataChanged()},_handleLoadingChanged:function(n){var i=this;t(i)||(i._isLoading=n,i.callBase.apply(i,arguments))},_handleLoadError:function(){var n=this;n._isLoading=!1,n.loadingChanged.fire(!1),n.callBase.apply(n,arguments)},_handleDataChanged:function(){var n=this,r,o=n.callBase,f=n._dataSource,l=n._cache.length,h,c;t(n)?(r=u(n),r>=0&&(r+n._cache.length===f.pageIndex()||r-1===f.pageIndex()||(n._cache=[])),c={pageIndex:f.pageIndex(),itemsCount:n.itemsCount(!0)},e(n,o),r===f.pageIndex()+1?(h="prepend",n._cache.unshift(c)):(h="append",n._cache.push(c)),s(n,o,n._cache.length>1?h:undefined,l===0),n.load().done(function(){e(n,o)})):s(n,o,i(n)&&f.pageIndex()!==0?"append":undefined)},items:function(){return this._items},itemsCount:function(i){var r=0;return!i&&t(this)?n.each(this._cache,function(){r+=this.itemsCount}):r=this.callBase(),r},virtualItemsCount:function(){var n=this,i,f=0,o,r,e;if(t(n))return i=u(n),i<0&&(i=0),r=i*n.pageSize(),f=n._cache.length*n.pageSize(),e=Math.max(0,n.totalItemsCount()-f-r),{begin:r,end:e}},setViewportItemIndex:function(n){var r=this,f=r.pageSize(),v=r._dataSource,e=r.pageCount(),c=t(r),l=i(r),o=r.totalItemsCount(),s,a=r._viewportItemIndex<0,h,u;r._viewportItemIndex=n,f&&(c||l)&&o>=0&&(r._viewportSize&&n+r._viewportSize>=o?r.hasKnownLastPage()?(u=e-1,s=o%f,u>0&&s>0&&s<f/2&&u--):u=e:(u=Math.floor(n/f),h=e-1,u=Math.max(u,0),u=Math.min(u,h)),(r.pageIndex()!==u||a)&&(r.pageIndex(u),r.load()))},setViewportSize:function(n){var r=this,u;r._viewportSize!==n&&(r._viewportSize=n,(t(r)||i(r))&&!r._userPageSize&&(u=Math.ceil(n/5)*10,u!==r.pageSize()&&(r.pageSize(u),r.reload())))},getViewportSize:function(){return this._viewportSize},pageIndex:function(n){return t(this)||i(this)?(n!==undefined&&(this._pageIndex=n),this._pageIndex):this._dataSource.pageIndex(n)},basePageIndex:function(){var n=u(this);return n>0?n:0},load:function(){var r=u(this),e=-1,s=this._dataSource,o,c=function(n,t){var i=n._dataSource;if(t===n.pageIndex()||!i.isLoading()&&t<n.pageCount()||!n.hasKnownLastPage()&&t===n.pageCount())return i.pageIndex(t),i.load()};return t(this)?((r<0||!this._cache[this._pageIndex-r])&&(e=this._pageIndex),r>=0&&e<0&&this._viewportItemIndex>=0&&r+this._cache.length<=this._pageIndex+h(this)&&(e=r+this._cache.length),e>=0&&(o=c(this,e)),f(this)):i(this)?s.isLoaded()&&this.pageIndex()!==this.pageCount()||(s.pageIndex(this.pageIndex()),o=s.load()):o=s.load(),o||this._lastPageIndex===this.pageIndex()||this.changed.fire({changeType:"pageIndex"}),o||n.Deferred().resolve()},isLoading:function(){return this._isLoading},isLoaded:function(){return this._dataSource.isLoaded()&&this._isLoaded},changeRowExpand:function(){return this._cache=[],f(this),this.callBase.apply(this,arguments)},refresh:function(n,t){var r=this,u=r._dataSource;return t&&(r._cache=[],r._isLoaded=!1,f(r),r._isLoaded=!0,i(r)?(r.pageIndex(0),u.pageIndex(0),n.pageIndex=0,n.skip=0):(u.pageIndex(r.pageIndex()),u.paginate()&&(n.skip=r.pageIndex()*r.pageSize()))),r.callBase.apply(r,arguments)}}}(),h;i.DataSourceAdapterServer=i.DataSourceAdapterServer.inherit(s),i.DataSourceAdapterClient=i.DataSourceAdapterClient.inherit(s),h=function(){return{_renderCore:function(){var n=this;n.callBase.apply(n,arguments),n._updateContentPosition()},_renderContent:function(n,t){var i=this,r=i._dataController.virtualItemsCount();if(r)t.addClass(y),n.children().length?n.children().first().replaceWith(t):n.append(t),n.children("table").length===1&&(n.append(i._createTable()),i._contentHeight=0);else return i.callBase.apply(i,arguments)},_updateContent:function(n,t,i){var r=this,f,u=t&&t.changeType;u==="append"||u==="prepend"?(f=n.children().first(),i.children("tbody").children("tr")[u==="append"?"appendTo":"prependTo"](f)):r.callBase.apply(r,arguments),r._updateBottomLoading()},_updateContentPosition:function(){var n=this,s,i,o,r,u,h=n._rowHeight||20,e=n._dataController.virtualItemsCount();e&&(s=n._findContentElement(),o=s.children(),r=o.first(),u=o.eq(1),t.translator.move(r,{top:Math.floor(e.begin*h)}),i=(e.begin+e.end)*h+r.outerHeight(),(n._contentHeight!==i||i===0||!!u.find("."+f).length!==n.option("showColumnLines")||r.find("col").length!==u.find("col").length)&&(n._contentHeight=i,n._renderVirtualTableContent(u,i)))},_renderVirtualTableContent:function(n,t){for(var s=this,e=s._columnsController.getVisibleColumns(),o=i.createColGroup(e).prop("outerHTML"),h="",y=s.option("showColumnLines")?f:"",c=function(n){return'<tr style="height:'+n+'px;" class="'+v+" "+a+" "+y+'" >'+h+"<\/tr>"},r=0;r<e.length;r++)h+=e[r].command==="expand"?'<td class="'+p+'"/>':"<td />";while(t>u)o+=c(u),t-=u;o+=c(t),n.addClass(l),n.html(o)},_findBottomLoadPanel:function(){var n=this.element().find("."+e);if(n.length)return n},_updateBottomLoading:function(){var t=this,u=t.option("scrolling.mode"),f=u===o,s=u===r,h=!t._dataController.hasKnownLastPage()&&t._dataController.isLoaded()&&(f||s),i=t._findBottomLoadPanel();h?i||n("<div />").addClass(e).append(n("<div />").dxLoadIndicator()).appendTo(t._findContentElement()):i&&i.remove()},_handleScroll:function(n){var t=this;t._hasHeight&&t._rowHeight&&t._dataController.setViewportItemIndex(n.scrollOffset.top/t._rowHeight),t.callBase.apply(t,arguments)},_renderScrollableCore:function(n){var t=this;t.callBase.apply(t,arguments),t._subscribeToWindowScrollEvents(n)},_subscribeToWindowScrollEvents:function(t){var i=this,o=i.disposing,e=i.component.element(),r,u,f;if(e&&!i._windowScrollEvents)for(i._windowScrollEvents=!0,u=function(n,r){var u=function(){var f,u=n.scrollTop();!i._hasHeight&&i._rowHeight&&(u-=t.offset().top,u=u>0?u:0,i._scrollTop=u,i._dataController.setViewportItemIndex(u/i._rowHeight))};return r?function(n){u(n),r(n)}:u},f=function(t){var f=t.data("dxScrollable"),r,e;if(f){e=f.option("onScroll"),r=u(t,e),f.option("onScroll",r);i.on("disposing",function(){f.option("onScroll")===r&&f.option("onScroll",e)})}else if(t.is(document)||t.css("overflow-y")==="auto"){t.is(document)&&(t=n(window)),r=u(t);t.on("scroll",r);i.on("disposing",function(){t.off("scroll",r)})}},r=i.component.element().parent();r.length;r=r.parent())f(r)},_needUpdateRowHeight:function(n){var t=this;return t.callBase.apply(t,arguments)||n>0&&t.option("scrolling.mode")===r},_updateRowHeight:function(){var t=this,r=t._rowHeight,i;t.callBase.apply(t,arguments),!r&&t._rowHeight&&(t._updateContentPosition(),i=t._hasHeight?t.element().outerHeight():n(window).outerHeight(),t._dataController.setViewportSize(Math.round(i/t._rowHeight)))},setLoading:function(n,t){var i=this,r=i.callBase,u=!!i._findBottomLoadPanel()&&i._dataController.isLoaded();u&&(n=!1),r.call(i,n,t)}}}(),i.registerModule("virtualScrolling",{defaultOptions:function(){return{scrolling:{mode:"standard",preloadEnabled:!1,useNativeScrolling:"auto"}}},extenders:{controllers:{data:function(){var n={};return i.proxyMethod(n,"virtualItemsCount"),i.proxyMethod(n,"setViewportSize"),i.proxyMethod(n,"setViewportItemIndex"),n}()},views:{rowsView:h}}})}(jQuery,DevExpress),function(n,t){var f=t.ui,o=f.events,i=t.utils,u=f.dxDataGrid,e="dx-datagrid-text-content",s="dx-datagrid-action",h="dx-datagrid-headers",r="dx-header-row",c="dx-datagrid-nowrap",l="dx-datagrid-group-space",a="dx-column-lines",v="context-menu-sort-asc",y="context-menu-sort-desc",p="context-menu-sort-none",w="dx-sort",b="dxDataGridColumnHeadersView",k=1;u.ColumnHeadersView=u.ColumnsView.inherit({_renderHeaderContent:function(t,r,u){var s=this,c=n("<div />"),f=r.headerCellTemplate,o,h;r.command?(t.html("&nbsp;"),t.addClass(r.cssClass),r.command==="expand"&&t.addClass(l)):(s._applySorting(t,r,s.option("showColumnLines")),o=n("<div />").addClass(e),s.option("showColumnLines")?o.appendTo(t):o.css("float",r.alignment||"left").prependTo(t),h={column:r,columnIndex:u},n.isFunction(f)?f(o,h):i.isString(f)?(f=s.getTemplate(f),f&&f.render(h,o)):o.text(r.caption))},_renderHeader:function(t,r,u){var e=this,o=e.option("sorting.mode"),f;f=n("<td />").css("text-align",r.alignment||"left").toggleClass(r.cssClass,!i.isDefined(r.groupIndex)),e._renderHeaderContent(f,r,u),(o==="single"||o==="multiple")&&r.allowSorting&&f.addClass(s),f.appendTo(t)},_handleDataChanged:function(){this._isGroupingChanged&&(this._isGroupingChanged=!1,this.render())},_renderCore:function(){var n=this,t=n.element(),i=n._columnsController.getVisibleColumns(),r=n._scrollLeft;n._tableElement=n._createTable(i),t.addClass(h).toggleClass(c,!!n.option("columnAutoWidth")||!n.option("wordWrapEnabled")).empty(),n._renderContent(n._tableElement),n.wrapTableInScrollContainer(n._tableElement).appendTo(t),n._scrollLeft=0,n.scrollOffset(r)},_renderContent:function(n){var t=this,e=t._columnsController.getVisibleColumns(),f,u;if(t.option("showColumnHeaders")){f=t._createRow().addClass(r).toggleClass(a,t.option("showColumnLines"));f.on(o.addNamespace("dxclick",b),"td",t.createAction(function(n){var u=null,r=n.jQueryEvent;r.stopPropagation(),setTimeout(function(){var n=e[r.currentTarget.cellIndex];r.shiftKey?u="shift":r.ctrlKey&&(u="ctrl"),n&&!i.isDefined(n.groupIndex)&&t._columnsController.changeSortOrder(n.index,u)})}));for(u=0;u<e.length;u++)t._renderHeader(f,e[u],u);n.append(f)}},_afterRender:function(){var t=this;t._updateSortIndicatorPositions(t.element()),t.processSizeChanged()},_updateSortIndicatorPositions:function(n){var t=this,r=t.getColumnElements(),u,i;if(t.callBase(n),!t.option("showColumnLines")&&r)for(i=0;i<r.length;i++)u=r.eq(i),t._setColumnTextWidth(u,u.outerWidth())},_updateSortIndicators:function(){for(var t=this,u=t._columnsController.getVisibleColumns(),f=t.element(),e=f.find("."+r+" > td"),n=0;n<u.length;n++)i.isDefined(u[n].groupIndex)||t._applySorting(e.eq(n),u[n],t.option("showColumnLines"));t._updateSortIndicatorPositions(f)},_columnOptionChanged:function(n){var t=n.changeTypes,i=n.optionNames;if(n.changeTypes.grouping){this._isGroupingChanged=!0;return}if(t.length===1&&t.sorting){this._updateSortIndicators();return}this.callBase(n),(i.width||i.visibleWidth)&&(this._updateSortIndicatorPositions(this.element()),this.resizeCompleted.fire())},_setColumnTextWidth:function(n,t){var i=n.find("."+w),r=i.outerWidth(),u=n.outerWidth()-n.width(),f=r+u;n.find("."+e).css("max-width",t-f-k)},_isElementVisible:function(n){return n&&n.visible},_resizeCore:function(){this.callBase(),this._updateSortIndicatorPositions(this.element())},getHeadersRowHeight:function(){if(this._tableElement){var n=this._tableElement.find("."+r).first();return n&&n.height()}return 0},setColumnWidths:function(n){var t=this,i=t._scrollLeft;t.callBase(n),t._scrollLeft=0,t.scrollOffset(i)},processSizeChanged:function(){var n=this,t=n.element();i.isDefined(n._headersHeight)&&n._headersHeight===t.height()||(n._headersHeight=t.height(),n.sizeChanged.fire())},getHeaderElement:function(n){var t=this.getColumnElements();return t&&t.eq(n)},getColumnElements:function(){var t=this,n;return t._tableElement&&(n=t._tableElement.find("."+r).find("td"),n.length)?n:null},allowDragging:function(n,t){for(var o=!1,u=this.getColumns(),f=0,r,e=function(n){return n.allowReordering||n.allowGrouping||n.allowHiding},i=0;i<u.length;i++)e(u[i])&&f++;if(f<=1)return!1;if(!t)return(this.option("allowColumnReordering")||this._columnsController.isColumnOptionUsed("allowReordering"))&&n&&n.allowReordering;for(i=0;i<t.length;i++)if(r=t[i],r&&r.allowDragging(n))return!0;return!1},getColumns:function(){return this._columnsController.getVisibleColumns()},getBoundingRect:function(){var n=this,t,i=n.getColumnElements();return i&&i.length?(t=n._tableElement.offset(),{top:t.top}):null},getName:function(){return"headers"},getColumnCount:function(){var n=this.getColumnElements();return n?n.length:0},init:function(){var t=this;t.callBase(),t._scrollerWidth=0,t.sizeChanged=n.Callbacks()},isVisible:function(){return this.option("showColumnHeaders")},setScrollerSpacing:function(n){var t=this,i=t.element(),r=t.option("rtlEnabled");t._scrollerWidth=n,i&&i.css(r?{paddingLeft:n}:{paddingRight:n})},optionChanged:function(n){var t=this;t.callBase(n);switch(n.name){case"showColumnHeaders":case"wordWrapEnabled":case"showColumnLines":t.render()}},getHeight:function(){var t=this,n=t.element();return n?n.height():0},getContextMenuItems:function(n){var f=this,e,i,u,t;if(n.closest("."+r).length)return(e=n.closest("td"),i=e.length&&f.getColumns()[e[0].cellIndex],t=f.option("sorting"),t&&t.mode!=="none"&&i&&i.allowSorting)?(u=function(n){setTimeout(function(){f._columnsController.changeSortOrder(i.index,n.itemData.value)})},[{text:t.ascendingText,value:"asc",icon:v,onItemClick:u},{text:t.descendingText,value:"desc",icon:y,onItemClick:u},{text:t.clearText,value:"none",icon:p,onItemClick:u}]):[]}}),u.registerModule("columnHeaders",{defaultOptions:function(){return{showColumnHeaders:!0,cellHintEnabled:!0}},views:{columnHeadersView:u.ColumnHeadersView}})}(jQuery,DevExpress),function(n,t){var u=t.ui,tt=u.events,r=t.utils,i=u.dxDataGrid,f={"=":"filter-operation-equals","<>":"filter-operation-not-equals","<":"filter-operation-less","<=":"filter-operation-less-equal",">":"filter-operation-greater",">=":"filter-operation-greater-equal","default":"filter-operation-default",notcontains:"filter-operation-not-contains",contains:"filter-operation-contains",startswith:"filter-operation-starts-with",endswith:"filter-operation-ends-with"},l=700,a="dx-datagrid",e="dx-datagrid-filter-row",v="dx-menu",it="dx-menu-image",rt="dx-datagrid-text-content",y="dx-datagrid-group-space",p="dx-editor-with-menu",w="dx-editor-container",b="dx-column-lines",k="dx-editor-cell",d="dx-apply-button",o="dx-highlight-outline",s="dx-focused",g="dx-texteditor",h={_columnOptionChanged:function(n){var t=this,s=n.optionNames,h,f,c,r,l,o,a;if(i.checkChanges(s,["filterValue","selectedFilterOperation"])&&n.columnIndex!==undefined){h=t.getController("columns").getVisibleIndex(n.columnIndex),f=t.getController("columns").columnOption(n.columnIndex),c=t.element().find("."+e).children().eq(h),r=c.find("."+g),s.filterValue&&r.length&&(l=r.data("dxComponents"),o=l.length&&r.data(l[0]),o instanceof u.Editor&&o&&o.option("value",f.filterValue)),s.selectedFilterOperation&&h>=0&&f&&(a=c.find("."+v),a.length&&t._updateFilterOperationChooser(a,f,r.parent()));return}t.callBase(n)},isFilterRowVisible:function(){return this._isElementVisible(this.option("filterRow"))},isVisible:function(){return this.callBase()||this.isFilterRowVisible()},init:function(){this.callBase(),this._applyFilterViewController=this.getController("applyFilter")},_renderContent:function(n){this.callBase(n);var t=this,u=t._columnsController.getVisibleColumns(),i,r;if(t.isFilterRowVisible())for(r=t._createRow().appendTo(n),r.addClass(e).toggleClass(b,t.option("showColumnLines")),i=0;i<u.length;i++)t._renderFilterRowCell(r,u[i])},_updateFilterOperationChooser:function(n,t,i){var r=this,u;n.dxMenu({activeStateEnabled:!1,selectionMode:"single",cssClass:a,showFirstSubmenuMode:"onHoverStay",items:[{disabled:t.filterOperations&&t.filterOperations.length?!1:!0,icon:f[t.selectedFilterOperation||"default"],selectable:!1,items:r._getFilterOperationMenuItems(t)}],onItemClick:function(n){var u=n.itemData.name;n.itemData.items||(u?r._columnsController.columnOption(t.index,"selectedFilterOperation",u):r._columnsController.columnOption(t.index,{selectedFilterOperation:t.defaultSelectedFilterOperation,filterValue:undefined}),r._applyFilterViewController.setHighLight(i,!0),r._focusEditor(i))},onSubmenuShown:function(){u=r._isEditorFocused(i),r.getController("editorFactory").loseFocus()},onSubmenuHiding:function(){n.blur(),n.dxMenu("instance").option("focusedElement",null),u&&r._focusEditor(i)},rtlEnabled:r.option("rtlEnabled")})},_isEditorFocused:function(n){return n.hasClass(s)||n.parents("."+s).length},_focusEditor:function(n){this.getController("editorFactory").focus(n),n.find("input").focus()},_renderFilterOperationChooser:function(t,i,r){var u=this,f;u.option("filterRow.showOperationChooser")&&(t.addClass(p),f=n("<div />").prependTo(t),u._updateFilterOperationChooser(f,i,r))},_getFilterOperationMenuItems:function(t){var u=this,r=[{}],i=u.option("filterRow"),e=i&&i.operationDescriptions||{};return t.filterOperations&&t.filterOperations.length&&(r=n.map(t.filterOperations,function(n){return{name:n,selected:(t.selectedFilterOperation||t.defaultFilterOperation)===n,text:e[n],icon:f[n]}}),r.push({name:null,text:i&&i.resetOperationText,icon:f["default"]})),r},_renderFilterRowCell:function(t,i){var u=this,f=n("<td />").toggleClass(i.cssClass,!r.isDefined(i.groupIndex)).appendTo(t),s=u._columnsController,o,e,h,c=function(n,t,i){(i===""&&(i=undefined),r.isDefined(t.filterValue)||r.isDefined(i))&&(n._applyFilterViewController.setHighLight(e,t.filterValue!==i),t.filterValue=i,s.columnOption(t.index,"filterValue",i))};i.command?(f.html("&nbsp;"),i.command==="expand"&&f.addClass(y)):i.allowFiltering&&(f.addClass(k),o=n("<div />").appendTo(f),e=n("<div />").addClass(w).appendTo(o),h=n("<div />").appendTo(e),u.getController("editorFactory").createEditor(h,n.extend({},i,{value:s.isDataSourceApplied()?i.filterValue:undefined,setValue:function(n){c(u,i,n)},parentType:"filterRow",showAllText:u.option("filterRow.showAllText"),updateValueTimeout:u.option("filterRow.applyFilter")==="onClick"?0:l,width:null})),i.alignment&&f.find("input").first().css("text-align",i.alignment),i.filterOperations&&i.filterOperations.length&&u._renderFilterOperationChooser(o,i,e))},optionChanged:function(n){var t=this;switch(n.name){case"filterRow":case"showColumnLines":case"disabled":t.render();break;default:t.callBase(n)}}},c={_calculateAdditionalFilter:function(){var t=this,i=[t.callBase()],u=t._columnsController.getVisibleColumns();return n.each(u,function(){var n;this.allowFiltering&&this.calculateFilterExpression&&r.isDefined(this.filterValue)&&(n=this.calculateFilterExpression(this.filterValue,this.selectedFilterOperation||this.defaultFilterOperation),i.push(n))}),t._combineFilters(i)}},nt={_createCalculatedColumnOptions:function(t){var i=this.callBase(t);return t.dataField?n.extend(i,{calculateFilterExpression:function(n,t){var e=this,i=e.dataField,o=null,u,f;if(r.isDefined(n))if(e.dataType!=="string"||e.lookup)if(e.dataType==="date"){if(r.isDate(n)){u=new Date(n.getFullYear(),n.getMonth(),n.getDate()),f=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1);switch(t){case"<":return[i,"<",u];case"<=":return[i,"<",f];case">":return[i,">=",f];case">=":return[i,">=",u];case"<>":return[[i,"<",u],"or",[i,">=",f]];default:return[[i,">=",u],"and",[i,"<",f]]}}}else o=[i,t||"=",n];else o=[i,t||"contains",n];return o},allowFiltering:!0}):n.extend(i,{allowFiltering:!!t.calculateFilterExpression}),i}};i.ApplyFilterViewController=i.ViewController.inherit({_isOnClick:function(){return this.option("filterRow.applyFilter")==="onClick"},_getHeaderPanel:function(){return this._headerPanel||(this._headerPanel=this.getView("headerPanel")),this._headerPanel},setHighLight:function(n,t){this._isOnClick()&&(n&&n.toggleClass(o,t),this._getHeaderPanel().enableApplyButton(t))},removeHighLights:function(){if(this._isOnClick()){var n=this.getView("columnHeadersView");n.element().find("."+e+" ."+o).removeClass(o),this._getHeaderPanel().enableApplyButton(!1)}}}),i.registerModule("filterRow",{defaultOptions:function(){return{filterRow:{visible:!1,showOperationChooser:!0,showAllText:Globalize.localize("dxDataGrid-filterRowShowAllText"),resetOperationText:Globalize.localize("dxDataGrid-filterRowResetOperationText"),applyFilter:"auto",applyFilterText:Globalize.localize("dxDataGrid-applyFilterText"),operationDescriptions:{"=":Globalize.localize("dxDataGrid-filterRowOperationEquals"),"<>":Globalize.localize("dxDataGrid-filterRowOperationNotEquals"),"<":Globalize.localize("dxDataGrid-filterRowOperationLess"),"<=":Globalize.localize("dxDataGrid-filterRowOperationLessOrEquals"),">":Globalize.localize("dxDataGrid-filterRowOperationGreater"),">=":Globalize.localize("dxDataGrid-filterRowOperationGreaterOrEquals"),startswith:Globalize.localize("dxDataGrid-filterRowOperationStartsWith"),contains:Globalize.localize("dxDataGrid-filterRowOperationContains"),notcontains:Globalize.localize("dxDataGrid-filterRowOperationNotContains"),endswith:Globalize.localize("dxDataGrid-filterRowOperationEndsWith")}}}},controllers:{applyFilter:i.ApplyFilterViewController},extenders:{controllers:{data:c,columns:nt},views:{columnHeadersView:h,headerPanel:{_isShowApplyFilterButton:function(){var n=this.option("filterRow");return n&&n.visible&&n.applyFilter==="onClick"},_renderCore:function(){var t=this,i=t._applyButton?t._applyButton.option("disabled"):!0;t.callBase(),t._$applyButton&&t._$applyButton.remove(),this._isShowApplyFilterButton()&&(t._$applyButton=n("<div>").addClass(d).dxButton({disabled:i,hint:t.option("filterRow.applyFilterText"),icon:"apply-filter",onClick:function(){t._dataController._applyFilter(),t._applyFilterViewController.removeHighLights()}}).appendTo(t.element()),t._applyButton=t._$applyButton.dxButton("instance"))},init:function(){this.callBase(),this._dataController=this.getController("data"),this._applyFilterViewController=this.getController("applyFilter")},enableApplyButton:function(n){this._applyButton&&this._applyButton.option("disabled",!n)},isVisible:function(){return this.callBase()||this._isShowApplyFilterButton()},optionChanged:function(n){n.name==="filterRow"?this.render():this.callBase(n)}}}}}),i.ColumnHeadersViewFilterRowExtender=h,i.DataControllerFilterRowExtender=c}(jQuery,DevExpress),function(n,t){var r=t.ui,f=r.events,i=r.dxDataGrid,u="dx-datagrid-header-panel";i.HeaderPanel=i.ColumnsView.inherit({_renderCore:function(){this.element().addClass(u)},getHeaderPanel:function(){return this.element()},getHeight:function(){var n=this.element();return n?n.outerHeight(!0):0},isVisible:function(){return!1},optionChanged:function(n){var t=this;switch(n.name){case"disabled":t.render()}}}),i.registerModule("headerPanel",{defaultOptions:function(){return{}},views:{headerPanel:i.HeaderPanel}})}(jQuery,DevExpress),function(n,t){var i=t.ui,e=i.events,o=t.utils,r=i.dxDataGrid,u="dx-datagrid-search-panel",f=700,s=10;r.registerModule("search",{defaultOptions:function(){return{searchPanel:{visible:!1,width:160,placeholder:Globalize.localize("dxDataGrid-searchPanelPlaceholder"),highlightSearchText:!0,text:""}}},extenders:{controllers:{data:function(){var n=function(n,i){var e,r,s=n._columnsController.getColumns(),f,u,o=[];if(!i)return null;for(e=0;e<s.length;e++)r=s[e],r.allowFiltering&&r.calculateFilterExpression&&(u=r.lookup,u&&u.items?(f=r.parseValue.call(u,i),t.data.query(u.items).filter(r.calculateFilterExpression.call({dataField:u.displayExpr,dataType:u.dataType},f)).enumerate().done(function(n){for(var e=t.data.utils.compileGetter(u.valueExpr),f,i=0;i<n.length;i++)f=e(n[i]),o.push(r.calculateFilterExpression(f))})):(f=r.parseValue?r.parseValue(i):i,f!==undefined&&o.push(r.calculateFilterExpression(f))));return n._combineFilters(o,"or")};return{publicMethods:function(){return this.callBase().concat(["searchByText"])},_calculateAdditionalFilter:function(){var t=this,i=t.callBase(),r=n(t,t.option("searchPanel.text"));return t._combineFilters([i,r])},searchByText:function(n){this.option("searchPanel.text",n)},optionChanged:function(n){var t=this;t.callBase(n);switch(n.fullName){case"searchPanel.text":case"searchPanel":t._applyFilter()}}}}()},views:{headerPanel:function(){var t=function(n){return n.option("searchPanel")};return{_renderSearchPanel:function(){var i=this,e=i.element(),o=i.getController("data"),r=t(i);r&&r.visible?(i._$searchPanel?i._$searchPanel.show():i._$searchPanel=n("<div/>").addClass(u).prependTo(e),i.getController("editorFactory").createEditor(i._$searchPanel,{width:r.width,placeholder:r.placeholder,parentType:"searchPanel",value:i.option("searchPanel.text"),updateValueTimeout:f,setValue:function(n){o.searchByText(n)}}),i.resize()):i._$searchPanel&&i._$searchPanel.hide()},_renderCore:function(){this.callBase(),this._renderSearchPanel()},focus:function(){var n=this._$searchPanel.dxTextBox("instance");n&&n.focus()},isVisible:function(){var n=t(this);return this.callBase()||n&&n.visible},optionChanged:function(n){n.name==="searchPanel"?this._renderSearchPanel():this.callBase(n)}}}()}}})}(jQuery,DevExpress),function(n,t){var l=t.ui,i=t.utils,r=l.dxDataGrid,tt="dx-datagrid-text-content",e="dx-group-row",o="dx-datagrid-search-text",a="dx-datagrid-rowsview",v="dx-datagrid-table",y="dx-data-row",u="dx-freespace-row",s="dx-datagrid-nodata",f="dx-datagrid-content",p="dx-datagrid-nowrap",w="dx-row-lines",h="dx-column-lines",b="dx-row-alt",k="dx-scrollable-container",d="dx-scrollable-content",g=200,nt={render:function(n,t){t.append(n)}},c=function(n){var i=n.option("scrolling.useNativeScrolling"),r={direction:"both",rtlEnabled:n.option("rtlEnabled")||t.rtlEnabled,disabled:n.option("disabled"),bounceEnabled:!1,useKeyboard:!1};return i===undefined&&(i=!0),i!=="auto"&&(r.useNative=!!i,r.useSimulatedScrollbar=!i),r};r.createScrollableOptions=c,r.RowsView=r.ColumnsView.inherit({_getDefaultTemplate:function(n){var t=this;switch(n.command){case"empty":return function(n){n.html("&nbsp;")};default:return function(t,i){var r=!i.text&&i.rowType==="data",u=r?"&nbsp;":i.text;n.encodeHtml&&!r?t.text(u):t.html(u)}}},_getDefaultGroupTemplate:function(){var n=this,t=n.option("summary.texts");return function(i,u){var s=u.data,e,o,f=u.column.caption+": "+u.text;if(u.summaryItems&&u.summaryItems.length){for(f+=" (",e=0;e<u.summaryItems.length;e++)o=u.summaryItems[e],f+=(e>0?", ":"")+r.getSummaryText(o,t);f+=")"}s&&(u.groupContinuedMessage&&u.groupContinuesMessage?f+=" ("+u.groupContinuedMessage+". "+u.groupContinuesMessage+")":u.groupContinuesMessage?f+=" ("+u.groupContinuesMessage+")":u.groupContinuedMessage&&(f+=" ("+u.groupContinuedMessage+")")),i.css("text-align",n.option("rtlEnabled")?"right":"left").text(f)}},_update:function(){},_createRow:function(n){var i=this.callBase(),r,t;return n&&(r=n.rowType==="group",t=n.rowType==="data",i.toggleClass(y,t).toggleClass(b,t&&n.dataIndex%2==1&&this.option("rowAlternationEnabled")).toggleClass(w,t&&this.option("showRowLines")).toggleClass(h,this.option("showColumnLines")).toggleClass(e,r)),i},_highlightSearchText:function(t,i){var f=this,u,e,r=f.option("searchPanel.text");r&&f.option("searchPanel.highlightSearchText")&&(e=n("<div>").text(r).html(),u=t.parent(),u.length||(u=n("<div>").append(t)),n.each(u.find(":dxicontains('"+r+"')"),function(t,u){n.each(n(u).contents(),function(t,u){if(u.nodeType===3){var f=function(t,i){var e=n("<span />").addClass(o),r=t.text(),u=r.toLowerCase().indexOf(i.toLowerCase());if(u>=0)return t[0].textContent?t[0].textContent=r.substr(0,u):t[0].nodeValue=r.substr(0,u),t.after(e.text(r.substr(u,i.length))),t=n(document.createTextNode(r.substr(u+i.length))).insertAfter(e),f(t,i)};i?n(u).text().toLowerCase()===r.toLowerCase()&&n(this).replaceWith(n("<span />").addClass(o).text(n(u).text())):f(n(u),r)}})}))},_renderTemplate:function(t,i,r){var f=this,u;if(n.isFunction(i)?u={render:function(n,t){i(t,n)}}:(f._templatesCache[i]||(f._templatesCache[i]=f.getTemplate(i)),u=f._templatesCache[i]),u)if(r.denyRenderToDetachedContainer||u.denyRenderToDetachedContainer)f._delayedTemplates.push({template:u,container:t,options:r});else return u.render(r,t),!0;return!1},_getColumnTemplate:function(n){var r=this,t=n.column,i;return i=n.rowType==="group"&&t.groupIndex!==undefined?t.groupCellTemplate||r._getDefaultGroupTemplate():t.cellTemplate||r._getDefaultTemplate(t)},_updateCell:function(n,t){var i=this,r=t.column,u=r.dataType!=="string";r.allowFiltering&&i._highlightSearchText(n,u),t.rowType==="data"&&i._cellPrepared(n,t)},_createCell:function(t,u,f,e,o){var s=this,v,l=s.option("grouping"),y=s.option("scrolling.mode"),h=u&&u.data,p=u&&u.summaryCells,w=e.lookup?e.lookup.calculateCellValue(t):t,a=n("<td />").addClass(e.cssClass),c={value:t,displayValue:w,row:u,key:u&&u.key,data:h,rowType:u&&u.rowType,values:u&&u.values,text:!i.isDefined(e.command)&&r.formatValue(w,e),rowIndex:f,columnIndex:o,column:e,summaryItems:p&&p[o],resized:e.resizedCallbacks};return i.isDefined(e.groupIndex)&&y!=="virtual"&&y!=="infinite"&&(c.groupContinuesMessage=h&&h.isContinuationOnNextPage&&l&&l.groupContinuesMessage,c.groupContinuedMessage=h&&h.isContinuation&&l&&l.groupContinuedMessage),v=s._getColumnTemplate(c),s._renderTemplate(a,v,c)&&s._updateCell(a,c),a},_cellPrepared:function(t,i){var r=this,u,e=i.column.alignment,f=function(t){return{cellElement:n(t.target).closest("td"),jQueryEvent:t,eventType:t.type}};if(e&&(t[0].style.textAlign=e),r.option("onCellClick"))t.on("dxclick",function(t){r.executeAction("onCellClick",n.extend({},i,f(t)))});if(r.option("onCellHoverChanged")){t.on("mouseover",function(t){r.executeAction("onCellHoverChanged",n.extend({},i,f(t)))});t.on("mouseout",function(t){r.executeAction("onCellHoverChanged",n.extend({},i,f(t)))})}this.component._suppressDeprecatedWarnings(),u=r.option("cellPrepared"),this.component._resumeDeprecatedWarnings(),u&&u(t,i),i.cellElement=t,r.executeAction("onCellPrepared",i)},_rowPrepared:function(n,t){var r=this,i;this.component._suppressDeprecatedWarnings(),i=r.option("rowPrepared"),this.component._resumeDeprecatedWarnings(),i&&i(n,t),t.rowElement=n,this.executeAction("onRowPrepared",t)},_renderScrollable:function(n){var t=this,r=t.element();i.isDefined(t._tableElement)||(t._tableElement=n,r.children().length||r.append("<div />"),t._renderLoadPanel(r),t._renderScrollableCore(r))},_handleScroll:function(n){var t=this;t._scrollTop=n.scrollOffset.top,t.scrollOffsetChanged.fire(n.scrollOffset)},_renderScrollableCore:function(t){var i=this,r=c(i),u=n.proxy(i._handleScroll,i);r.onScroll=u,r.onStop=u,t.dxScrollable(r),i._scrollable=t.data("dxScrollable"),i._scrollableContainer=i._scrollable._$container},_renderLoadPanel:function(t){var r=this,i;t.dxLoadPanel&&(i=r.option("loadPanel"),i&&i.enabled?(i=n.extend({shading:!1,message:i.text,position:{of:t},container:t},i),r._loadPanel?r._loadPanel.option(i):r._loadPanel=n("<div />").appendTo(t.parent()).dxLoadPanel(i).dxLoadPanel("instance")):(r._loadPanel&&r._loadPanel.element().remove(),r._loadPanel=null))},_renderContent:function(t,i){return t.replaceWith(n("<div>").addClass(f).append(i))},_updateContent:function(t,r,u){var e=this,s=r&&r.changeType,o=[];switch(s){case"update":n.each(r.rowIndices,function(n,t){var f=e._getRowElements(u).eq(n),h=r.changeTypes[n],s=r.items&&r.items[n];o.push(function(){var r=e._getRowElements(),n=r.eq(t);switch(h){case"update":i.isDefined(s.visible)&&s.visible!==n.is(":visible")?n.toggle(s.visible):n.replaceWith(f);break;case"insert":r.length?n.length?f.insertBefore(n):f.insertAfter(r.last()):f.prependTo(e._tableElement);break;case"remove":n.remove()}})}),n.each(o,function(){this()});break;default:e._tableElement=u,t.addClass(f),e._renderContent(t,u)}},_renderFreeSpaceRow:function(n,t){var f=this,r,e=f._createRow(),o;for(e.addClass(u).toggleClass(h,f.option("showColumnLines")),r=0;r<t.length;r++)o={command:t[r].command==="expand"?t[r].command:"",cssClass:i.isDefined(t[r].cssClass)?t[r].cssClass:""},e.append(f._createCell(null,null,null,o));f._appendRow(n,e)},_needUpdateRowHeight:function(n){return n>0&&!this._rowHeight},_updateRowHeight:function(){var n=this,r=n._tableElement,i,u=n._dataController.items().length,t;r&&n._needUpdateRowHeight(u)&&(i=r.outerHeight(),t=n._getFreeSpaceRowElement(),t&&t.is(":visible")&&(i-=t.outerHeight()),n._rowHeight=i/u)},_findContentElement:function(){var t=this.element(),n;if(t)return n=t.find(".dx-scrollable-content"),n||(n=t),n.children().first()},_getRowElements:function(n){return n=n||this._tableElement,n&&n.children("tbody").children(".dx-row").not("."+u)},_getFreeSpaceRowElement:function(){var n=this._tableElement;return n&&n.children("tbody").children("."+u)},_appendRow:function(n,t){var i=this;i.option("rowTemplate")&&i._delayedTemplates.length&&t?i._delayedTemplates.push({container:n,template:nt,options:t}):n.append(t)},_updateNoDataText:function(){var t=this.element().find("."+s),u=!this._dataController.items().length,f=this._dataController.isLoading(),i=this.option("rtlEnabled"),r={};t.length||(t=n("<span>").addClass(s).hide().appendTo(this.element())),t.text(this.option("noDataText")),r={marginTop:-Math.floor(t.height()/2),marginRight:i?-Math.floor(t.width()/2):0,marginLeft:i?0:-Math.floor(t.width()/2)},t.css(r),u&&!f?t.show():t.hide()},_createTable:function(){var t=this;return t.callBase.apply(t,arguments).on("dxclick",".dx-row",t.createAction(function(i){var r=i.jQueryEvent;n(r.target).closest("a").length||(t._rowClick(t.getRowIndex(r.currentTarget),r),r.preventDefault())}))},_rowClick:function(i,r){var u=this._dataController.items()[i]||{};this.executeAction("onRowClick",n.extend({rowIndex:i,columns:this._columnsController.getVisibleColumns(),jQueryEvent:r,rowElement:n(r.target).closest(".dx-row"),evaluate:function(n){var i=t.data.utils.compileGetter(n);return i(u.data)}},u))},_renderCells:function(t,i){var o,e=[],r,u=i.columns,s=t.rowIndex,h,f,c;if(t.rowType==="group"){for(f=(t.groupIndex||0)+i.columnsCountBeforeGroups,r=0;r<=f;r++)h=r===f&&u[r].allowCollapsing&&i.scrollingMode!=="infinite"?!!t.isExpanded:null,e.push(this._createCell(h,t,s,{command:"expand",cssClass:u[r].cssClass}));c=n.extend({},u[f],{command:null,cssClass:null}),o=this._createCell(t.values[t.groupIndex],t,s,c,f),o.attr("colspan",u.length-f-1),e.push(o)}else if(t.values)for(r=0;r<u.length;r++)e.push(this._createCell(t.values[r],t,s,u[r],r));return e},_renderTable:function(t){for(var l=t.length,f,o,h,c=0,u=this._columnsController.getVisibleColumns(),a=this._columnsController.getGroupColumns(),s=this.option("rowTemplate"),v=this.option("scrolling.mode"),e=this._createTable(u),r=0;r<u.length;r++)if(u[r].command==="expand"){c=r;break}for(r=0;r<l;r++)f=t[r],!i.isDefined(f.groupIndex)&&s?this._renderTemplate(e,s,n.extend({columns:u},f)):(h=this._renderCells(f,{columns:u,scrollingMode:v,columnsCountBeforeGroups:c,groupColumns:a}),o=this._createRow(f),o.append(h),this._rowPrepared(o,n.extend({columns:u},f)),this._appendRow(e,o));return s&&this._highlightSearchText(e),this._renderFreeSpaceRow(e,u),e},_renderCore:function(n){var t=this,e=n&&n.items||t._dataController.items(),i,r,u=t.element(),f=u.parent();n=n||{},u.addClass(a).toggleClass(p,!t.option("wordWrapEnabled")),i=t._renderTable(e),t._renderScrollable(i),r=t._findContentElement(),t._updateContent(r,n,i),(!f||f.parent().length)&&t.renderDelayedTemplates(),t._lastColumnWidths=null},_getTableElements:function(){return this.element().find("> ."+k+" > ."+d+"> ."+f+"> ."+v)},getRowIndex:function(n){return this._getRowElements().index(n)},getRow:function(t){var i=this._getRowElements();if(i.length>t)return n(i[t])},getCell:function(t){var r=this._getRowElements(),i;if(r.length>0&&t.rowIndex>=0&&(t.rowIndex=t.rowIndex<r.length?t.rowIndex:r.length-1,i=r[t.rowIndex].cells,i&&i.length>0))return n(i[i.length>t.columnIndex?t.columnIndex:i.length-1])},updateFreeSpaceRowHeight:function(){var n=this,f,e=n._findContentElement(),t=n._getFreeSpaceRowElement(),o=0,i,r,u;t&&e&&(t.hide(),f=n.element().height(),o=e.outerHeight(),u=f-o-n.getScrollbarWidth(!0),n._dataController.items().length>0?u>0||!n._dataController.items().length?(t.height(u),t.show()):n._hasHeight||(i=n._dataController.pageSize()-n._dataController.items().length,r=n.option("scrolling.mode"),i>0&&n._dataController.pageCount()>1&&r!=="virtual"&&r!=="infinite"&&(t.height(i*n._rowHeight),t.show())):(t.height(0),t.show()))},_columnOptionChanged:function(n){var t=n.optionNames;n.changeTypes.grouping||(t.width||t.visibleWidth)&&(this.callBase(n),this._fireColumnResizedCallbacks())},getScrollable:function(){return this._scrollable},callbackNames:function(){return["scrollOffsetChanged"]},init:function(){var n=this,t=n.getController("data"),i;n.callBase(),n._editorFactoryController=n.getController("editorFactory"),n._rowHeight=0,n._scrollTop=0,n._hasHeight=!1,t.loadingChanged.add(function(t,i){n.setLoading(t,i)}),n._delayedTemplates=[],n._templatesCache={},n.createAction("onRowClick"),n.createAction("onCellClick"),n.createAction("onCellHoverChanged",{excludeValidators:["disabled","readOnly"]}),n.createAction("onCellPrepared",{excludeValidators:["designMode","disabled","readOnly"]}),n.createAction("onRowPrepared",{excludeValidators:["designMode","disabled","readOnly"]}),i=function(){n.scrollToPage(t.pageIndex())},t.pageIndexChanged.add(i),t.pageSizeChanged.add(i),t.filterChanged.add(i),t.dataSourceChanged.add(i)},_handleDataChanged:function(n){var t=this;switch(n.changeType){case"refresh":case"prepend":case"append":case"update":t.render(null,n);break;default:t._update(n)}},publicMethods:function(){return["isScrollbarVisible","getTopVisibleRowData","getScrollbarWidth","getCellElement"]},contentWidth:function(){return this.element().width()-this.getScrollbarWidth()},renderDelayedTemplates:function(){for(var n,t=this._delayedTemplates;t.length;)n=t.shift(),n.template.render(n.options,n.container),n.options.column&&this._updateCell(n.container,n.options)},getScrollbarWidth:function(n){var t=this._scrollableContainer&&this._scrollableContainer.get(0),i=0;return t&&(i=n?t.offsetHeight-t.clientHeight:t.offsetWidth-t.clientWidth),i},_fireColumnResizedCallbacks:function(){for(var u=this,f=u._lastColumnWidths||[],r=[],t=u._columnsController.getVisibleColumns(),n=0;n<t.length;n++)r[n]=t[n].visibleWidth,t[n].resizedCallbacks&&!i.isDefined(t[n].groupIndex)&&f[n]!==r[n]&&t[n].resizedCallbacks.fire(r[n]);u._lastColumnWidths=r},_resizeCore:function(){var n=this,t;n.callBase(),n._fireColumnResizedCallbacks(),n._updateRowHeight(),n._updateNoDataText(),n.updateFreeSpaceRowHeight(),t=n.element().data("dxScrollable"),t&&t.update(),n.setLoading(n._dataController.isLoading())},scrollToPage:function(n){var t=this,r=t.option("scrolling.mode"),u=t._dataController,f=u?u.pageSize():0,i;i=r==="virtual"||r==="infinite"?n*t._rowHeight*f:0,t.scrollTo({y:i,x:0})},scrollTo:function(n){var t=this.element(),i=t&&t.data("dxScrollable");i&&i.scrollTo(n)},height:function(n){var u=this,t=this.element(),r;if(i.isDefined(n))u._hasHeight=n!=="auto",t&&t.height(n),r=this._getFreeSpaceRowElement(),r&&r.hide();else return t?t.height():0},setLoading:function(n,t){var i=this,r=i._loadPanel,e=i._dataController,f=i.option("loadPanel")||{},o=e.isLoaded()?f.animation:null,u;r&&(u={message:t||f.text,animation:o,visible:n},clearTimeout(i._hideLoadingTimeoutID),r.option("visible")&&!n?i._hideLoadingTimeoutID=setTimeout(function(){r.option(u)},g):r.option(u),i._updateNoDataText())},isScrollbarVisible:function(){var n=this.element();return n?this._findContentElement().outerHeight()-n.height()>0:!1},setRowsOpacity:function(t,i){var r=this,u=r._getRowElements().not("."+e)||[];n.each(u,function(r,u){n(u).children().eq(t).css({opacity:i})})},getTopVisibleItemIndex:function(){var t=this,n=0,f=0,i=0,e,o=t._scrollTop,s=t._findContentElement().offset().top,r=t._dataController.items();if(r.length&&t._tableElement){for(e=t._tableElement.children("tbody").children(".dx-row:visible, .dx-error-row").not("."+u),n=0;n<r.length;n++)if(f=i,i=e.eq(n).offset().top-s,i>o){o*2<i+f&&n&&n--;break}n&&n===r.length&&n--}return n},getTopVisibleRowData:function(){var n=this.getTopVisibleItemIndex(),t=this._dataController.items();if(t[n])return t[n].data},getCellElement:function(n,t){var f=this,e=f._getRowElements().eq(n),r,o=f._columnsController,s,u=t;return i.isString(t)&&(s=o.columnOption(t,"index"),u=o.getVisibleIndex(s)),e.length&&u>=0&&(r=e.children().eq(u)),r&&r.length?r:void 0},optionChanged:function(n){var t=this;t.callBase(n);switch(n.name){case"wordWrapEnabled":case"hoverStateEnabled":case"showColumnLines":case"showRowLines":case"rowAlternationEnabled":case"rowTemplate":case"onCellPrepared":case"onRowPrepared":t.render(),t.component.resize();break;case"scrolling":case"rtlEnabled":t._rowHeight=null,t._tableElement=null;break;case"disabled":case"loadPanel":t._tableElement=null,t.render(),t.component.resize();break;case"noDataText":t._updateNoDataText();break;case"onCellHoverChanged":t.render(),t.component.resize()}},dispose:function(){clearTimeout(this._hideLoadingTimeoutID)}}),r.registerModule("rows",{defaultOptions:function(){return{hoverStateEnabled:!1,loadPanel:{enabled:!0,text:Globalize.localize("Loading"),width:200,height:70,showIndicator:!0,indicatorSrc:"",showPane:!0},rowTemplate:null,columnAutoWidth:!1,noDataText:Globalize.localize("dxDataGrid-noDataText"),wordWrapEnabled:!1,showColumnLines:!0,showRowLines:!1,rowAlternationEnabled:!1,activeStateEnabled:!1}},views:{rowsView:r.RowsView}})}(jQuery,DevExpress),function(n,t){var r=t.ui,o=r.events,u=t.utils,i=r.dxDataGrid,f="dx-datagrid-pager",e=10;i.PagerView=i.View.inherit({init:function(){var n=this,t=n.getController("data");n._isVisible=!1,t.changed.add(function(){n.render()})},_getPager:function(){var n=this.element();return n&&n.data("dxPager")},_renderCore:function(){var t=this,o=t.element().addClass(f),i=t.option("pager")||{},n=t.getController("data"),s=t.option("rtlEnabled"),r={maxPagesCount:e,pageIndex:n.pageIndex()+1,pageCount:n.pageCount(),pageSize:n.pageSize(),showPageSizes:i.showPageSizeSelector,showInfo:i.showInfo,showNavigationButtons:i.showNavigationButtons,pageSizes:t.getPageSizes(),rtlEnabled:s,hasKnownLastPage:n.hasKnownLastPage(),pageIndexChanged:function(t){n.pageIndex()!==t-1&&setTimeout(function(){n.pageIndex(t-1)})},pageSizeChanged:function(t){setTimeout(function(){n.pageSize(t)})}};u.isDefined(i.infoText)&&(r.infoText=i.infoText),o.dxPager(r)},getPageSizes:function(){var t=this,e=t.getController("data"),r=t.option("pager"),f=r&&r.allowedPageSizes,i=e.pageSize();return u.isDefined(t._pageSizes)&&n.inArray(i,t._pageSizes)!==-1||(t._pageSizes=[],r&&(n.isArray(f)?t._pageSizes=f:f&&i>1&&(t._pageSizes=[Math.floor(i/2),i,i*2]))),t._pageSizes},isVisible:function(){var n=this,i=n.getController("data"),u=n.option("pager"),t=u&&u.visible,r=n.option("scrolling");return n._isVisible?!0:(t==="auto"&&(t=r&&(r.mode==="virtual"||r.mode==="infinite")?!1:i.pageCount()>1||i.isLoaded()&&!i.hasKnownLastPage()),n._isVisible=t,t)},getHeight:function(){var n=this._getPager();return n&&this.isVisible()?n.getHeight():0},optionChanged:function(n){var t=this;switch(n.name){case"paging":case"pager":t._pageSizes=null;case"scrolling":t._isVisible=!1,t.render(),n.name==="pager"&&t.component&&t.component.resize()}}}),i.registerModule("pager",{defaultOptions:function(){return{paging:{enabled:!0,pageSize:undefined,pageIndex:undefined},pager:{visible:"auto",showPageSizeSelector:!1,allowedPageSizes:"auto"}}},views:{pagerView:i.PagerView}})}(jQuery,DevExpress),function(n,t){var i=t.ui.dxDataGrid,r=t.utils,u="dx-datagrid",c="dx-hidden",l="dx-datagrid-table",a="dx-datagrid-table-fixed",f="dx-datagrid-borders",p="dx-datagrid-headers-hidden",e="dx-datagrid-important-margin",v=100,y=50,o=["columnsSeparatorView","blockSeparatorView","trackerView","headerPanel","columnHeadersView","rowsView","footerView","columnChooserView","pagerView","draggingHeaderView","contextMenuView","errorView"],s=function(n,t){var r=[],i;if(n&&t&&n.length&&n.length===t.length)for(i=0;i<n.length;i++)r.push(n[i]>t[i]?n[i]:t[i]);else n&&(r=n);return r},h=function(n){return r.isString(n)&&n.slice(-1)==="%"};i.ResizingController=i.ViewController.inherit({_initPostRenderHandlers:function(){var n=this;n._refreshSizesHandler||(n._refreshSizesHandler=function(t){n._dataController.changed.remove(n._refreshSizesHandler);var i=t&&t.changeType;t&&i!=="refresh"&&i!=="append"&&i!=="update"||n.resize(),i&&n.component._fireContentReadyAction()},n._dataController.changed.add(function(){n._dataController.changed.add(n._refreshSizesHandler)}),n._columnHeadersView.sizeChanged.add(n._refreshSizesHandler))},_getBestFitWidths:function(){var n=this,i=n._rowsView.getColumnWidths(),r=n._columnHeadersView&&n._columnHeadersView.getColumnWidths(),u=n._footerView&&n._footerView.getColumnWidths(),t;return t=s(i,r),t=s(t,u)},_setVisibleWidths:function(t,i){var r=this._columnsController;r.beginUpdate(),n.each(t,function(n,t){var u=t.command?"command:"+t.command:t.index;r.columnOption(u,"visibleWidth",i[n])}),r.endUpdate()},_toggleBestFitMode:function(n){var t=this.component.element();t.find("."+l).toggleClass(a,!n),t.find("input").toggleClass(c,n)},_synchronizeColumns:function(){var t=this,s=t.getView("gridView").element(),e=t._columnsController,i=e.getVisibleColumns(),f=t.option("columnAutoWidth"),u=f,o=!1,r=[];n.each(i,function(n,t){if(t.width==="auto")return u=!0,!1}),t._setVisibleWidths(i,[]),u&&(t._toggleBestFitMode(!0),r=t._getBestFitWidths(),n.each(i,function(n,t){var i=t.command?"command:"+t.command:t.index;e.columnOption(i,"bestFitWidth",r[n],!0)})),n.each(i,function(n){this.width!=="auto"&&(this.width?r[n]=this.width:f||(r[n]=undefined))}),o=t._correctColumnWidths(r,i),f&&t._processStretch(r,i),u&&t._toggleBestFitMode(!1),(u||o)&&t._setVisibleWidths(i,r)},_correctColumnWidths:function(t,i){var r=this,s=!1,c=!1,l=!1,f=r.component.element(),a=r._hasWidth,u,e,o;if(n.each(i,function(n){this.width!=="auto"&&(this.width?t[n]=this.width:c=!0),h(this.width)&&(s=!0)}),f&&r._maxWidth&&(delete r._maxWidth,f.css("max-width","")),!c&&t.length&&(e=r._rowsView.contentWidth(),o=r._getTotalWidth(t,e),o<=e)){for(u=t.length-1;u>=0&&i[u].command;)u--;t[u]="auto",l=!0,a||s||(r._maxWidth=o,f.css("max-width",r._maxWidth))}return l},_processStretch:function(t,i){var o=this._rowsView.contentWidth(),h=this._getTotalWidth(t,o),u={length:0},f,e,s,r;if(t.length&&(n.each(i,function(n){this.width&&(u[n]=!0,u.length++)}),f=o-h,e=Math.floor(f/(t.length-u.length)),s=f-e*(t.length-u.length),f>=0))for(r=0;r<t.length;r++)u[r]||(t[r]+=e,r<s&&t[r]++)},_getTotalWidth:function(n,t){for(var u=0,i,r=0;r<n.length;r++)i=n[r],i&&(u+=h(i)?parseInt(i)*t/100:parseInt(i));return Math.round(u)},updateSize:function(n){var i=this,t,r;i._hasHeight===undefined&&n&&n.closest(document).length&&(t=n.children("."+u),t.length&&t.detach(),i._hasHeight=!!n.height(),r=n.width(),n.addClass(e),i._hasWidth=n.width()===r,n.removeClass(e),t.length&&t.appendTo(n))},publicMethods:function(){return["resize"]},resize:function(){var t=this,c=t._dataController,r=t.component.element(),s=r&&r.height(),u=t.option("loadPanel"),f=t.option("height"),i,h=t.getController("editorFactory"),e;t._initPostRenderHandlers(),t.updateSize(r),f&&t._hasHeight^f!=="auto"&&(e=n("<div>").height(f).appendTo(r),t._hasHeight=!!e.height(),e.remove()),t._hasHeight&&s>0&&t.option("scrolling")?(i=s,n.each(t.getViews(),function(){this.isVisible()&&this.getHeight&&(i-=this.getHeight())})):i=t._hasHeight||c.items().length!==0?"auto":u&&u.visible?u.height+y:v,t._rowsView.height(i),t._columnHeadersView.setScrollerSpacing(t._rowsView.getScrollbarWidth()),t._synchronizeColumns(),n.each(o,function(n,i){var r=t.getView(i);r&&r.resize()}),h&&h.resize()},optionChanged:function(n){switch(n.name){case"width":case"height":this.resize()}},init:function(){var n=this;n._dataController=n.getController("data"),n._columnsController=n.getController("columns"),n._columnHeadersView=n.getView("columnHeadersView"),n._footerView=n.getView("footerView"),n._rowsView=n.getView("rowsView"),n._footerView=n.getView("footerView"),n._rowsView.scrollOffsetChanged.add(function(t){n._columnHeadersView.scrollOffset(t.left),n._footerView.scrollOffset(t.left)})}}),i.GridView=i.View.inherit({init:function(){var n=this;n._dataController=n.getController("data"),n._rowsView=n.getView("rowsView")},getView:function(n){return this.component._views[n]},element:function(){return this._groupElement},optionChanged:function(n){var t=this;t.callBase(n),r.isDefined(t._groupElement)&&n.name==="showBorders"&&t._groupElement.toggleClass(f,!!n.value)},render:function(t){var i=this,e=i.getController("resizing"),r=i._groupElement||n("<div />").addClass(u).toggleClass(f,!!i.option("showBorders"));i._rootElement=t||i._rootElement,i._groupElement=r,n.each(o,function(n,t){var u=i.getView(t);u&&u.render(r)}),i.update()},update:function(){var n=this,t=n._rootElement,i=n._groupElement,r=n.getController("resizing");t&&i&&(i.parent().length||(r.updateSize(t),i.appendTo(t),n._rowsView.renderDelayedTemplates()),r.resize(),n._dataController.isLoaded()&&n.component._fireContentReadyAction())}}),i.registerModule("gridView",{defaultOptions:function(){n:!1},controllers:{resizing:i.ResizingController},views:{gridView:i.GridView}})}(jQuery,DevExpress),function(n,t){var h=t.ui,f=h.events,r=f.addNamespace,o=t.utils,i=h.dxDataGrid,c=t.fx,d="dx-datagrid-columns-separator",l="dx-datagrid-columns-separator-transparent",a="dx-datagrid-drag-header",g="dx-datagrid-text-content",s="dx-datagrid-drag-action",v="dx-datagrid-tracker",y="dx-block-separator",p="dx-datagrid-drop-highlight",w="dx-header-row",nt="dx-widget",u="dxDataGridResizingReordering",tt=10,b=5,e=function(n){return n.option("allowColumnResizing")||n.getController("columns").isColumnOptionUsed("allowResizing")},k=function(n){return n.option("allowColumnReordering")||n.getController("columns").isColumnOptionUsed("allowReordering")};i.getPointsByColumns=function(n,t,i){for(var e=n.length,h=!1,o,u,f,c=[],l,s=0,r=0;r<=e;r++)r<e&&(u=n.eq(s),f=u.offset(),l=u.css("direction")==="rtl"),o={index:r,x:f?f.left+(!i&&l^r===e?u.outerWidth():0):0,y:f?f.top+(i&&r===e?u.outerHeight():0):0,columnIndex:s},t&&(h=t(o)),h||c.push(o),s++;return c},i.TrackerView=i.View.inherit({_renderCore:function(){this.callBase(),this.element().addClass(v),this.hide()},init:function(){var t=this,n;t.callBase(),t.getController("tablePosition").positionChanged.add(function(i){n=t.element(),n&&n.hasClass(v)&&(n.css({top:i.top}),n.height(i.height))})},isVisible:function(){return e(this)},show:function(){this.element().show()},hide:function(){this.element().hide()},setHeight:function(n){this.element().height(n)}}),i.SeparatorView=i.View.inherit({_renderSeparator:function(){},_renderCore:function(n){this.callBase(n),this._isShown=!0,this._renderSeparator(),this.hide()},show:function(){this._isShown=!0},hide:function(){this._isShown=!1},height:function(n){var t=this.element();if(t)if(o.isDefined(n))t.height(n);else return t.height()},width:function(n){var t=this.element();if(t)if(o.isDefined(n))t.width(n);else return t.width()}}),i.ColumnsSeparatorView=i.SeparatorView.inherit({_renderSeparator:function(){this.callBase();var n=this.element();n.addClass(d)},_subscribeToEvent:function(){var t=this,n;t.getController("tablePosition").positionChanged.add(function(i){n=t.element(),n&&(n.css({top:i.top}),n.height(i.height))})},isVisible:function(){return this.option("showColumnHeaders")&&(k(this)||e(this))},init:function(){this.callBase(),this._isTransparent=e(this),this.isVisible()&&this._subscribeToEvent()},show:function(){var t=this,n=this.element();n&&!t._isShown&&(t._isTransparent?n.removeClass(l):n.show()),this.callBase()},hide:function(){var n=this.element();n&&this._isShown&&(this._isTransparent?n.addClass(l):n.hide()),this.callBase()},moveByX:function(n){var t=this.element();t&&t.css("left",n-this._parentElement().offset().left)},changeCursor:function(n){n=o.isDefined(n)?n:"";var t=this.element();t&&t.css("cursor",n)}}),i.BlockSeparatorView=i.SeparatorView.inherit({_renderSeparator:function(){this.callBase(),this.element().addClass(y).html("&nbsp;")},hide:function(){var t=this,n=this._parentElement(),i=this.element();i&&this._isShown&&i.hide(),n&&!n.children("."+y).length&&n.prepend(t.element()),t.callBase()},isVisible:function(){var n=this.option("groupPanel"),t=this.option("columnChooser");return n&&n.visible||t&&t.enabled},show:function(n){var i=this,t=this.element(),r=function(n){c.stop(t,!0),c.animate(t,{type:"slide",from:{width:0,display:n.display},to:n,duration:300,easing:"swing"})};if(t&&!i._isShown)switch(n){case"group":r({width:"50px",display:"inline-block"});break;case"columnChooser":r({width:"100%",display:"block"});break;default:t.show()}i.callBase()}}),i.DraggingHeaderView=i.View.inherit({_isDragging:!1,_getDropOptions:function(){var n=this;if(n._dragOptions)return{sourceColumnIndex:n._dragOptions.columnIndex,sourceColumnElement:n._dragOptions.columnElement,sourceLocation:n._dragOptions.sourceLocation,targetColumnIndex:n._dropColumnIndex,targetLocation:n._dropLocation}},_dropHeader:function(n){var r=n.jQueryEvent,t=r.data.that,i=t._controller;t.element().hide(),i&&t._isDragging&&i.drop(t._getDropOptions()),t.element().appendTo(t._parentElement()),t._dragOptions=null,t._isDragging=!1,document.onselectstart=t._onSelectStart||null},_getDraggingPanelByPos:function(t){var r=this,i;return n.each(r._dragOptions.draggingPanels,function(n,r){if(r){var u=r.getBoundingRect();if(u&&(u.bottom===undefined||t.y<u.bottom)&&(u.top===undefined||t.y>u.top)&&(u.left===undefined||t.x>u.left)&&(u.right===undefined||t.x<u.right))return i=r,!1}}),i},_pointCreated:function(n,t,i,r){var u=t[n.columnIndex],f=t[n.columnIndex-1];switch(i){case"columnChooser":return!0;case"headers":return r&&!r.allowReordering||(!u||!u.allowReordering)&&(!f||!f.allowReordering);default:return t.length===0}},_moveHeader:function(n){var v=n.jQueryEvent,t=v.data.that,l,u,y,p,w,k,o=f.eventData(v),s,d=t._controller,tt=t._columnsResizerViewController?t._columnsResizerViewController.isResizing():!1,r,e,h=t._dragOptions,g,a,c,nt;if(t._isDragging&&!tt){if(w=Math.abs(o.x-h.columnElement.offset().left-h.deltaX),k=Math.abs(o.y-h.columnElement.offset().top-h.deltaY),(t.element().is(":visible")||w>b||k>b)&&(t.element().show(),y=o.x-h.deltaX,p=o.y-h.deltaY,t.element().offset({left:y,top:p}),s=t._getDraggingPanelByPos(o),s))if(nt=t.option("rtlEnabled"),g=s.getName()==="columnChooser",c=g?"y":"x",l=s.getColumnElements()||[],u=i.getPointsByColumns(l,function(n){return t._pointCreated(n,s.getColumns(),s.getName(),h.sourceColumn)},c==="y"),t._dropLocation=s.getName(),u.length>0){for(r=0;r<u.length;r++)if(a=u[r+1]&&(u[r][c]+u[r+1][c])/2,a===undefined||(nt&&c==="x"?o[c]>a:o[c]<a)){t._dropColumnIndex=u[r].columnIndex,e=t._getDropOptions(),l[r]?e.targetColumnElement=l.eq(r):(e.targetColumnElement=l.last(),e.isLast=!0),e.posX=u[r].x,d.dock(e);break}}else t._dropColumnIndex=-1,e=t._getDropOptions(),d.dock(e);v.preventDefault()}},_subscribeToEvents:function(t){var i=this;i._moveHeaderAction=this.createAction(this._moveHeader),i._dropHeaderAction=this.createAction(this._dropHeader);n(document).on(r("dxpointermove",u),{that:i,rootElement:t},i._moveHeaderAction);i.element().on(r("dxpointerup",u),{that:i},i._dropHeaderAction);n(document).on(r("dxpointerup",u),{that:i},i._dropHeaderAction)},_renderCore:function(){this.element().addClass(a+" "+g+" "+nt).css("display","none")},_afterRender:function(n){this._unsubscribeFromEvents(),this._subscribeToEvents(n)},_unsubscribeFromEvents:function(){this._dropHeaderAction&&(this.element().off(r("dxpointerup",u),this._dropHeaderAction),n(document).off(r("dxpointerup",u),this._dropHeaderAction)),this._moveHeaderAction&&n(document).off(r("dxpointermove",u),this._moveHeaderAction)},dispose:function(){this._dragOptions=null,this._unsubscribeFromEvents(),this.element().parent().find("."+a).remove()},isVisible:function(){var t=this.getController("columns"),n=t.getCommonSettings();return this.option("showColumnHeaders")&&(k(this)||n.allowGrouping||n.allowHiding)},init:function(){this.callBase(),this._controller=this.getController("draggingHeader"),this._columnsResizerViewController=this.getController("columnsResizer")},drag:function(t){var r=this,i=t.columnElement;r._dragOptions=t,r._isDragging=!0,r._dropColumnIndex=t.columnIndex,r._dropLocation=t.sourceLocation,r._onSelectStart=document.onselectstart,document.onselectstart=function(){return!1},r.element().css({textAlign:i&&i.css("text-align"),height:i&&i.height(),width:i&&i.width(),whiteSpace:i&&i.css("white-space")}).addClass(s).text(t.sourceColumn.caption),r.element().appendTo(n(document.body))}}),i.ColumnsResizerViewController=i.ViewController.inherit({_isHeadersRowArea:function(n){if(this._columnHeadersView){var i=this._columnHeadersView.element(),r,t;if(i)return t=i.offset().top,r=this._columnHeadersView.getHeadersRowHeight(),n>=t&&n<=t+r}return!1},_pointCreated:function(n,t,i){var r,u;return n.index>0&&n.index<t?(n.columnIndex-=1,r=i[n.columnIndex]||{},u=i[n.columnIndex+1]||{},!(r.allowResizing&&u.allowResizing)):!0},_getTargetPoint:function(n,t,i){if(n)for(var r=0;r<n.length;r++)if(n[r].x-i<=t&&t<=n[r].x+i)return n[r];return null},_moveSeparator:function(n){var r=n.jQueryEvent,t=r.data,s=t._pointsByColumns,u=t._columnsSeparatorView.width(),e=t._columnsSeparatorView.element().offset(),h=u/2,o=t._$parentContainer.offset().left,i=f.eventData(r);t._isResizing?o<=i.x&&i.x<=o+t._$parentContainer.width()&&t._updateColumnsWidthIfNeeded(t._targetPoint.columnIndex,i.x)&&(t._columnsSeparatorView.moveByX(t._targetPoint.x+(i.x-t._resizingInfo.startPosX)),t._tablePositionController.update(),r.preventDefault()):t._isHeadersRowArea(i.y)?(t._targetPoint=t._getTargetPoint(s,i.x,u),t._isReadyResizing=!1,t._columnsSeparatorView.changeCursor(),t._targetPoint&&e.top<=i.y&&e.top+t._columnsSeparatorView.height()>=i.y&&(t._columnsSeparatorView.changeCursor("col-resize"),t._columnsSeparatorView.moveByX(t._targetPoint.x-h),t._isReadyResizing=!0,r.preventDefault())):(t._isReadyResizing=!1,t._columnsSeparatorView.changeCursor())},_endResizing:function(n){var i=n.jQueryEvent,t=i.data;t._isResizing&&(t._updatePointsByColumns(),t._resizingInfo=null,t._columnsSeparatorView.hide(),t._columnsSeparatorView.changeCursor(),t._trackerView.hide(),t._isReadyResizing=!1,t._isResizing=!1)},_setupResizingInfo:function(n){var t=this,i=t._columnHeadersView.getHeaderElement(t._targetPoint.columnIndex),r=t._columnHeadersView.getHeaderElement(t._targetPoint.columnIndex+1);t._resizingInfo={startPosX:n,currentColumnWidth:i&&i.length>0?i.outerWidth():0,nextColumnWidth:r&&r.length>0?r.outerWidth():0}},_startResizing:function(n){var i=n.jQueryEvent,t=i.data,r=f.eventData(i);f.isTouchEvent(i)&&(t._isHeadersRowArea(r.y)?(t._targetPoint=t._getTargetPoint(t._pointsByColumns,r.x,tt),t._targetPoint&&(t._columnsSeparatorView.moveByX(t._targetPoint.x-t._columnsSeparatorView.width()/2),t._isReadyResizing=!0)):t._isReadyResizing=!1),t._isReadyResizing&&(t._targetPoint,t._setupResizingInfo(r.x),t._columnsSeparatorView.show(),t._trackerView.show(),t._isResizing=!0,i.preventDefault())},_generatePointsByColumns:function(){var n=this,u=n._columnsController?n._columnsController.getVisibleColumns():[],t=n._columnHeadersView.getColumnElements(),r=[];t&&t.length>0&&(r=i.getPointsByColumns(t,function(i){return n._pointCreated(i,t.length,u)})),n._pointsByColumns=r},_unsubscribeFromEvents:function(){this._moveSeparatorHandler&&this._$parentContainer.off(r("dxpointermove",u),this._moveSeparatorHandler),this._startResizingHandler&&this._$parentContainer.off(r("dxpointerdown",u),this._startResizingHandler),this._endResizingHandler&&(this._columnsSeparatorView.element().off(r("dxpointerup",u),this._endResizingHandler),n(document).off(r("dxpointerup",u),this._endResizingHandler))},_subscribeToEvents:function(){this._moveSeparatorHandler=this.createAction(this._moveSeparator),this._startResizingHandler=this.createAction(this._startResizing),this._endResizingHandler=this.createAction(this._endResizing);this._$parentContainer.on(r("dxpointermove",u),this,this._moveSeparatorHandler);this._$parentContainer.on(r("dxpointerdown",u),this,this._startResizingHandler);this._columnsSeparatorView.element().on(r("dxpointerup",u),this,this._endResizingHandler);n(document).on(r("dxpointerup",u),this,this._endResizingHandler)},_updateColumnsWidthIfNeeded:function(n,t){var r,e=!1,o,i=this._columnsController,h=i.getVisibleColumns(),c=this._columnsSeparatorView.width(),u,f,s;return r=t-this._resizingInfo.startPosX,this.option("rtlEnabled")&&(r=-r),s=this._resizingInfo.currentColumnWidth+r,o=this._resizingInfo.nextColumnWidth-r,e=!(s<=c||o<=c),e&&(u=h[n],f=h[n+1],i.beginUpdate(),u&&i.columnOption(u.index,"visibleWidth",undefined),f&&i.columnOption(f.index,"visibleWidth",undefined),u&&i.columnOption(u.index,"width",Math.floor(s)),f&&i.columnOption(f.index,"width",Math.floor(o)),i.endUpdate()),e},_updatePointsByColumns:function(){for(var i,r=this.option("rtlEnabled"),n,t=0;t<this._pointsByColumns.length;t++)i=this._pointsByColumns[t],n=this._columnHeadersView.getHeaderElement(i.columnIndex+1),n&&n.length>0&&(i.x=n.offset().left+(r?n.outerWidth():0))},isResizing:function(){return this._isResizing},init:function(){var n=this,i,t,r=function(t){n._scrollLeft!==t.left&&(n._scrollLeft=t.left,n._generatePointsByColumns())},u=function(){n._generatePointsByColumns()};n.callBase(),e(n)&&(n._columnsSeparatorView=n.getView("columnsSeparatorView"),n._columnHeadersView=n.getView("columnHeadersView"),n._trackerView=n.getView("trackerView"),n._rowsView=n.getView("rowsView"),n._columnsController=n.getController("columns"),n._tablePositionController=n.getController("tablePosition"),n._$parentContainer=n._columnsSeparatorView.component.element(),n._columnHeadersView.renderCompleted.add(u),n._columnHeadersView.resizeCompleted.add(u),n._columnsSeparatorView.renderCompleted.add(function(){n._unsubscribeFromEvents(),n._subscribeToEvents()}),n._rowsView.renderCompleted.add(function(){n._rowsView.scrollOffsetChanged.remove(r),n._rowsView.scrollOffsetChanged.add(r)}),i=n.getView("gridView"),t=n._rowsView.getScrollbarWidth()!==0,n.getController("tablePosition").positionChanged.add(function(){if(n._isResizing&&!n._rowsView.isResizing){var r=n._rowsView.getScrollbarWidth()!==0;t!==r?(t=r,i.resize()):(n._rowsView.updateFreeSpaceRowHeight(),n._columnHeadersView.processSizeChanged())}}))},dispose:function(){this._unsubscribeFromEvents()}}),i.TablePositionViewController=i.ViewController.inherit({update:function(){var n=this._columnHeadersView.element(),t=this._columnHeadersView?this._columnHeadersView.getHeight():0,i=this._rowsView?this._rowsView.height()-this._rowsView.getScrollbarWidth(!0):0;this.positionChanged.fire({height:t+i,top:n&&n.length>0?Math.floor(n[0].offsetTop):0})},init:function(){var n=this;n.callBase(),n._columnHeadersView=this.getView("columnHeadersView"),n._rowsView=this.getView("rowsView"),n._pagerView=this.getView("pagerView"),n._rowsView.resizeCompleted.add(function(){n.update()})},ctor:function(t){this.callBase(t),this.positionChanged=n.Callbacks()}}),i.DraggingHeaderViewController=i.ViewController.inherit({_subscribeToEvent:function(t,i){var e=this;n.each(i,function(o,h){if(h){var l=h.getColumnElements()||[],a=h.getName(),c=h.getColumns()||[];n.each(l,function(o,l){if(n(l).off(r("dxpointerdown",u)),n(l).removeClass(s),h.allowDragging(c[o],i)){n(l).addClass(s);n(l).on(r("dxpointerdown",u),e.createAction(function(r){var u=r.jQueryEvent,e=f.eventData(u);u.preventDefault(),t.drag({deltaX:e.x-n(u.currentTarget).offset().left,deltaY:e.y-n(u.currentTarget).offset().top,sourceColumn:c[o],columnIndex:o,columnElement:n(l),sourceLocation:h.getName(),draggingPanels:i})}))}})}})},_getSeparator:function(n){return n==="headers"?this._columnsSeparatorView:this._blockSeparatorView},hideSeparators:function(){var n=this._blockSeparatorView,t=this._columnsSeparatorView;this._animationColumnIndex=null,n&&n.hide(),t&&t.hide()},init:function(){var n=this,t;n.callBase(),n._columnsController=n.getController("columns"),n._columnHeadersView=n.getView("columnHeadersView"),n._columnsSeparatorView=n.getView("columnsSeparatorView"),n._draggingHeaderView=n.getView("draggingHeaderView"),n._rowsView=n.getView("rowsView"),n._blockSeparatorView=n.getView("blockSeparatorView"),n._headerPanelView=n.getView("headerPanel"),n._columnChooserView=n.getView("columnChooserView"),t=function(){n._draggingHeaderView&&n._subscribeToEvent(n._draggingHeaderView,[n._columnChooserView,n._columnHeadersView,n._headerPanelView])},n._columnHeadersView.renderCompleted.add(t),n._headerPanelView.renderCompleted.add(t),n._columnChooserView&&n._columnChooserView.renderCompleted.add(t)},allowDrop:function(n){return this._columnsController.allowMoveColumn(n.sourceColumnIndex,n.targetColumnIndex,n.sourceLocation,n.targetLocation)},allowDragColumn:function(n,t,i){var r=n[t],u,f=0,e=function(n){return n.allowReordering||n.allowGrouping||n.allowHiding};if(!r)return!1;switch(i){case"headers":for(u=0;u<n.length;u++)e(n[u])&&f++;return f>1&&e(r);case"group":return r.allowGrouping;case"columnChooser":return r.allowHiding}},dock:function(n){var t=this,u=n.targetColumnIndex,f=n.sourceLocation,s=n.sourceColumnIndex,e=n.sourceColumnElement,r=n.targetLocation,i=t._getSeparator(r),o=u>=0,h=function(){t._animationColumnIndex!==u&&(t.hideSeparators(),i.element()[n.isLast?"insertAfter":"insertBefore"](n.targetColumnElement),t._animationColumnIndex=u,i.show(r))};t._columnHeadersView.element().find("."+w).first().toggleClass(p,f!=="headers"&&r==="headers"&&!o),i&&(e&&(e.css({opacity:.5}),f==="headers"&&t._rowsView.setRowsOpacity(s,.5)),t.allowDrop(n)&&o?r==="group"||r==="columnChooser"?h():(t.hideSeparators(),i.moveByX(n.posX-i.width()),i.show()):t.hideSeparators())},drop:function(n){var i=n.sourceColumnElement,t;i&&(i.css({opacity:""}),this._rowsView.setRowsOpacity(n.sourceColumnIndex,""),this._columnHeadersView.element().find("."+w).first().removeClass(p)),this.allowDrop(n)&&(t=this._getSeparator(n.targetLocation),t&&t.hide(),this._columnsController.moveColumn(n.sourceColumnIndex,n.targetColumnIndex,n.sourceLocation,n.targetLocation))}}),i.registerModule("columnsResizingReordering",{views:{columnsSeparatorView:i.ColumnsSeparatorView,blockSeparatorView:i.BlockSeparatorView,draggingHeaderView:i.DraggingHeaderView,trackerView:i.TrackerView},controllers:{draggingHeader:i.DraggingHeaderViewController,tablePosition:i.TablePositionViewController,columnsResizer:i.ColumnsResizerViewController}})}(jQuery,DevExpress),function(n,t){var r=t.ui,e=t.utils,i=r.dxDataGrid,u="dx-datagrid",f="dx-context-menu";i.ContextMenuController=i.ViewController.inherit({getContextMenuItems:function(t){var i;return n.each(this.getViews(),function(){if(this.getContextMenuItems&&(i=this.getContextMenuItems(t),i))return!1}),i}}),i.ContextMenuView=i.View.inherit({viewNames:function(){return["columnHeadersView"]},_renderCore:function(){var t=this;t.element().addClass(f).dxContextMenu({onPositioning:function(i){var u=i.jQueryEvent,f=n(u.target),e=i.component,r=r=t.getController("contextMenu").getContextMenuItems(f);r?e.option("items",r):(i.jQueryEvent.cancel=!0,i.canceled=!0)},onItemClick:function(n){n.itemData.onItemClick&&n.itemData.onItemClick(n)},rtlEnabled:t.option("rtlEnabled"),cssClass:u,target:t.component.element()})}}),i.registerModule("contextMenu",{controllers:{contextMenu:i.ContextMenuController},views:{contextMenuView:i.ContextMenuView}})}(jQuery,DevExpress),function(n,t){var f=t.ui,i=t.utils,r=f.events,u=f.dxDataGrid,o="dx-row",s="dx-group-row",h="dx-datagrid-rowsview",c="dx-master-detail-row",l="dx-datagrid-group-footer",a="dx-command-expand",v=["rowsView"],e="row";u.KeyboardNavigationController=u.ViewController.inherit({_focusView:function(n,t){this._focusedViews.viewIndex=t,this._focusedView=n},_focusInput:function(n){var t=n.find("input").first();t.focus()},_updateFocus:function(){var t=this,i=t._getFocusedCell();t._hasSkipRow(i.parent())&&(i=t._getNextCell("upArrow")),i&&i.length>0&&setTimeout(function(){t.getController("editorFactory").focus()&&t._focus(i),t._editingController.isEditing()&&n.proxy(t._focusInput,t)(i)})},_clickHandler:function(t){var i=t.jQueryEvent,r=n(i.currentTarget);this._isCellValid(r,!0)?(this._focusView(i.data.view,i.data.viewIndex),this._updateFocusedCellPosition(r),this._editingController.isEditing()||r.focus()):this._resetFocusedCell(this)},_initFocusedViews:function(){var t=this,i=t.createAction(t._clickHandler);t._focusedViews=[],n.each(v,function(n,i){var r=t.getView(i);r.isVisible()&&t._focusedViews.push(r)}),n.each(t._focusedViews,function(n,u){u&&u.renderCompleted.add(function(){var f=u.element();f.off(r.addNamespace("dxpointerdown","dxDataGridKeyboardNavigation"),i);f.on(r.addNamespace("dxpointerdown","dxDataGridKeyboardNavigation"),"."+o+" td",{viewIndex:n,view:u},i);t._initKeyDownProcessor(t,f,t._keyDownHandler),t._focusedView&&t._focusedView.name===u.name&&t._isNeedFocus&&t._updateFocus()})})},_initKeyDownProcessor:function(n,t,i){this._keyDownProcessor&&(this._keyDownProcessor.dispose(),this._keyDownProcessor=null),this._keyDownProcessor=new f.KeyboardProcessor({element:t,context:n,handler:i})},_getFocusedCell:function(){if(this._focusedView&&this._focusedCellPosition)return this._focusedView.getCell(this._focusedCellPosition)},_updateFocusedCellPosition:function(n){var t=this;n.length>0&&(this._focusedCellPosition={columnIndex:n[0].cellIndex,rowIndex:n.parent().length>0&&t._focusedView?t._focusedView.getRowIndex(n.parent()):null})},_isCellValid:function(n,t){if(i.isDefined(n)){var r=this._columnsController.getVisibleColumns(),u=n[0].cellIndex,f=t?!1:r[u].command==="expand";if(r.length>u&&!i.isDefined(r[u].groupIndex))return!i.isDefined(r[u].command)||f}},_isGroupRow:function(n){return n&&n.hasClass(s)},_focus:function(n){var i=n.parent(),r=this._getFocusedCell(),t;r&&r.attr("tabindex",null),this._isGroupRow(i)?(t=i,this._focusedCellPosition.rowIndex=this._focusedView.getRowIndex(i)):(t=n,this._updateFocusedCellPosition(n)),t.attr("tabindex",0),t.focus(),this.getController("editorFactory").focus(t)},_hasSkipRow:function(n){return n&&(n.hasClass(c)||n.hasClass(l))},_enterKeyHandler:function(t,i){var s=this._getFocusedCell(),h=this.option("editing"),r=this._focusedCellPosition?this._focusedCellPosition.rowIndex:null,c=this._focusedView&&this._focusedView.getRow(r),f,u,o;this.option("grouping.allowCollapsing")&&this._isGroupRow(c)||this.option("masterDetail.enabled")&&s.hasClass(a)?(f=this._dataController.getKeyByRowIndex(r),u=this._dataController.items()[r],f!==undefined&&u&&u.data&&!u.data.isContinuation&&this._dataController.changeRowExpand(f)):(o=this._editingController.getEditMode()===e,h.editEnabled&&(i?(this._updateFocusedCellPosition(n(t.originalEvent.target).closest("td")),o?setTimeout(n.proxy(this._editingController.saveEditData,this._editingController)):this._editingController.closeEditCell()):o?this._editingController.editRow(r):this._focusedCellPosition&&this._editingController.editCell(r,this._focusedCellPosition.columnIndex)))},_leftRightKeysHandler:function(n,t){var r=this._focusedCellPosition?this._focusedCellPosition.rowIndex:null,u=this._focusedView&&this._focusedView.getRow(r),i;t||this._isGroupRow(u)||(i=this._getNextCell(n.key),i&&this._isCellValid(i)&&this._focus(i),n.originalEvent.preventDefault())},_upDownKeysHandler:function(n,t){var r=this._focusedCellPosition?this._focusedCellPosition.rowIndex:null,i;t||(r===0||this._focusedView&&r===this._focusedView.getRowsCount()-1,i=this._getNextCell(n.key),i&&this._isCellValid(i)&&this._focus(i),n.originalEvent.preventDefault())},_pageUpKeyHandler:function(n){var t=this.option("scrolling.mode"),i=this._dataController.pageIndex(),r=t==="virtual"||t==="infinite";i>0&&!r&&(this._dataController.pageIndex(i-1),n.originalEvent.preventDefault())},_pageDownKeyHandler:function(n){var t=this.option("scrolling.mode"),r=t==="virtual"||t==="infinite",i=this._dataController.pageIndex(),u=this._dataController.pageCount();i<u-1&&!r&&(this._dataController.pageIndex(i+1),n.originalEvent.preventDefault())},_spaceKeyHandler:function(n,t){var i=this._focusedCellPosition?this._focusedCellPosition.rowIndex:null;this.option("selection")&&this.option("selection").mode!=="none"&&!t&&(this._selectionController.changeItemSelection(i,{shift:n.shift,control:n.ctrl}),n.originalEvent.preventDefault())},_crtlAKeyHandler:function(n){n.ctrl&&this.option("selection.mode")==="multiple"&&this.option("selection.allowSelectAll")&&(this._selectionController.selectAll(),n.originalEvent.preventDefault())},_tabKeyHandler:function(t,i){var u=this.option("editing"),r;u&&t.originalEvent.target&&i&&(u.editEnabled||this._editingController.closeEditCell(),this._updateFocusedCellPosition(n(t.originalEvent.target).closest("td")),r=this._getNextCell("rightArrow"),this._isCellValid(r)&&(this._focus(r),this._editingController.getEditMode()!==e&&u.editEnabled?this._editingController.editCell(this._focusedCellPosition.rowIndex,this._focusedCellPosition.columnIndex):this._focusInput(r))),t.originalEvent.preventDefault()},_escapeKeyHandler:function(t,i){var r=this.option("editing");r.editEnabled&&i&&(this._updateFocusedCellPosition(n(t.originalEvent.target).closest("td")),this._editingController.getEditMode()!==e?this._editingController.closeEditCell():this._editingController.cancelEditData(),t.originalEvent.preventDefault())},_ctrlFKeyHandler:function(n){n.ctrl&&this.option("searchPanel")&&this.option("searchPanel").visible&&(this._headerPanel.focus(),n.originalEvent.preventDefault())},_keyDownHandler:function(n){var t=this._editingController.isEditing();if(!n.originalEvent.isDefaultPrevented()){this._isNeedFocus=!0;switch(n.key){case"leftArrow":case"rightArrow":this._leftRightKeysHandler(n,t);break;case"upArrow":case"downArrow":this._upDownKeysHandler(n,t);break;case"pageUp":this._pageUpKeyHandler(n);break;case"pageDown":this._pageDownKeyHandler(n);break;case"space":this._spaceKeyHandler(n,t);break;case"A":this._crtlAKeyHandler(n);break;case"tab":this._tabKeyHandler(n,t);break;case"enter":this._enterKeyHandler(n,t);break;case"escape":this._escapeKeyHandler(n,t);break;case"F":this._ctrlFKeyHandler(n)}n.originalEvent.stopPropagation()}},_isLastRow:function(n){return n===this._dataController.items().length-1},_getNextCell:function(t,i){var e=i||this._focusedCellPosition,r,u,f,o,s;if(this._focusedView&&e){r=e.columnIndex,u=e.rowIndex,s=this.getController("columns").getVisibleColumns().length;switch(t){case"rightArrow":r=r<s-1?r+1:r;break;case"leftArrow":r=r>0?r-1:r;break;case"upArrow":u=u>0?u-1:u;break;case"downArrow":u=this._isLastRow(u)?u:u+1}if(f=this._focusedView.getCell({columnIndex:r,rowIndex:u}),!this._isCellValid(f)&&r>0&&r<s-1&&(f=this._getNextCell(t,n.extend({},e,{columnIndex:r}))),o=f.parent(),this._hasSkipRow(o)){if(u=this._focusedView.getRowIndex(o),this._isLastRow(u))return null;f=this._getNextCell(t,n.extend({},e,{rowIndex:u}))}return f}return null},_resetFocusedCell:function(n){var t=n._getFocusedCell();t&&t.attr("tabindex",null),n._isNeedFocus=!1},init:function(){var t=this;if(t.option("useKeyboard")){t._dataController=t.getController("data"),t._selectionController=t.getController("selection"),t._editingController=t.getController("editing"),t._headerPanel=t.getView("headerPanel"),t._columnsController=t.getController("columns"),t.getController("editorFactory").focused.add(function(n){t._isNeedFocus&&t._focusedView&&t._focusedView.getScrollable&&(t._focusedView.getScrollable().scrollToElement(n),t._isNeedFocus=!1)}),t._focusedCellPosition={columnIndex:0,rowIndex:0},t._dataController.changed.add(function(n){t._focusedCellPosition&&n&&n.changeType==="prepend"&&(t._focusedCellPosition.rowIndex+=n.items.length)}),t._initFocusedViews(),t._documentClickHandler=t.createAction(function(i){n(i.jQueryEvent.target).closest("."+h).length||t._resetFocusedCell(t)});n(document).on(r.addNamespace("dxpointerdown","dxDataGridKeyboardNavigation"),t._documentClickHandler)}},getFocusViewByName:function(t){var i;return n.each(this._focusedViews,function(n,r){if(r.name===t)return i={viewIndex:n,view:r}}),i},getFocusedView:function(){return this._focusedView},dispose:function(){this.callBase(),this._focusedView=null,this._focusedViews=null,this._keyDownProcessor&&this._keyDownProcessor.dispose(),n(document).off(r.addNamespace("dxpointerdown","dxDataGridKeyboardNavigation"),this._documentClickHandler)}}),u.registerModule("keyboardNavigation",{defaultOptions:function(){return{useKeyboard:!0}},controllers:{keyboardNavigation:u.KeyboardNavigationController},extenders:{views:{rowsView:{_renderCore:function(n){this.callBase(n),this.element().attr("tabindex",this.option("useKeyboard")?0:null)}}},controllers:{editing:{editCell:function(n,t){var f=this.callBase(n,t),r=this.getController("keyboardNavigation"),e=r.getFocusedView(),u;return f&&!i.isDefined(e)&&(u=r.getFocusViewByName("rowsView"),r._focusView(u.view,u.viewIndex)),f}}}}})}(jQuery,DevExpress),function(n,t){var u=t.ui,h=t.utils,i=u.dxDataGrid,r="dx-error-row",c="dx-row",f="dx-data-row",e="dx-error-message",o="dx-closebutton",s="dx-datagrid-action";i.ErrorHandlingController=i.ViewController.inherit({init:function(){var n=this;n._columnHeadersView=n.getView("columnHeadersView"),n._rowsView=n.getView("rowsView")},renderErrorRow:function(t,i){var u=this,v=i>=0?u._rowsView:u._columnHeadersView,h=v.tableElement(),c=n("<tr />").addClass(r),l=h.find("."+f).eq(i),y=n("<div/>").addClass(e).text(t),a=n("<div/>").addClass(o).addClass(s);i>=0?(u.removeErrorRow(h.find("tr").eq(l.index()+1)),c.insertAfter(l)):(u.removeErrorRow(h.find("tr").last()),h.append(c));a.on("dxclick",u.createAction(function(t){var i=t.jQueryEvent,f=n(i.currentTarget).closest("."+r);i.stopPropagation(),u.removeErrorRow(f)}));n("<td/>").attr("colspan",u._columnHeadersView.getColumnCount()).prepend(a).append(y).appendTo(c)},removeErrorRow:function(n){n.hasClass(r)&&n.remove()}}),i.registerModule("errorHandling",{defaultOptions:function(){return{errorRowEnabled:!0}},controllers:{errorHandling:i.ErrorHandlingController},extenders:{controllers:{data:{init:function(){var n=this,t=n.getController("errorHandling");n.callBase(),n.dataErrorOccurred.add(function(i){var r=i&&i.message||i;n.option("errorRowEnabled")&&t.renderErrorRow(r)})}},validating:{_rowValidating:function(n,t){var r=this,u=r.getController("errorHandling"),i=r.callBase(n,t);return!i.isValid&&i.errorText&&u.renderErrorRow(i.errorText,i.rowIndex),i}}}}})}(jQuery,DevExpress),function(n,t){var s=t.ui,r=t.utils,i=s.dxDataGrid,h=t.data.utils.normalizeSortingInfo,c="dx-datagrid-total-footer",l="dx-datagrid-summary-item",a="dx-datagrid-text-content",v="dx-datagrid-group-footer",u="groupFooter",e=function(t,r,u){var f,o=n("<td>"),e,s=[];if(!r.command&&t){for(f=0;f<t.length;f++)e=t[f],s.push(n("<div>").css("text-align",e.alignment||r.alignment).addClass(l).addClass(a).addClass(e.cssClass).text(i.getSummaryText(e,u)));o.append(s)}return o},f,o;i.FooterView=i.ColumnsView.inherit(function(){return{_renderTable:function(n){for(var i=this._columnsController.getVisibleColumns(),f=this._createTable(i),r=this._createRow(),o=this.option("summary.texts"),s=i.length,u,t=0;t<s;t++)u=i[t],r.append(e(n.summaryCells[t],u,o));return f.append(r)},_renderCore:function(){var n=this._dataController.footerItems()[0];this.element().empty().addClass(c),n&&n.summaryCells&&n.summaryCells.length&&(this._tableElement=this._renderTable(n),this.wrapTableInScrollContainer(this._tableElement).appendTo(this.element()))},_columnOptionChanged:function(n){var t=n.optionNames;n.changeTypes.grouping||(t.width||t.visibleWidth)&&this.callBase(n)},_handleDataChanged:function(){this.render()},getHeight:function(){var n=this.element();return n?n.outerHeight():0},isVisible:function(){return!!this._dataController.footerItems().length}}}()),f=function(){return{init:function(){this.callBase.apply(this,arguments),this._totalAggregates=[]},summary:function(n){if(!arguments.length)return this._summary;this._summary=n},totalAggregates:function(){return this._totalAggregates}}}(),o=function(){var r=function(n,i,r,u){var f;i&&(f=new t.data.AggregateCalculator({totalAggregates:i.totalAggregates,groupAggregates:i.groupAggregates,data:r,groupLevel:u}),f.calculate()),n._totalAggregates=f?f.totalAggregates():[]},i=function(r,u,f){if(!r||!u.length)return r;var s=u[0],o=f[0],e;return s&&o&&o.length&&(e=t.data.query(r),n.each(o,function(n){e=n===0?e.sortBy(this.selector,this.desc):e.thenBy(this.selector,this.desc)}),e.enumerate().done(function(n){r=n})),u=u.slice(1),f=f.slice(1),u.length&&f.length&&n.each(r,function(){this.items=i(this.items,u,f)}),r},u=function(n,t,r){var u=r&&r.sortByGroups&&r.sortByGroups();return u&&u.length?i(n,t,u):n};return{_handleDataLoadedCore:function(n){var t=this,i=h(n.loadOptions.group||[]),f=t.summary();r(t,f,n.data,i.length),n.data=u(n.data,i,f),t.callBase(n)}}}(),i.DataSourceAdapterServer=i.DataSourceAdapterServer.inherit(f),i.DataSourceAdapterClient=i.DataSourceAdapterClient.inherit(f).inherit(o),i.registerModule("summary",{defaultOptions:function(){return{summary:{groupItems:undefined,totalItems:undefined,calculateCustomSummary:undefined,texts:{sum:Globalize.localize("dxDataGrid-summarySum"),sumOtherColumn:Globalize.localize("dxDataGrid-summarySumOtherColumn"),min:Globalize.localize("dxDataGrid-summaryMin"),minOtherColumn:Globalize.localize("dxDataGrid-summaryMinOtherColumn"),max:Globalize.localize("dxDataGrid-summaryMax"),maxOtherColumn:Globalize.localize("dxDataGrid-summaryMaxOtherColumn"),avg:Globalize.localize("dxDataGrid-summaryAvg"),avgOtherColumn:Globalize.localize("dxDataGrid-summaryAvgOtherColumn"),count:Globalize.localize("dxDataGrid-summaryCount")}},sortByGroupSummaryInfo:undefined}},views:{footerView:i.FooterView},extenders:{controllers:{data:function(){return{_isDataColumn:function(n){return n&&(!r.isDefined(n.groupIndex)||n.showWhenGrouped)},_isGroupFooterVisible:function(){for(var i=this.option("summary.groupItems")||[],t,r,n=0;n<i.length;n++)if(t=i[n],r=this._columnsController.columnOption(t.column),t.showInGroupFooter&&this._isDataColumn(r))return!0;return!1},_processGroupItems:function(n,t,i){var r=this.callBase.apply(this,arguments);return i&&(i.isGroupFooterVisible===undefined&&(i.isGroupFooterVisible=this._isGroupFooterVisible()),i.data&&i.data.items&&i.isGroupFooterVisible&&r.push({rowType:u,data:i.data,groupIndex:i.path.length-1,values:i.path})),r},_processGroupItem:function(t,i){var e=this,f;return i.summaryGroupItems||(i.summaryGroupItems=e.option("summary.groupItems")||[]),t.rowType==="group"&&(f=-1,n.each(i.visibleColumns,function(){if(t.groupIndex===this.groupIndex)return f=this.index,!1}),t.summaryCells=this._calculateSummaryCells(i.summaryGroupItems,t.data.aggregates||[],i.visibleColumns,function(n,t){return n.showInGroupFooter?-1:n.groupRowDisplayMode==="alignByColumn"&&t&&!r.isDefined(t.groupIndex)?t.index:f})),t.rowType===u&&(t.summaryCells=this._calculateSummaryCells(i.summaryGroupItems,t.data.aggregates||[],i.visibleColumns,function(n,t){return n.showInGroupFooter&&e._isDataColumn(t)?t.index:-1})),t},_calculateSummaryCells:function(t,i,u,f){var o=this,s=[],e={};return n.each(t,function(t,u){var h=o._columnsController.columnOption(u.column),l=u.showInColumn&&o._columnsController.columnOption(u.showInColumn)||h,s=f(u,l),c;s>=0&&(e[s]||(e[s]=[]),c=i[t],r.isDefined(c)&&!isNaN(c)&&e[s].push(n.extend({},u,{value:c,columnCaption:h&&h.index!==s?h.caption:undefined})))}),n.isEmptyObject(e)||n.each(u,function(){s.push(e[this.index]||[])}),s},_updateItemsCore:function(n){var t=this,i,u,f,o=t._columnsController,e=t._dataSource,r=t.option("summary.totalItems");t.callBase(n),t._footerItems=[],e&&r&&r.length&&(f=e.totalAggregates(),u=o.getVisibleColumns(),i=t._calculateSummaryCells(r,f,u,function(n,i){return t._isDataColumn(i)?i.index:-1}),i.length&&t._footerItems.push({rowType:"totalFooter",summaryCells:i}))},_getAggregates:function(i){var u=this,f=u.getController("columns"),r=u.option("summary.calculateCustomSummary");return n.map(i||[],function(i){var o=f.columnOption(i.column),h=o&&o.calculateCellValue?n.proxy(o,"calculateCellValue"):t.data.utils.compileGetter(o?o.dataField:i.column),s=i.summaryType||"count",c=h,e;return(s==="avg"||s==="sum")&&(c=function(n){return Number(h(n))}),s==="custom"&&(r||(t.log("E1026"),r=function(){}),e={component:u.component,name:i.name,summaryProcess:"start",totalValue:undefined},r(e),e.summaryProcess="calculate",s={seed:e.totalValue,step:function(n,t){return e.summaryProcess="calculate",e.totalValue=n,e.value=t,r(e),e.totalValue},finalize:function(n){return e.summaryProcess="finalize",e.totalValue=n,delete e.value,r(e),e.totalValue}}),{selector:c,aggregator:s}})},_addSortInfo:function(n,t,i,u){var f;t&&(f=t.groupIndex,u=u||t.sortOrder,r.isDefined(f)&&(n[f]=n[f]||[],n[f].push({selector:i,desc:u==="desc"})))},_findSummaryItem:function(t,i){var u=-1,f=function(n){var t=n.summaryType,i=n.column;return t&&i&&t+"_"+i};return r.isDefined(i)&&n.each(t||[],function(n){if(this.name===i||n===i||this.summaryType===i||this.column===i||f(this)===i)return u=n,!1}),u},_getSummarySortByGroups:function(t,i){var u=this,e=u._columnsController,o=e.getGroupColumns(),f=[];if(i&&i.length)return n.each(t||[],function(){var l,h=this.sortOrder,t=this.groupColumn,c=u._findSummaryItem(i,this.summaryItem),a,s;c<0||(s=function(n){return n.aggregates[c]},r.isDefined(t)?(t=e.columnOption(t),u._addSortInfo(f,t,s,h)):n.each(o,function(n,t){u._addSortInfo(f,t,s,h)}))}),f},_createDataSourceAdapterCore:function(n,t){var r=this._getSummaryOptions(),i;return t==="auto"&&r&&(t={filtering:!0,sorting:!0,paging:!1}),i=this.callBase(n,t),i.summary(r),i},_getSummaryOptions:function(){var n=this,t=n.option("summary.groupItems"),u=n.option("summary.totalItems"),f=n.option("sortByGroupSummaryInfo"),i=n._getAggregates(t),r=n._getAggregates(u),e=function(){return n._getSummarySortByGroups(f,t)};if(i.length||r.length)return{groupAggregates:i,totalAggregates:r,sortByGroups:e}},publicMethods:function(){var n=this.callBase();return n.push("getTotalSummaryValue"),n},getTotalSummaryValue:function(n){var t=this._findSummaryItem(this.option("summary.totalItems"),n),i=this._dataSource.totalAggregates();if(i.length&&t>-1)return i[t]},optionChanged:function(n){n.name==="summary"&&(n.name="dataSource"),this.callBase(n)},init:function(){this._footerItems=[],this.callBase()},footerItems:function(){return this._footerItems}}}()},views:{rowsView:function(){return{_createRow:function(n){var t=this.callBase(n);return n&&t.addClass(n.rowType===u?v:""),t},_renderCells:function(n,t){var r=t.columns,f,o=[],s=this.option("summary.texts"),i;if(n.rowType===u){for(f=n.summaryCells,i=0;i<r.length;i++)o.push(e(f[i],r[i],s));return o}return this.callBase(n,t)}}}()}}})}(jQuery,DevExpress),function(n,t){var f=t.ui,r=t.utils,i=f.dxDataGrid,u="dx-master-detail-cell",e="dx-master-detail-row",o="dx-row-lines";i.registerModule("masterDetail",{defaultOptions:function(){return{masterDetail:{enabled:!1,autoExpandAll:!1,template:null}}},extenders:{controllers:{editorFactory:{focus:function(n){if(n&&n.hasClass(u))this.loseFocus();else return this.callBase(n)}},columns:{_getExpandColumnsCore:function(){var n=this.callBase();return this.option("masterDetail.enabled")&&n.push({}),n}},data:function(){var t=function(n){n._expandedItems=[],n._isExpandAll=n.option("masterDetail.autoExpandAll")};return{init:function(){var i=this;t(i),i.loadingChanged.add(function(t){t||(i._expandedItems=n.grep(i._expandedItems,function(n){return n.visible}))}),i.callBase()},expandAll:function(n){var t=this;n<0?(t._isExpandAll=!0,t._expandedItems=[],t.updateItems()):t.callBase.apply(t,arguments)},collapseAll:function(n){var t=this;n<0?(t._isExpandAll=!1,t._expandedItems=[],t.updateItems()):t.callBase.apply(t,arguments)},isRowExpanded:function(n){var t=this,u=i.getIndexByKey(n,t._expandedItems);return r.isArray(n)?t.callBase.apply(t,arguments):!!(t._isExpandAll^(u>=0&&t._expandedItems[u].visible))},changeRowExpand:function(n){var t=this,u,e,f;if(r.isArray(n))return t.callBase.apply(t,arguments);u=i.getIndexByKey(n,t._expandedItems),u>=0?(e=t._expandedItems[u].visible,t._expandedItems[u].visible=!e):t._expandedItems.push({key:n,visible:!0}),f=t.getRowIndexByKey(n),t.updateItems({changeType:"update",rowIndices:[f,f+1]})},_processDataItem:function(t,i){var f=this,u=f.callBase.apply(f,arguments);return u.isExpanded=f.isRowExpanded(u.key),i.detailColumnIndex===undefined&&(i.detailColumnIndex=-1,n.each(i.visibleColumns,function(n,t){if(t.command==="expand"&&!r.isDefined(t.groupIndex))return i.detailColumnIndex=n,!1})),i.detailColumnIndex>=0&&(u.values[i.detailColumnIndex]=u.isExpanded),u},_processItems:function(){var t=this,f=t.callBase.apply(t,arguments),u,r=[];return n.each(f,function(n,f){r.push(f),u=i.getIndexByKey(f.key,t._expandedItems),f.rowType==="data"&&(f.isExpanded||u>=0)&&r.push({visible:f.isExpanded,rowType:"detail",key:f.key,data:f.data,values:[]})}),r},optionChanged:function(n){var e=this,i,r,u,f;if(n.name==="masterDetail"){n.name="dataSource";switch(n.fullName){case"masterDetail":i=n.value||{},r=n.previousValue||{},u=i.enabled!==r.enabled,f=i.autoExpandAll!==r.autoExpandAll;break;case"masterDetail.enabled":u=!0;break;case"masterDetail.autoExpandAll":f=!0}(u||f)&&t(e)}e.callBase(n)},refresh:function(){var n=this;return t(n),n.callBase.apply(n,arguments)}}}()},views:{rowsView:function(){return{_getColumnTemplate:function(n){var t=this,r=n.column,i;return r.command==="detail"?(i=t.option("masterDetail.template")||t._getDefaultTemplate(r),n.denyRenderToDetachedContainer=!0):i=t.callBase.apply(t,arguments),i},_createRow:function(n){var t=this.callBase(n);return n&&n.rowType==="detail"&&(this.option("showRowLines")&&t.addClass(o),t.addClass(e).toggle(n.visible)),t},_renderCells:function(n,t){var f,e,i,o,r;if(n.rowType==="detail"){for(i=[],f=t.groupColumns.length+t.columnsCountBeforeGroups,o=f+Number(this.option("masterDetail.enabled")),r=0;r<o;r++)i.push(this._createCell(null,n,n.rowIndex,t.columns[r]));e=this._createCell(null,n,n.rowIndex,{command:"detail"},f),e.addClass(u).attr("colspan",t.columns.length-o),i.push(e)}else i=this.callBase.apply(this,arguments);return i}}}()}}})}(jQuery,DevExpress),DevExpress.MOD_WIDGETS_WEB=!0}